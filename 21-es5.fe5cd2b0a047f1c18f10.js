!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(a){r=!0,o=a}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{JLTk:function(t,i,o){"use strict";o.r(i),o.d(i,"MstPageModule",(function(){return $}));var s=o("ofXK"),c=o("3Pt+"),a=o("TEn/"),l=o("tyNb"),u=o("mrSG"),b=o("fXoL"),d=o("BZA/"),f=o("sYmb"),m=o("JvOL"),h=o("q5gJ"),g=["slides"];function p(e,t){if(1&e){var n=b.Yb();b.Xb(0,"ion-buttons",24),b.Xb(1,"ion-button",25),b.Sb(2,"ion-icon",26),b.Wb(),b.Xb(3,"ion-button",27),b.fc("click",(function(){return b.Ac(n),b.jc().startReordering()})),b.Sb(4,"ion-icon",28),b.Wb(),b.Wb()}}function v(e,t){if(1&e){var n=b.Yb();b.Xb(0,"ion-buttons",24),b.Xb(1,"ion-button",27),b.fc("click",(function(){return b.Ac(n),b.jc().endReordering()})),b.Sb(2,"ion-icon",29),b.Wb(),b.Wb()}}function y(e,t){1&e&&b.Sb(0,"ion-col",30)}function M(e,t){1&e&&b.Sb(0,"ion-col",31)}function S(e,t){1&e&&b.Sb(0,"ion-col",32)}function I(e,t){1&e&&b.Sb(0,"div",33)}function k(e,t){1&e&&b.Sb(0,"div",34)}function T(e,t){1&e&&b.Sb(0,"ion-spinner",35)}var O=function(e){return{"default-logo":e}};function w(e,t){if(1&e){var n=b.Yb();b.Xb(0,"ion-item",38),b.fc("click",(function(){b.Ac(n);var e=b.jc().$implicit;return b.jc(2).clickMst(e.symbol)})),b.Xb(1,"img",39),b.fc("error",(function(e){return b.Ac(n),b.jc(3).errorImg(e)})),b.Wb(),b.Xb(2,"ion-label",40),b.Ic(3),b.Wb(),b.Xb(4,"ion-col"),b.Ic(5),b.kc(6,"format"),b.Wb(),b.Xb(7,"ion-col",41),b.Ic(8),b.kc(9,"format"),b.Wb(),b.Xb(10,"ion-col",41),b.Ic(11),b.kc(12,"format"),b.Wb(),b.Wb()}if(2&e){var i=b.jc().$implicit;b.Fb(1),b.pc("src",i.icon,b.Cc)("ngClass",b.tc(15,O,"default_mst"==i.icon)),b.Fb(2),b.Jc(i.symbol),b.Fb(2),b.Jc(b.mc(6,6,i.balance.total||0,i.balance.decimals)),b.Fb(3),b.Jc(b.mc(9,9,i.balance.unconfirmed||0,i.balance.decimals)),b.Fb(3),b.Jc(b.mc(12,12,i.balance.frozen||0,i.balance.decimals))}}function F(e,t){1&e&&b.Sb(0,"div",44)}function X(e,t){if(1&e){var n=b.Yb();b.Xb(0,"ion-button",27),b.fc("click",(function(){return b.Ac(n),b.jc(2).$implicit.hidden=!0})),b.Sb(1,"ion-icon",45),b.Wb()}}function W(e,t){if(1&e){var n=b.Yb();b.Xb(0,"ion-button",27),b.fc("click",(function(){return b.Ac(n),b.jc(2).$implicit.hidden=!1})),b.Sb(1,"ion-icon",46),b.Wb()}}function j(e,t){if(1&e){var n=b.Yb();b.Xb(0,"ion-item"),b.Xb(1,"img",39),b.fc("error",(function(e){return b.Ac(n),b.jc(3).errorImg(e)})),b.Wb(),b.Xb(2,"ion-label",40),b.Ic(3),b.Wb(),b.Xb(4,"ion-buttons",24),b.Gc(5,F,1,0,"div",42),b.Gc(6,X,2,0,"ion-button",43),b.Gc(7,W,2,0,"ion-button",43),b.Wb(),b.Sb(8,"ion-reorder",24),b.Wb()}if(2&e){var i=b.jc().$implicit;b.Fb(1),b.pc("src",i.icon,b.Cc)("ngClass",b.tc(6,O,"default_mst"==i.icon)),b.Fb(2),b.Jc(i.symbol),b.Fb(2),b.pc("ngIf",!i.deletable),b.Fb(1),b.pc("ngIf",!i.hidden),b.Fb(1),b.pc("ngIf",i.hidden)}}function R(e,t){if(1&e&&(b.Xb(0,"div"),b.Gc(1,w,13,17,"ion-item",37),b.Gc(2,j,9,8,"ion-item",18),b.Wb()),2&e){var n=t.$implicit,i=b.jc(2);b.Fb(1),b.pc("ngIf","default"==i.status&&!n.hidden),b.Fb(1),b.pc("ngIf","edit"==i.status)}}var x=function(){return["order","-1"]};function A(e,t){if(1&e){var n=b.Yb();b.Xb(0,"ion-reorder-group",36),b.fc("ionItemReorder",(function(e){return b.Ac(n),b.jc().reorder(e)})),b.Gc(1,R,3,2,"div",22),b.kc(2,"orderBy"),b.Wb()}if(2&e){var i=b.jc();b.Fb(1),b.pc("ngForOf",b.mc(2,1,i.msts,b.sc(4,x)))}}function C(e,t){1&e&&b.Sb(0,"p",47)}function G(e,t){1&e&&b.Gc(0,C,1,0,"ng-template")}function L(e,t){if(1&e){var n=b.Yb();b.Xb(0,"ion-item"),b.Xb(1,"img",9),b.fc("error",(function(e){return b.Ac(n),b.jc().errorImg(e)})),b.Wb(),b.Xb(2,"ion-label",40),b.Ic(3),b.Wb(),b.Xb(4,"ion-col"),b.Ic(5),b.Wb(),b.Xb(6,"ion-buttons",24),b.Xb(7,"ion-button",48),b.fc("click",(function(){b.Ac(n);var e=t.$implicit;return b.jc().addMst(e)})),b.Sb(8,"ion-icon",49),b.Wb(),b.Wb(),b.Wb()}if(2&e){var i=t.$implicit,r=b.jc();b.Fb(1),b.pc("src",r.icons.MST[i.symbol]||"assets/icon/default_mst.png",b.Cc),b.Fb(2),b.Jc(i.symbol),b.Fb(2),b.Jc(i.description),b.Fb(2),b.pc("disabled",-1!==r.order.indexOf(i.symbol))}}function P(e,t){1&e&&b.Sb(0,"ion-spinner",35)}function E(e,t){if(1&e){var n=b.Yb();b.Xb(0,"div",50),b.Xb(1,"ion-button",51),b.fc("click",(function(){return b.Ac(n),b.jc().getMoreMsts()})),b.Sb(2,"ion-icon",52),b.Sb(3,"span",53),b.Wb(),b.Wb()}if(2&e){var i=b.jc();b.Fb(1),b.pc("disabled",i.loadingMoreMsts)}}var D,_,Y,J=[{path:"",component:(D=function(){function t(e,i){n(this,t),this.metaverseService=e,this.router=i,this.segment=0,this.icons={MST:[],MIT:[]},this.whitelist=[],this.tickers={},this.msts=[],this.reorderingMsts=[],this.allMsts=[],this.loading=!0,this.loadingMoreMsts=!0,this.order=[],this.mstsFullyLoaded=!1,this.status="default",this.errorImg=function(e){return e.target.remove()}}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.loadTickers(),this.heightSubscription=this.metaverseService.height$.subscribe((function(){e.showBalances()})),this.initGetMsts()}},{key:"ngOnDestroy",value:function(){this.heightSubscription&&this.heightSubscription.unsubscribe()}},{key:"loadTickers",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.metaverseService.getBaseAndTickers();case 2:n=t.sent,i=e(n,2),this.base=i[0],this.tickers=i[1];case 6:case"end":return t.stop()}}),t,this)})))}},{key:"setSegment",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.slides.getActiveIndex();case 2:this.segment=e.sent;case 3:case"end":return e.stop()}}),e,this)})))}},{key:"showBalances",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"default"!==this.status){e.next=20;break}return e.next=4,this.metaverseService.getBalances();case 4:return this.balances=e.sent,e.next=7,this.metaverseService.addAssetsToAssetOrder(Object.keys(this.balances.MST));case 7:return e.next=9,this.metaverseService.assetOrder();case 9:return this.order=e.sent,e.next=12,this.metaverseService.getHiddenMst();case 12:return t=e.sent,e.next=15,this.metaverseService.getDefaultIcon();case 15:this.icons=e.sent,this.msts=[],Object.keys(this.balances.MST).forEach((function(e){var n={decimals:i.balances.MST[e].decimals,available:i.balances.MST[e].available||0,unconfirmed:i.balances.MST[e].unconfirmed||0,frozen:i.balances.MST[e].frozen||0,total:0};n.total=n.available+n.unconfirmed+n.frozen,i.msts.push({symbol:e,balance:n,icon:i.icons.MST[e]||"assets/icon/default_mst.png",hidden:-1!==t.indexOf(e),order:i.order.indexOf(e),deletable:!1})})),n={decimals:0,available:0,unconfirmed:0,frozen:0,total:0},this.order.forEach((function(e){i.balances.MST[e]||i.msts.push({symbol:e,balance:n,icon:i.icons.MST[e]||"assets/icon/default_mst.png",hidden:-1!==t.indexOf(e),order:i.order.indexOf(e),deletable:!0})})),this.loading=!1;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.error(e.t0),console.log("Can't load balances");case 25:case"end":return e.stop()}}),e,this,[[0,22]])})))}},{key:"startReordering",value:function(){document.getElementById("reorder").disabled=!1,this.status="edit",this.reorderingMsts=this.msts}},{key:"reorder",value:function(e){var t=this.reorderingMsts.splice(e.detail.from,1)[0];this.reorderingMsts.splice(e.detail.to,0,t),e.detail.complete()}},{key:"endReordering",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.getElementById("reorder").disabled=!0,this.status="default",this.msts=this.reorderingMsts,t=[],n=[],this.msts.forEach((function(e){t.push(e.symbol),e.hidden&&n.push(e.symbol)})),e.next=5,this.metaverseService.setAssetOrder(t);case 5:return e.next=7,this.metaverseService.setHiddenMst(n);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"clickMst",value:function(e){"default"===this.status&&this.router.navigate(["/account","mst",e])}},{key:"initGetMsts",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.allMsts=[],this.loadingMoreMsts=!0,t.next=3,Promise.all([this.metaverseService.listSpecialMsts(),this.metaverseService.listMsts()]);case 3:n=t.sent,i=e(n,2),r=i[0],o=i[1],this.allMsts=r.concat(o),this.loadingMoreMsts=!1;case 8:case"end":return t.stop()}}),t,this)})))}},{key:"getMoreMsts",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingMoreMsts=!0,t=this.allMsts[this.allMsts.length-1]?this.allMsts[this.allMsts.length-1].symbol:void 0,e.next=4,this.metaverseService.listMsts(t);case 4:(n=e.sent)&&n.length<20&&(this.mstsFullyLoaded=!0),this.allMsts=this.allMsts.concat(n),this.loadingMoreMsts=!1;case 6:case"end":return e.stop()}}),e,this)})))}},{key:"addMst",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.msts.push({symbol:e.symbol,balance:{decimals:e.decimals,available:0,unconfirmed:0,frozen:0,total:0},icon:this.icons.MST[e.symbol]||"assets/icon/default_mst.png",hidden:!1,order:this.msts.length,deletable:!0}),this.order.push(e.symbol),t.next=4,this.metaverseService.addAssetsToAssetOrder([e.symbol]);case 4:case"end":return t.stop()}}),t,this)})))}}]),t}(),D.\u0275fac=function(e){return new(e||D)(b.Rb(d.a),b.Rb(l.h))},D.\u0275cmp=b.Lb({type:D,selectors:[["app-mst"]],viewQuery:function(e,t){var n;1&e&&b.Nc(g,!0),2&e&&b.xc(n=b.gc())&&(t.slides=n.first)},decls:35,vars:16,consts:[["slot","start"],["translate","MST.TITLE"],["slot","end",4,"ngIf"],["lines","none"],["color","primary",3,"ngModel","ngModelChange","ionChange"],["value","0","translate","MST.GRID.TITLE"],["value","1","translate","MST.ALL.TITLE"],["pager","false",3,"options","ionSlideWillChange"],["slides",""],[1,"coinlogo",3,"src","error"],["translate","MST.GRID.SYMBOL",1,"symbol"],["translate","MST.GRID.TOTAL",4,"ngIf"],["class","ion-hide-sm-down","translate","MST.GRID.UNCONFIRMED",4,"ngIf"],["class","ion-hide-sm-down","translate","MST.GRID.FROZEN",4,"ngIf"],["class","empty-space-header-edit",4,"ngIf"],["class","empty-space-header-default",4,"ngIf"],["name","dots",4,"ngIf"],["id","reorder",3,"ionItemReorder",4,"ngIf"],[4,"ngIf"],["translate","MST.ALL.SYMBOL",1,"symbol"],["translate","MST.ALL.DESCRIPTION"],[1,"empty-space-header-all"],[4,"ngFor","ngForOf"],["class","center",4,"ngIf"],["slot","end"],["routerLink","/account/mst/create"],["slot","icon-only","name","add"],[3,"click"],["slot","icon-only","name","pencil"],["slot","icon-only","name","checkmark"],["translate","MST.GRID.TOTAL"],["translate","MST.GRID.UNCONFIRMED",1,"ion-hide-sm-down"],["translate","MST.GRID.FROZEN",1,"ion-hide-sm-down"],[1,"empty-space-header-edit"],[1,"empty-space-header-default"],["name","dots"],["id","reorder",3,"ionItemReorder"],["button","","detail","",3,"click",4,"ngIf"],["button","","detail","",3,"click"],[1,"coinlogo",3,"src","ngClass","error"],[1,"symbol"],[1,"ion-hide-sm-down"],["class","empty-space-button",4,"ngIf"],[3,"click",4,"ngIf"],[1,"empty-space-button"],["color","black","slot","icon-only","name","eye"],["color","black","slot","icon-only","name","eye-off"],["translate","NO_MST"],[3,"disabled","click"],["color","black","slot","icon-only","name","add"],[1,"center"],["color","primary","fill","outline","shape","round",3,"disabled","click"],["slot","start","name","add"],["translate","MST.ALL.LOAD_MORE"]],template:function(e,t){if(1&e){var n=b.Yb();b.Xb(0,"ion-header"),b.Xb(1,"ion-toolbar"),b.Xb(2,"ion-buttons",0),b.Sb(3,"ion-menu-button"),b.Wb(),b.Sb(4,"ion-title",1),b.Gc(5,p,5,0,"ion-buttons",2),b.Gc(6,v,3,0,"ion-buttons",2),b.Wb(),b.Wb(),b.Xb(7,"ion-content"),b.Xb(8,"ion-item",3),b.Xb(9,"ion-segment",4),b.fc("ngModelChange",(function(e){return t.segment=e}))("ionChange",(function(){return b.Ac(n),b.yc(13).slideTo(t.segment)})),b.Sb(10,"ion-segment-button",5),b.Sb(11,"ion-segment-button",6),b.Wb(),b.Wb(),b.Xb(12,"ion-slides",7,8),b.fc("ionSlideWillChange",(function(){return t.setSegment()})),b.Xb(14,"ion-slide"),b.Xb(15,"ion-item"),b.Xb(16,"img",9),b.fc("error",(function(e){return t.errorImg(e)})),b.Wb(),b.Sb(17,"ion-label",10),b.Gc(18,y,1,0,"ion-col",11),b.Gc(19,M,1,0,"ion-col",12),b.Gc(20,S,1,0,"ion-col",13),b.Gc(21,I,1,0,"div",14),b.Gc(22,k,1,0,"div",15),b.Wb(),b.Gc(23,T,1,0,"ion-spinner",16),b.Gc(24,A,3,5,"ion-reorder-group",17),b.Gc(25,G,1,0,void 0,18),b.Wb(),b.Xb(26,"ion-slide"),b.Xb(27,"ion-item"),b.Xb(28,"img",9),b.fc("error",(function(e){return t.errorImg(e)})),b.Wb(),b.Sb(29,"ion-label",19),b.Sb(30,"ion-col",20),b.Sb(31,"div",21),b.Wb(),b.Gc(32,L,9,4,"ion-item",22),b.Gc(33,P,1,0,"ion-spinner",16),b.Gc(34,E,4,1,"div",23),b.Wb(),b.Wb(),b.Wb()}2&e&&(b.Fb(5),b.pc("ngIf","default"==t.status),b.Fb(1),b.pc("ngIf","edit"==t.status),b.Fb(3),b.pc("ngModel",t.segment),b.Fb(7),b.pc("src","assets/icon/default_mst.png",b.Cc),b.Fb(2),b.pc("ngIf","default"==t.status),b.Fb(1),b.pc("ngIf","default"==t.status),b.Fb(1),b.pc("ngIf","default"==t.status),b.Fb(1),b.pc("ngIf","edit"==t.status),b.Fb(1),b.pc("ngIf","default"==t.status),b.Fb(1),b.pc("ngIf",t.loading),b.Fb(1),b.pc("ngIf",null==t.msts?null:t.msts.length),b.Fb(1),b.pc("ngIf",!t.loading&&t.msts&&0==t.msts.length),b.Fb(3),b.pc("src","assets/icon/default_mst.png",b.Cc),b.Fb(4),b.pc("ngForOf",t.allMsts),b.Fb(1),b.pc("ngIf",t.loadingMoreMsts),b.Fb(1),b.pc("ngIf",!t.mstsFullyLoaded))},directives:[a.u,a.X,a.j,a.C,a.V,f.a,s.m,a.r,a.x,a.L,a.gb,c.i,c.l,a.M,a.Q,a.P,a.z,a.q,s.l,a.i,a.fb,l.i,a.v,a.R,a.I,s.k,a.H],pipes:[m.a,h.a],styles:[".coinlogo[_ngcontent-%COMP%]{width:28px;margin-right:20px}.empty-space-header-edit[_ngcontent-%COMP%]{width:212px}.empty-space-header-default[_ngcontent-%COMP%]{width:20px}.empty-space-button[_ngcontent-%COMP%]{width:48px}.empty-space-header-all[_ngcontent-%COMP%]{width:80px}ion-slide[_ngcontent-%COMP%]{display:block}"]}),D)},{path:"create",loadChildren:function(){return Promise.all([o.e(0),o.e(44)]).then(o.bind(null,"ntM1")).then((function(e){return e.CreatePageModule}))}},{path:":symbol",loadChildren:function(){return o.e(13).then(o.bind(null,"1+b2")).then((function(e){return e.DetailsPageModule}))}}],B=((_=function e(){n(this,e)}).\u0275mod=b.Pb({type:_}),_.\u0275inj=b.Ob({factory:function(e){return new(e||_)},imports:[[l.j.forChild(J)],l.j]}),_),N=o("iTUp"),$=((Y=function e(){n(this,e)}).\u0275mod=b.Pb({type:Y}),Y.\u0275inj=b.Ob({factory:function(e){return new(e||Y)},imports:[[s.c,c.e,a.Y,N.a,f.c.forChild(),B]]}),Y)},iTUp:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var r=i("ofXK"),o=i("fXoL"),s=function(){var e=function e(){n(this,e)};return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},imports:[[r.c]]}),e}()},q5gJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var o=i("fXoL"),s=function(){var e=function(){function e(){n(this,e)}return r(e,[{key:"transform",value:function(e,t){return(e/Math.pow(10,t)).toLocaleString(void 0,{maximumFractionDigits:t})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Qb({name:"format",type:e,pure:!0}),e}()}}])}();