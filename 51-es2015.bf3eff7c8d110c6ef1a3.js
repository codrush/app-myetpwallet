(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{rJJX:function(t,e,n){"use strict";n.r(e),n.d(e,"LoginAccountPageModule",(function(){return g}));var o=n("ofXK"),i=n("3Pt+"),r=n("TEn/"),s=n("tyNb"),a=n("mrSG"),c=n("fXoL"),l=n("BZA/"),d=n("Fvwb"),b=n("3LUQ"),u=n("sYmb");const p=[{path:"",component:(()=>{class t{constructor(t,e,n,o){this.mvs=t,this.router=e,this.walletService=n,this.alertService=o,this.account=history.state.data&&history.state.data.account?history.state.data.account:"",this.password="",this.passwordValid=t=>!!t&&t.length>3,this.complete=t=>!!t&&this.passwordValid(t)}ngOnInit(){}cancel(){this.router.navigate(["login"])}importAccount(t,e){return Object(a.a)(this,void 0,void 0,(function*(){yield this.alertService.showLoading();try{const n=yield this.walletService.decryptAccount(t.content,e);yield Promise.all([this.walletService.setupAccount(t.name,n),this.walletService.setAccountParams(t.params)]);const[o,i]=yield Promise.all([this.walletService.getWallet(e),this.walletService.getAddressIndexFromWallet()]),r=yield this.walletService.generateAddresses(o,0,t.params.index||i);yield this.mvs.addAddresses(r);const s=yield this.walletService.getMasterPublicKey(e);yield this.walletService.setXpub(s),yield this.walletService.saveSessionAccount(e),yield this.walletService.setVmAddressFromPassphrase(e),this.alertService.stopLoading(),this.router.navigate(["/loading"],{state:{data:{reset:!0}}})}catch(n){switch(console.error(n.message),this.alertService.stopLoading(),n.message){case"ERR_DECRYPT_WALLET":this.alertService.showError("MESSAGE.PASSWORD_WRONG","");break;case"ERR_ACCOUNT_NAME_UNKNOWN":this.alertService.showError("LOGIN_ACCOUNT.MESSAGE.ERR_ACCOUNT_NAME_UNKNOWN","");break;default:this.alertService.showError("LOGIN_ACCOUNT.MESSAGE.ERR_IMPORT_ACCOUNT",n.message)}}}))}deleteAccount(t){return Object(a.a)(this,void 0,void 0,(function*(){(yield this.alertService.alertConfirm("LOGIN_ACCOUNT.FORGET.TITLE","LOGIN_ACCOUNT.FORGET.SUBTITLE","LOGIN_ACCOUNT.FORGET.BUTTON.BACK","LOGIN_ACCOUNT.FORGET.BUTTON.FORGET"))&&(yield this.walletService.deleteAccount(t),this.router.navigate(["login"]))}))}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(l.a),c.Rb(s.h),c.Rb(d.a),c.Rb(b.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-login-account"]],decls:24,vars:3,consts:[["slot","start"],["defaultHref","/login"],["translate","LOGIN_ACCOUNT.TITLE"],[3,"ngSubmit"],["loginAccountForm","ngForm"],["size-md","12","size-lg","6","offset-lg","3"],[1,"center","top-padding"],["color","primary","position","floating","translate","LOGIN_ACCOUNT.PASSWORD"],["name","password","id","password-input","type","password","required","",3,"ngModel","ngModelChange"],["size","12","size-sm","6"],["expand","full","color","danger","fill","outline","shape","round",3,"click"],["slot","start","name","trash"],["translate","LOGIN_ACCOUNT.FORGET_BUTTON"],["type","submit","expand","full","fill","outline","shape","round",3,"disabled"],["slot","start","name","arrow-forward"],["translate","LOGIN_ACCOUNT.LOGIN_BUTTON"]],template:function(t,e){1&t&&(c.Xb(0,"ion-header"),c.Xb(1,"ion-toolbar"),c.Xb(2,"ion-buttons",0),c.Sb(3,"ion-back-button",1),c.Wb(),c.Sb(4,"ion-title",2),c.Wb(),c.Wb(),c.Xb(5,"ion-content"),c.Xb(6,"form",3,4),c.fc("ngSubmit",(function(){return e.importAccount(e.account,e.password)})),c.Xb(8,"ion-row"),c.Xb(9,"ion-col",5),c.Xb(10,"h2",6),c.Ic(11),c.Wb(),c.Xb(12,"ion-item"),c.Sb(13,"ion-label",7),c.Xb(14,"ion-input",8),c.fc("ngModelChange",(function(t){return e.password=t})),c.Wb(),c.Wb(),c.Xb(15,"ion-row"),c.Xb(16,"ion-col",9),c.Xb(17,"ion-button",10),c.fc("click",(function(){return e.deleteAccount(e.account.name)})),c.Sb(18,"ion-icon",11),c.Sb(19,"span",12),c.Wb(),c.Wb(),c.Xb(20,"ion-col",9),c.Xb(21,"ion-button",13),c.Sb(22,"ion-icon",14),c.Sb(23,"span",15),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb()),2&t&&(c.Fb(11),c.Jc(e.account.name),c.Fb(3),c.pc("ngModel",e.password),c.Fb(7),c.pc("disabled",!e.complete(e.password)))},directives:[r.u,r.X,r.j,r.f,r.g,r.V,u.a,r.r,i.p,i.j,i.k,r.K,r.q,r.x,r.z,r.w,r.hb,i.n,i.i,i.l,r.i,r.v],styles:[".top-padding[_ngcontent-%COMP%]{padding-top:10%}.more-bottom-padding[_ngcontent-%COMP%]{padding-bottom:80px}.center-psw[_ngcontent-%COMP%]{margin:auto}.center-info[_ngcontent-%COMP%]{margin:auto;text-align:center}"]}),t})()}];let h=(()=>{class t{}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(e){return new(e||t)},imports:[[s.j.forChild(p)],s.j]}),t})(),g=(()=>{class t{}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(e){return new(e||t)},imports:[[o.c,i.e,u.c.forChild(),r.Y,h]]}),t})()}}]);