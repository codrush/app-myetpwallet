!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,i=!1,s=void 0;try{for(var r,c=e[Symbol.iterator]();!(a=(r=c.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(o){i=!0,s=o}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}return n}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{VNuW:function(t,a,r){"use strict";r.r(a),r.d(a,"SendPageModule",(function(){return _e}));var c=r("ofXK"),o=r("3Pt+"),l=r("TEn/"),d=r("tyNb"),u=r("mrSG"),b=r("gddX"),p=r("fXoL"),f=r("BZA/"),g=r("3LUQ"),h=r("OaWH"),m=r("Fvwb"),v=r("sYmb"),A=r("9FR+"),E=r("q5gJ"),S=["recipientAddressInput"],M=["quantityInput"];function _(e,t){1&e&&p.Sb(0,"br")}function T(e,t){1&e&&p.Sb(0,"br")}function F(e,t){if(1&e&&(p.Xb(0,"p",11),p.Ic(1),p.kc(2,"translate"),p.Gc(3,T,1,0,"br",6),p.Ic(4),p.kc(5,"format"),p.Wb()),2&e){var n=p.jc();p.Fb(1),p.Kc("",p.lc(2,3,"SEND_SINGLE.FEE"),":"),p.Fb(2),p.pc("ngIf",n.platform.is("mobile")),p.Fb(1),p.Kc(" ",p.mc(5,5,n.fee,8)," ETP")}}function N(e,t){1&e&&p.Sb(0,"br")}function y(e,t){if(1&e&&(p.Xb(0,"p",11),p.Ic(1),p.kc(2,"translate"),p.Gc(3,N,1,0,"br",6),p.Ic(4),p.kc(5,"format"),p.Wb()),2&e){var n=p.jc();p.Fb(1),p.Kc("",p.lc(2,3,"SEND_MORE.FEE"),":"),p.Fb(2),p.pc("ngIf",n.platform.is("mobile")),p.Fb(1),p.Kc(" ",p.mc(5,5,1e4*n.recipients.length,8)," ETP")}}function I(e,t){1&e&&p.Sb(0,"p",12)}var O=function(e){return{"error-border":e}};function k(e,t){if(1&e){var n=p.Yb();p.Xb(0,"ion-item",19),p.Sb(1,"ion-label",44),p.Xb(2,"ion-input",45,46),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc(2).recipient_avatar=e}))("ngModelChange",(function(){return p.Ac(n),p.jc(2).recipientAvatarChanged()})),p.Wb(),p.Wb()}if(2&e){var a=p.jc(2);p.pc("ngClass",p.tc(3,O,!a.validAvatar(a.recipient_avatar))),p.Fb(2),p.pc("ngModel",a.recipient_avatar)("disabled",a.disableParams&&a.params.recipient_avatar)}}function C(e,t){if(1&e){var n=p.Yb();p.Xb(0,"ion-button",47),p.fc("click",(function(){return p.Ac(n),p.jc(2).scan()})),p.Sb(1,"ion-icon",48),p.Wb()}}function w(e,t){if(1&e){var n=p.Yb();p.Xb(0,"ion-button",49),p.fc("click",(function(){return p.Ac(n),p.jc(2).sendAll()})),p.Wb()}}function R(e,t){if(1&e&&(p.Xb(0,"div",50),p.Ic(1),p.kc(2,"number"),p.Wb()),2&e){var n=p.jc(2);p.Fb(1),p.Lc(" \u2248",n.base," ",p.mc(2,2,n.fiatValue(n.quantity),"1.0-2")," ")}}function L(e,t){1&e&&p.Sb(0,"ion-item",51)}function D(e,t){if(1&e&&(p.Xb(0,"ion-select-option",53),p.Ic(1),p.kc(2,"format"),p.Wb()),2&e){var n=p.jc().$implicit,a=p.jc(2);p.qc("value",n.address),p.Fb(1),p.Mc(" ",n.identifier," - ",p.mc(2,4,n.balance,a.decimals)," ",a.selectedAsset,"")}}function P(e,t){if(1&e&&(p.Vb(0),p.Gc(1,D,3,7,"ion-select-option",52),p.Ub()),2&e){var n=t.$implicit;p.Fb(1),p.pc("ngIf",n.balance>0)}}function X(e,t){1&e&&p.Sb(0,"ion-item",54)}function W(e,t){1&e&&p.Sb(0,"ion-item",70)}function j(e,t){if(1&e&&(p.Xb(0,"ion-select-option",53),p.Ic(1),p.kc(2,"format"),p.Wb()),2&e){var n=t.$implicit,a=p.jc(3);p.qc("value",n.address),p.Fb(1),p.Mc(" ",n.identifier," - ",p.mc(2,4,n.balance,a.decimals)," ",a.selectedAsset,"")}}function G(e,t){if(1&e){var n=p.Yb();p.Xb(0,"ion-item",15),p.Sb(1,"ion-label",71),p.Xb(2,"ion-toggle",72),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc(3).lock=e})),p.Wb(),p.Wb()}if(2&e){var a=p.jc(3);p.Fb(2),p.pc("ngModel",a.lock)}}function x(e,t){if(1&e){var n=p.Yb();p.Xb(0,"app-attenuation-model-selector",73),p.fc("modelChanged",(function(e){return p.Ac(n),p.jc(3).setAttenuationModel(e)})),p.Wb()}if(2&e){var a=p.jc(3);p.pc("quantity",a.validQuantity(a.quantity)?a.quantity:void 0)("decimals",a.decimals)("asset",a.selectedAsset)}}var q=function(e,t){return{"error-border":e,"valid-border":t}};function V(e,t){if(1&e){var n=p.Yb();p.Xb(0,"div"),p.Xb(1,"ion-item",1),p.Sb(2,"ion-label",55),p.Xb(3,"ion-badge",56),p.Ic(4),p.kc(5,"format"),p.Wb(),p.Wb(),p.Xb(6,"ion-item"),p.Xb(7,"ion-range",57),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc(2).fee=e})),p.Xb(8,"ion-label",58),p.Ic(9),p.kc(10,"format"),p.Wb(),p.Xb(11,"ion-label",59),p.Ic(12),p.kc(13,"format"),p.Wb(),p.Wb(),p.Wb(),p.Xb(14,"ion-item",19),p.Sb(15,"ion-label",60),p.Xb(16,"ion-input",61),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc(2).message=e})),p.Wb(),p.Wb(),p.Sb(17,"div",62),p.Gc(18,W,1,0,"ion-item",63),p.Sb(19,"br"),p.Xb(20,"ion-item"),p.Sb(21,"ion-label",64),p.Xb(22,"ion-select",65),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc(2).changeAddress=e})),p.kc(23,"translate"),p.kc(24,"translate"),p.Sb(25,"ion-select-option",66),p.Gc(26,j,3,7,"ion-select-option",67),p.Wb(),p.Wb(),p.Sb(27,"br"),p.Gc(28,G,3,1,"ion-item",68),p.Gc(29,x,1,3,"app-attenuation-model-selector",69),p.Wb()}if(2&e){var a=p.jc(2);p.Fb(4),p.Kc("",p.mc(5,14,a.fee,8)," ETP"),p.Fb(3),p.pc("ngModel",a.fee),p.Fb(2),p.Jc(p.mc(10,17,1e4,8)),p.Fb(3),p.Jc(p.mc(13,20,1e7,8)),p.Fb(2),p.pc("ngClass",p.uc(27,q,!a.validMessageLength(a.message),a.message.length>0&&a.validMessageLength(a.message))),p.Fb(2),p.pc("ngModel",a.message)("disabled",a.disableParams&&a.params.message),p.Fb(2),p.pc("ngIf",!a.validMessageLength(a.message)),p.Fb(4),p.qc("okText",p.lc(23,23,"OK")),p.qc("cancelText",p.lc(24,25,"CANCEL")),p.pc("ngModel",a.changeAddress),p.Fb(4),p.pc("ngForOf",a.addressbalances),p.Fb(2),p.pc("ngIf","ETP"!=a.selectedAsset),p.Fb(1),p.pc("ngIf",a.lock)}}function B(e,t){if(1&e){var n=p.Yb();p.Xb(0,"form",13,14),p.fc("ngSubmit",(function(){return p.Ac(n),p.jc().send()}))("keyup.enter",(function(){return p.Ac(n),p.jc().send()})),p.Xb(2,"ion-list"),p.Xb(3,"ion-item",15),p.Sb(4,"ion-label",16),p.Xb(5,"ion-toggle",17),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc().sendToAvatar=e})),p.Wb(),p.Wb(),p.Gc(6,k,4,5,"ion-item",18),p.Xb(7,"ion-item",19),p.Sb(8,"ion-label",20),p.Xb(9,"ion-input",21,22),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc().recipient_address=e}))("ngModelChange",(function(){return p.Ac(n),p.jc().recipientChanged()})),p.Wb(),p.Gc(11,C,2,0,"ion-button",23),p.Wb(),p.Xb(12,"ion-item",19),p.Sb(13,"ion-label",24),p.Xb(14,"ion-input",25,26),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc().quantity=e})),p.Wb(),p.Gc(16,w,1,0,"ion-button",27),p.Wb(),p.Gc(17,R,3,5,"div",28),p.Gc(18,L,1,0,"ion-item",29),p.Sb(19,"br"),p.Xb(20,"ion-item",19),p.Sb(21,"ion-label",30),p.Xb(22,"ion-select",31),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc().sendFrom=e}))("ngModelChange",(function(){return p.Ac(n),p.jc().onFromAddressChange()})),p.kc(23,"translate"),p.kc(24,"translate"),p.Sb(25,"ion-select-option",32),p.Gc(26,P,2,1,"ng-container",33),p.Wb(),p.Wb(),p.Gc(27,X,1,0,"ion-item",34),p.Sb(28,"br"),p.Xb(29,"ion-item",15),p.Sb(30,"ion-label",35),p.Xb(31,"ion-toggle",36),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc().showAdvanced=e})),p.Wb(),p.Wb(),p.Gc(32,V,30,30,"div",6),p.Wb(),p.Xb(33,"ion-row",37),p.Xb(34,"ion-col"),p.Xb(35,"ion-button",38),p.fc("click",(function(){return p.Ac(n),p.jc().cancel()})),p.Sb(36,"ion-icon",39),p.Sb(37,"span",40),p.Wb(),p.Wb(),p.Xb(38,"ion-col"),p.Xb(39,"ion-button",41),p.Sb(40,"ion-icon",42),p.Sb(41,"span",43),p.Wb(),p.Wb(),p.Wb(),p.Wb()}if(2&e){var a=p.jc();p.Fb(5),p.pc("ngModel",a.sendToAvatar)("disabled",a.disableParams&&a.params.recipient_avatar),p.Fb(1),p.pc("ngIf",a.sendToAvatar),p.Fb(1),p.pc("ngClass",p.uc(26,q,!a.validaddress(a.recipient_address),a.validaddress(a.recipient_address))),p.Fb(2),p.pc("ngModel",a.recipient_address)("disabled",a.sendToAvatar||a.disableParams&&a.params.recipient_address),p.Fb(2),p.pc("ngIf",a.isMobile&&!a.sendToAvatar&&!(a.disableParams&&a.params.recipient_address)),p.Fb(1),p.pc("ngClass",p.uc(29,q,!a.validQuantity(a.quantity),a.validQuantity(a.quantity))),p.Fb(2),p.pc("ngModel",a.quantity)("disabled",a.disableParams&&a.params.amount),p.Fb(2),p.pc("ngIf",a.etpBalance>1e4&&!(a.disableParams&&a.params.amount)),p.Fb(1),p.pc("ngIf",a.tickers&&a.tickers[a.selectedAsset]&&a.tickers[a.selectedAsset][a.base]),p.Fb(1),p.pc("ngIf",a.countDecimals(a.quantity)>a.decimals),p.Fb(2),p.pc("ngClass",p.tc(32,O,!a.validFromAddress(a.sendFrom))),p.Fb(2),p.qc("okText",p.lc(23,22,"OK")),p.qc("cancelText",p.lc(24,24,"CANCEL")),p.pc("ngModel",a.sendFrom),p.Fb(4),p.pc("ngForOf",a.addressbalances),p.Fb(1),p.pc("ngIf",!a.validFromAddress(a.sendFrom)),p.Fb(4),p.pc("ngModel",a.showAdvanced),p.Fb(1),p.pc("ngIf",a.showAdvanced),p.Fb(7),p.pc("disabled",!a.validForm())}}function U(e,t){if(1&e){var n=p.Yb();p.Xb(0,"div",80),p.Xb(1,"ion-button",94),p.fc("click",(function(){return p.Ac(n),p.yc(5).click()})),p.Sb(2,"ion-icon",95),p.Sb(3,"span",96),p.Wb(),p.Xb(4,"input",97,98),p.fc("change",(function(e){return p.Ac(n),p.jc(2).import(e)})),p.Wb(),p.Wb()}}var Y=function(e){return{index:e}},Q=function(){return{standalone:!0}};function K(e,t){if(1&e){var n=p.Yb();p.Xb(0,"ion-col",104),p.Xb(1,"ion-item",19),p.Sb(2,"ion-label",106),p.Xb(3,"ion-input",107),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc().$implicit.avatar=e}))("ngModelChange",(function(){p.Ac(n);var e=p.jc().index;return p.jc(2).sendMoreRecipientAvatarChanged(e)})),p.Wb(),p.Wb(),p.Wb()}if(2&e){var a=p.jc(),i=a.$implicit,s=a.index,r=p.jc(2);p.Fb(1),p.pc("ngClass",p.uc(4,q,!r.validSendMoreAvatar(i.avatar,s),r.validSendMoreAvatar(i.avatar,s))),p.Fb(1),p.pc("translateParams",p.tc(7,Y,s+1)),p.Fb(1),p.pc("ngModel",i.avatar)("ngModelOptions",p.sc(9,Q))}}function $(e,t){if(1&e){var n=p.Yb();p.Xb(0,"ion-col",104),p.Xb(1,"ion-item",19),p.Sb(2,"ion-label",108),p.Xb(3,"ion-input",107),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc().$implicit.address=e}))("ngModelChange",(function(){p.Ac(n);var e=p.jc().index;return p.jc(2).sendMoreAddressChanged(e)})),p.Wb(),p.Wb(),p.Wb()}if(2&e){var a=p.jc(),i=a.$implicit,s=a.index,r=p.jc(2);p.Fb(1),p.pc("ngClass",p.uc(4,q,!r.validaddress(i.address),r.validaddress(i.address))),p.Fb(1),p.pc("translateParams",p.tc(7,Y,s+1)),p.Fb(1),p.pc("ngModel",i.address)("ngModelOptions",p.sc(9,Q))}}function z(e,t){if(1&e){var n=p.Yb();p.Xb(0,"ion-item",19),p.Sb(1,"ion-label",109),p.Xb(2,"ion-input",110),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc().$implicit.target.ETP=e}))("ngModelChange",(function(){return p.Ac(n),p.jc(3).quantityETPChanged()})),p.Wb(),p.Wb()}if(2&e){var a=p.jc(),i=a.$implicit,s=a.index,r=p.jc(2);p.pc("ngClass",p.uc(4,q,!r.validQuantity(i.target.ETP),r.validQuantity(i.target.ETP))),p.Fb(1),p.pc("translateParams",p.tc(7,Y,s+1)),p.Fb(1),p.pc("ngModel",i.target.ETP)("ngModelOptions",p.sc(9,Q))}}function H(e,t){if(1&e&&(p.Xb(0,"ion-item",111),p.Ic(1),p.kc(2,"number"),p.Wb()),2&e){var n=p.jc().$implicit,a=p.jc(2);p.Fb(1),p.Lc(" \u2248",a.base," ",p.mc(2,2,a.fiatValue(n.target.ETP),"1.0-2")," ")}}function J(e,t){if(1&e){var n=p.Yb();p.Xb(0,"ion-item",19),p.Sb(1,"ion-label",109),p.Xb(2,"ion-input",110),p.fc("ngModelChange",(function(e){p.Ac(n);var t=p.jc().$implicit,a=p.jc(2);return t.target.MST[a.selectedAsset]=e}))("ngModelChange",(function(){return p.Ac(n),p.jc(3).quantityMSTChanged()})),p.Wb(),p.Wb()}if(2&e){var a=p.jc(),i=a.$implicit,s=a.index,r=p.jc(2);p.pc("ngClass",p.uc(4,q,!r.validQuantity(i.target.MST[r.selectedAsset]),r.validQuantity(i.target.MST[r.selectedAsset]))),p.Fb(1),p.pc("translateParams",p.tc(7,Y,s+1)),p.Fb(1),p.pc("ngModel",i.target.MST[r.selectedAsset])("ngModelOptions",p.sc(9,Q))}}function Z(e,t){if(1&e&&(p.Xb(0,"ion-item",111),p.Ic(1),p.kc(2,"number"),p.Wb()),2&e){var n=p.jc().$implicit,a=p.jc(2);p.Fb(1),p.Lc(" \u2248",a.base," ",p.mc(2,2,a.fiatValue(n.target.MST[a.selectedAsset]),"1.0-2")," ")}}function ee(e,t){if(1&e){var n=p.Yb();p.Xb(0,"ion-card",99),p.Xb(1,"ion-row"),p.Xb(2,"ion-col",100),p.Sb(3,"h3",101),p.Wb(),p.Xb(4,"ion-col",100),p.Xb(5,"ion-button",102),p.fc("click",(function(){p.Ac(n);var e=t.index;return p.jc(2).removeRecipient(e)})),p.Ic(6," X "),p.Wb(),p.Wb(),p.Gc(7,K,4,10,"ion-col",103),p.Gc(8,$,4,10,"ion-col",103),p.Xb(9,"ion-col",104),p.Gc(10,z,3,10,"ion-item",18),p.Gc(11,H,3,5,"ion-item",105),p.Gc(12,J,3,10,"ion-item",18),p.Gc(13,Z,3,5,"ion-item",105),p.Wb(),p.Wb(),p.Wb()}if(2&e){var a=t.$implicit,i=t.index,s=p.jc(2);p.Gb("data-index",i),p.Fb(3),p.pc("translateParams",p.tc(8,Y,i+1)),p.Fb(4),p.pc("ngIf",s.sendToAvatar),p.Fb(1),p.pc("ngIf",!s.sendToAvatar),p.Fb(2),p.pc("ngIf","ETP"==s.selectedAsset),p.Fb(1),p.pc("ngIf",s.tickers&&s.tickers[s.selectedAsset]&&s.tickers[s.selectedAsset][s.base]&&"ETP"==s.selectedAsset),p.Fb(1),p.pc("ngIf","ETP"!=s.selectedAsset&&a.target.MST),p.Fb(1),p.pc("ngIf",s.tickers&&s.tickers[s.selectedAsset]&&s.tickers[s.selectedAsset][s.base]&&"ETP"!=s.selectedAsset&&a.target.MST)}}function te(e,t){if(1&e){var n=p.Yb();p.Xb(0,"ion-button",112),p.fc("click",(function(){return p.Ac(n),p.jc(2).addRecipient()})),p.Sb(1,"ion-icon",113),p.Sb(2,"span",114),p.Wb()}}function ne(e,t){if(1&e){var n=p.Yb();p.Xb(0,"ion-button",115),p.fc("click",(function(){return p.Ac(n),p.jc(2).download()})),p.Sb(1,"ion-icon",116),p.Sb(2,"span",117),p.Wb()}}function ae(e,t){if(1&e){var n=p.Yb();p.Xb(0,"ion-button",118),p.fc("click",(function(){return p.Ac(n),p.jc(2).csvExample()})),p.Sb(1,"ion-icon",116),p.Sb(2,"span",119),p.Wb()}}function ie(e,t){if(1&e&&(p.Xb(0,"span",120),p.Ic(1),p.kc(2,"number"),p.Wb()),2&e){var n=p.jc(2);p.Fb(1),p.Lc(" \u2248",n.base," ",p.mc(2,2,n.fiatValue(n.total_to_send[n.selectedAsset]),"1.0-2")," ")}}function se(e,t){1&e&&p.Sb(0,"ion-item",121)}function re(e,t){if(1&e&&(p.Xb(0,"ion-select-option",53),p.Ic(1),p.kc(2,"format"),p.Wb()),2&e){var n=p.jc().$implicit,a=p.jc(2);p.qc("value",n.address),p.Fb(1),p.Mc(" ",n.identifier," - ",p.mc(2,4,n.balance,a.decimals)," ",a.selectedAsset,"")}}function ce(e,t){if(1&e&&(p.Vb(0),p.Gc(1,re,3,7,"ion-select-option",52),p.Ub()),2&e){var n=t.$implicit;p.Fb(1),p.pc("ngIf",n.balance>0)}}function oe(e,t){1&e&&p.Sb(0,"ion-item",128)}function le(e,t){if(1&e&&(p.Xb(0,"ion-select-option",53),p.Ic(1),p.Wb()),2&e){var n=t.$implicit;p.qc("value",n),p.Fb(1),p.Kc("",n," ")}}function de(e,t){if(1&e){var n=p.Yb();p.Xb(0,"ion-item",15),p.Sb(1,"ion-label",71),p.Xb(2,"ion-toggle",72),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc(3).lock=e})),p.Wb(),p.Wb()}if(2&e){var a=p.jc(3);p.Fb(2),p.pc("ngModel",a.lock)}}function ue(e,t){if(1&e){var n=p.Yb();p.Xb(0,"app-attenuation-model-selector",129),p.fc("modelChanged",(function(e){return p.Ac(n),p.jc(3).setAttenuationModel(e)})),p.Wb()}if(2&e){var a=p.jc(3);p.pc("quantity",void 0)("decimals",a.decimals)("asset",a.selectedAsset)("toMany",!0)}}function be(e,t){if(1&e){var n=p.Yb();p.Xb(0,"div"),p.Xb(1,"ion-item",19),p.Sb(2,"ion-label",122),p.Xb(3,"ion-input",61),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc(2).message=e})),p.Wb(),p.Wb(),p.Sb(4,"div",123),p.Gc(5,oe,1,0,"ion-item",124),p.Sb(6,"br"),p.Xb(7,"ion-item"),p.Sb(8,"ion-label",125),p.Xb(9,"ion-select",65),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc(2).changeAddress=e})),p.kc(10,"translate"),p.kc(11,"translate"),p.Sb(12,"ion-select-option",126),p.Gc(13,le,2,2,"ion-select-option",67),p.Wb(),p.Wb(),p.Sb(14,"br"),p.Gc(15,de,3,1,"ion-item",68),p.Gc(16,ue,1,4,"app-attenuation-model-selector",127),p.Wb()}if(2&e){var a=p.jc(2);p.Fb(1),p.pc("ngClass",p.uc(14,q,!a.validMessageLength(a.message),a.message.length>0&&a.validMessageLength(a.message))),p.Fb(2),p.pc("ngModel",a.message)("disabled",a.disableParams&&a.params.message),p.Fb(2),p.pc("ngIf",!a.validMessageLength(a.message)),p.Fb(4),p.qc("okText",p.lc(10,10,"OK")),p.qc("cancelText",p.lc(11,12,"CANCEL")),p.pc("ngModel",a.changeAddress),p.Fb(4),p.pc("ngForOf",a.addresses),p.Fb(2),p.pc("ngIf","ETP"!=a.selectedAsset),p.Fb(1),p.pc("ngIf",a.lock)}}function pe(e,t){if(1&e){var n=p.Yb();p.Xb(0,"form",74,14),p.fc("ngSubmit",(function(){return p.Ac(n),p.jc().send()}))("keyup.enter",(function(){return p.Ac(n),p.jc().send()})),p.Xb(2,"ion-list",75),p.Xb(3,"ion-item",15),p.Sb(4,"ion-label",76),p.Xb(5,"ion-toggle",77),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc().sendToAvatar=e})),p.Wb(),p.Wb(),p.Gc(6,U,6,0,"div",78),p.Gc(7,ee,14,10,"ion-card",79),p.Xb(8,"div",80),p.Gc(9,te,3,0,"ion-button",81),p.Gc(10,ne,3,0,"ion-button",82),p.Gc(11,ae,3,0,"ion-button",83),p.Wb(),p.Xb(12,"ion-item",19),p.Xb(13,"ion-label",84),p.Sb(14,"span",85),p.Xb(15,"p",86),p.Ic(16),p.Gc(17,ie,3,5,"span",87),p.Wb(),p.Wb(),p.Wb(),p.Gc(18,se,1,0,"ion-item",88),p.Sb(19,"br"),p.Xb(20,"ion-item",19),p.Sb(21,"ion-label",89),p.Xb(22,"ion-select",31),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc().sendFrom=e}))("ngModelChange",(function(){return p.Ac(n),p.jc().onFromAddressChange()})),p.kc(23,"translate"),p.kc(24,"translate"),p.Sb(25,"ion-select-option",90),p.Gc(26,ce,2,1,"ng-container",33),p.Wb(),p.Wb(),p.Xb(27,"ion-item",15),p.Sb(28,"ion-label",91),p.Xb(29,"ion-toggle",36),p.fc("ngModelChange",(function(e){return p.Ac(n),p.jc().showAdvanced=e})),p.Wb(),p.Wb(),p.Gc(30,be,17,17,"div",6),p.Wb(),p.Xb(31,"ion-row",37),p.Xb(32,"ion-col"),p.Xb(33,"ion-button",38),p.fc("click",(function(){return p.Ac(n),p.jc().cancel()})),p.Sb(34,"ion-icon",39),p.Sb(35,"span",92),p.Wb(),p.Wb(),p.Xb(36,"ion-col"),p.Xb(37,"ion-button",41),p.Sb(38,"ion-icon",42),p.Sb(39,"span",93),p.Wb(),p.Wb(),p.Wb(),p.Wb()}if(2&e){var a=p.jc();p.Fb(5),p.pc("ngModel",a.sendToAvatar),p.Fb(1),p.pc("ngIf",!a.platform.is("mobile")),p.Fb(1),p.pc("ngForOf",a.recipients),p.Fb(2),p.pc("ngIf",a.recipients.length<a.sendMore_limit),p.Fb(1),p.pc("ngIf",!a.platform.is("mobile")),p.Fb(1),p.pc("ngIf",!a.platform.is("mobile")),p.Fb(1),p.pc("ngClass",p.tc(23,O,!a.validSendMoreTotalQuantity())),p.Fb(4),p.Lc(" ",a.total_to_send[a.selectedAsset]," ",a.selectedAsset," "),p.Fb(1),p.pc("ngIf",a.tickers&&a.tickers[a.selectedAsset]&&a.tickers[a.selectedAsset][a.base]&&a.total_to_send[a.selectedAsset]),p.Fb(1),p.pc("ngIf",!a.validSendMoreTotalQuantity()),p.Fb(2),p.pc("ngClass",p.tc(25,O,!a.validFromAddress(a.sendFrom))),p.Fb(2),p.qc("okText",p.lc(23,19,"OK")),p.qc("cancelText",p.lc(24,21,"CANCEL")),p.pc("ngModel",a.sendFrom),p.Fb(4),p.pc("ngForOf",a.addressbalances),p.Fb(3),p.pc("ngModel",a.showAdvanced),p.Fb(1),p.pc("ngIf",a.showAdvanced),p.Fb(7),p.pc("disabled",!a.validForm())}}var fe,ge,he,me=function e(t,n,a,i){s(this,e),this.address=t,this.avatar=n,this.target=a,this.attenuation_model=i},ve=/^.*app\.myetpwallet\.com\/account\/send\/(.+)\?(.*)$/,Ae=[{path:":symbol",component:(fe=function(){function t(e,n,a,i,r,c,o,l,d){var u=this;s(this,t),this.metaverseService=e,this.platform=n,this.alertService=a,this.appService=i,this.activatedRoute=r,this.location=c,this.router=o,this.walletService=l,this.modalCtrl=d,this.quantity="",this.sendFrom="auto",this.feeAddress="auto",this.transfer_type="one",this.recipients=[],this.total_to_send={},this.sendMoreValidQuantity=!1,this.sendMoreValidAddress=!1,this.sendMore_limit=1e3,this.message="",this.sendMoreValidEachAvatar=[],this.lock=!1,this.showAdvanced=!1,this.addressbalancesObject={},this.tickers={},this.disableParams=!1,this.params={amount:!1,recipient_address:!1,recipient_avatar:!1,message:!1},this.sendToAvatar=!1,this.validQuantity=function(e){return void 0!==e&&u.countDecimals(e)<=u.decimals&&e>0&&("ETP"===u.selectedAsset&&u.showBalance>=Math.round(parseFloat(e)*Math.pow(10,u.decimals))+u.fee||"ETP"!==u.selectedAsset&&u.showBalance>=parseFloat(e)*Math.pow(10,u.decimals))},this.fiatValue=function(e){return parseFloat(e)*u.tickers[u.selectedAsset][u.base].price||0},this.validAvatar=function(e){return/[A-Za-z0-9.-]/.test(e)&&u.recipient_avatar_valid},this.validFromAddress=function(e){return"auto"===e||u.addressbalancesObject[e]&&0!==u.addressbalancesObject[e].ETP.available},this.validSendMoreAvatar=function(e,t){return/[A-Za-z0-9.-]/.test(e)&&u.sendMoreValidEachAvatar[t]},this.validSendMoreTotalQuantity=function(){return u.total+1e4*u.recipients.length<=u.showBalance},this.validForm=function(){return"one"===u.transfer_type&&u.validaddress(u.recipient_address)&&u.validQuantity(u.quantity)&&u.validMessageLength(u.message)&&(!u.lock||u.attenuation_model)&&u.validFromAddress(u.sendFrom)||"more"===u.transfer_type&&u.sendMoreValidQuantity&&u.sendMoreValidAddress&&u.validSendMoreTotalQuantity()&&u.validMessageLength(u.message)&&u.validFromAddress(u.sendFrom)},this.recipientChanged=function(){u.recipient_address&&(u.recipient_address=u.recipient_address.trim())},this.recipientAvatarChanged=function(){u.recipient_avatar&&(u.recipient_avatar=u.recipient_avatar.trim(),Promise.all([u.metaverseService.getGlobalAvatar(u.recipient_avatar),u.recipient_avatar]).then((function(e){if(u.recipient_avatar!==e[1])throw new Error("");u.recipient_avatar_valid=!0,u.recipient_address=e[0].address})).catch((function(e){u.recipient_avatar_valid=!1,u.recipient_address=""})))},this.sendMoreRecipientAvatarChanged=function(e){u.recipients[e]&&u.recipients[e].avatar&&(u.recipients[e].avatar=u.recipients[e].avatar.trim()),Promise.all([u.metaverseService.getGlobalAvatar(u.recipients[e].avatar),u.recipients[e].avatar]).then((function(t){if(u.recipients[e].avatar!==t[1])throw new Error("");u.sendMoreValidEachAvatar[e]=!0,u.recipients[e].address=t[0].address,u.checkSendMoreAddress()})).catch((function(t){u.sendMoreValidEachAvatar[e]=!1,u.recipients[e].address="",u.sendMoreValidAddress=!1}))},this.quantityETPChanged=function(){var e=0;u.recipients&&u.recipients.forEach((function(t){return e=t.target.ETP?e+parseFloat(t.target.ETP):e})),u.total_to_send[u.selectedAsset]=+e.toFixed(u.decimals),u.total=u.total_to_send[u.selectedAsset]*Math.pow(10,u.decimals),u.checkEtpSendMoreQuantity()},this.quantityMSTChanged=function(){var e=0;u.recipients&&u.recipients.forEach((function(t){return e=t.target.MST[u.selectedAsset]?e+parseFloat(t.target.MST[u.selectedAsset]):e})),u.total_to_send[u.selectedAsset]=+e.toFixed(u.decimals),u.total=u.total_to_send[u.selectedAsset]*Math.pow(10,u.decimals),u.checkMstSendMoreQuantity()},this.checkEtpSendMoreQuantity=function(){var e=!0;u.recipients.forEach((function(t){(!t.target||!t.target.ETP||t.target.ETP<=0||u.countDecimals(t.target.ETP)>u.decimals)&&(e=!1)})),u.sendMoreValidQuantity=e},this.checkMstSendMoreQuantity=function(){var e=!0;u.recipients.forEach((function(t){(!t.target||!t.target.MST||!t.target.MST[u.selectedAsset]||t.target.MST[u.selectedAsset]<=0||u.countDecimals(t.target.MST[u.selectedAsset])>u.decimals)&&(e=!1)})),u.sendMoreValidQuantity=e},this.checkSendMoreAddress=function(){var e=!0;u.recipients.forEach((function(t){t.address&&u.metaverseService.validAddress(t.address)||(e=!1)})),u.sendMoreValidAddress=e},this.validMessageLength=function(e){return u.metaverseService.verifyMessageSize(e)<253},this.setAttenuationModel=function(e){u.attenuation_model=e.attenuation_model,u.locktime=e.locktime}}return i(t,[{key:"ngOnInit",value:function(){}},{key:"initializeParameters",value:function(e,t){this.selectedAsset!==e?this.alertService.showErrorTranslated("SCAN.DIFFERENT_ASSET.TITLE","SCAN.DIFFERENT_ASSET.SUBTITLE"):(this.quantity=t.q||t.quantity||t.amount||"",this.recipient_address=t.r||t.recipient||"",this.recipient_avatar=t.a||t.avatar||"",this.message=t.m||t.message||"",this.disableParams="true"===t.d||"true"===t.disableParams,history.state.data&&(this.quantity=history.state.data.quantity||this.quantity,this.recipient_address=history.state.data.recipient||this.recipient_address,this.recipient_avatar=history.state.data.avatar||this.recipient_avatar,this.message=history.state.data.message||this.message),""!==this.recipient_avatar&&(this.sendToAvatar=!0,this.recipientAvatarChanged()),this.params.amount=""!==this.quantity,this.params.recipient_address=""!==this.recipient_address,this.params.recipient_avatar=""!==this.recipient_avatar,this.params.message=""!==this.message)}},{key:"ionViewWillEnter",value:function(){var t=this;this.selectedAsset=this.activatedRoute.snapshot.params.symbol,this.quantity="",this.addressbalances=[],this.sendFrom="auto",this.feeAddress="auto",this.transfer_type="one",this.recipients=[],this.total_to_send={},this.total_to_send[this.selectedAsset]=0,this.sendMoreValidQuantity=!1,this.sendMoreValidAddress=!1,this.sendMore_limit=1e3,this.total=0,this.message="",this.sendMoreValidEachAvatar=[],this.lock=!1,this.isMobile=this.walletService.isMobile(),this.showAdvanced=!1,this.addressbalancesObject={},this.tickers={},this.disableParams=!1,this.params={amount:!1,recipient_address:!1,recipient_avatar:!1,message:!1},this.initializeParameters(this.selectedAsset,this.activatedRoute.snapshot.queryParams),this.recipients.push(new me("","","ETP"===this.selectedAsset?{ETP:void 0}:{MST:n({},this.selectedAsset,void 0)},void 0)),Promise.all([this.metaverseService.getBalances(),this.metaverseService.getAddresses(),this.metaverseService.getAddressBalances()]).then((function(n){var a=e(n,3),i=a[0],s=a[1],r=a[2],c="ETP"===t.selectedAsset?i.ETP:i.MST[t.selectedAsset];t.balance=c&&c.available?c.available:0,t.decimals=c.decimals,t.etpBalance=i.ETP.available,t.showBalance=t.balance,t.addresses=s,t.addressbalancesObject=r;var o=[];Object.keys(s).forEach((function(e){var n=s[e];o.push(r[n]?{address:n,avatar:r[n].AVATAR?r[n].AVATAR:"",identifier:r[n].AVATAR?r[n].AVATAR:n,balance:"ETP"===t.selectedAsset?r[n].ETP.available:r[n].MST[t.selectedAsset]?r[n].MST[t.selectedAsset].available:0}:{address:n,avatar:"",identifier:n,balance:0})})),t.addressbalances=o,history.state.data&&history.state.data.sender&&t.addressbalances.forEach((function(e){e.address===history.state.data.sender&&0!==e.balance&&(t.sendFrom=history.state.data.sender,t.onFromAddressChange())}))})),this.fee=this.appService.default_fees.default,this.defaultFee=this.fee,this.metaverseService.getFees().then((function(e){t.fee=e.default,t.defaultFee=t.fee}))}},{key:"ionViewDidEnter",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.metaverseService.getAddresses();case 2:t=e.sent,Array.isArray(t)&&t.length?this.loadTickers():this.router.navigate(["login"]);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"loadTickers",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.metaverseService.getBaseAndTickers();case 2:n=t.sent,a=e(n,2),this.base=a[0],this.tickers=a[1];case 6:case"end":return t.stop()}}),t,this)})))}},{key:"onFromAddressChange",value:function(){var e=this;"auto"===this.sendFrom?this.showBalance=this.balance:this.addressbalances.length&&this.addressbalances.forEach((function(t){t.address===e.sendFrom&&(e.showBalance=t.balance)}))}},{key:"countDecimals",value:function(e){return e&&Math.floor(e)!==e&&e.toString().split(".").length>1&&e.toString().split(".")[1].length||0}},{key:"cancel",value:function(){this.location.back()}},{key:"create",value:function(){var e=this;return this.alertService.showLoading().then((function(){var t=[];switch(e.message&&t.push(e.message),e.transfer_type){case"one":return e.lock?e.metaverseService.createAssetDepositTx(e.recipient_address,e.recipient_avatar&&e.recipient_avatar_valid?e.recipient_avatar:void 0,e.selectedAsset,Math.round(parseFloat(e.quantity)*Math.pow(10,e.decimals)),e.showAdvanced&&e.lock?e.attenuation_model:void 0,"auto"!==e.sendFrom?e.sendFrom:null,e.showAdvanced&&"auto"!==e.changeAddress?e.changeAddress:void 0,e.showAdvanced?e.fee:e.defaultFee,e.showAdvanced&&t!==[]?t:void 0):e.metaverseService.createSendTx(e.selectedAsset,e.recipient_address,e.recipient_avatar&&e.recipient_avatar_valid?e.recipient_avatar:void 0,Math.round(parseFloat(e.quantity)*Math.pow(10,e.decimals)),"auto"!==e.sendFrom?e.sendFrom:null,e.showAdvanced&&"auto"!==e.changeAddress?e.changeAddress:void 0,e.showAdvanced?e.fee:e.defaultFee,(e.showAdvanced||e.params.message)&&t!==[]?t:void 0);case"more":var n={},a=JSON.parse(JSON.stringify(e.recipients));return n[e.selectedAsset]=Math.round(parseFloat(e.total_to_send[e.selectedAsset])*Math.pow(10,e.decimals)),a.forEach((function(t){if("ETP"===e.selectedAsset)t.target.ETP=Math.round(parseFloat(t.target.ETP)*Math.pow(10,e.decimals));else{var n=Math.round(parseFloat(t.target.MST[e.selectedAsset])*Math.pow(10,e.decimals));t.target.MST[e.selectedAsset]=n,e.showAdvanced&&e.lock&&e.attenuation_model&&(t.attenuation_model=e.attenuation_model+";LQ="+n)}})),e.metaverseService.createSendMoreTx(n,a,"auto"!==e.sendFrom?e.sendFrom:null,e.showAdvanced&&"auto"!==e.changeAddress?e.changeAddress:void 0,e.showAdvanced&&t!==[]?t:void 0);default:return e.alertService.stopLoading(),e.alertService.showError("MESSAGE.UNKNOWN_TX_TYPE",""),0}})).catch((function(t){throw console.error(t.message),e.alertService.stopLoading(),Error(t)}))}},{key:"send",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.validForm()){e.next=18;break}return e.prev=1,e.next=4,this.create();case 4:t=e.sent.encode().toString("hex"),this.router.navigate(["account","confirm"],{state:{data:{tx:t}}}),this.alertService.stopLoading(),e.next=18;break;case 8:e.prev=8,e.t0=e.catch(1),e.t1=(console.error(e.t0),this.alertService.stopLoading(),e.t0.message),e.next="ERR_INSUFFICIENT_BALANCE"===e.t1?13:"ERR_TOO_MANY_INPUTS"===e.t1?15:17;break;case 13:return this.alertService.showError("SEND.MESSAGE.INSUFFICIENT_BALANCE",""),e.abrupt("break",18);case 15:return this.alertService.showErrorTranslated("SEND.MESSAGE.ERROR_TOO_MANY_INPUTS","SEND.MESSAGE.ERROR_TOO_MANY_INPUTS_TEXT"),e.abrupt("break",18);case 17:this.alertService.showError("SEND.MESSAGE.CREATE_TRANSACTION",e.t0.message);case 18:case"end":return e.stop()}}),e,this,[[1,8]])})))}},{key:"sendAll",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertService.alertConfirm("SEND_SINGLE.ALL.TITLE","SEND_SINGLE.ALL.SUBTITLE","SEND_SINGLE.ALL.CANCEL","SEND_SINGLE.ALL.OK");case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}this.quantity="ETP"===this.selectedAsset?parseFloat((this.showBalance/1e8-this.fee/1e8).toFixed(this.decimals)+"")+"":parseFloat((this.showBalance/Math.pow(10,this.decimals)).toFixed(this.decimals)+"")+"",this.quantityInput.setFocus();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"scan",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:b.a,showBackdrop:!1,backdropDismiss:!1});case 2:return(t=e.sent).onWillDismiss().then((function(e){if(e.data&&e.data.text){var a=e.data.text.toString();if(ve.test(a)){var i=a.match(ve)[1],s=a.match(ve)[2].split("&"),r={};s.forEach((function(e){var t=e.split("=");r[t[0]]=t[1]})),n.initializeParameters(i,r)}else{var c=a.toString().split("&");n.metaverseService.validAddress(c[0])?(n.recipient_address=c[0],n.recipientAddressInput.setFocus()):n.alertService.showMessage("SCAN.INVALID_ADDRESS.TITLE","SCAN.INVALID_ADDRESS.SUBTITLE","")}}t.remove()})),e.next=6,t.present();case 6:case"end":return e.stop()}}),e,this)})))}},{key:"addRecipient",value:function(){this.sendMoreValidQuantity=!1,this.sendMoreValidAddress=!1,this.recipients.push(new me("","","ETP"===this.selectedAsset?{ETP:void 0}:{MST:n({},this.selectedAsset,void 0)},void 0))}},{key:"removeRecipient",value:function(e){this.recipients.splice(e,1),this.sendMoreValidEachAvatar.splice(e,1),"ETP"===this.selectedAsset?this.quantityETPChanged():this.quantityMSTChanged(),this.checkSendMoreAddress()}},{key:"sendMoreAddressChanged",value:function(e){this.recipients[e]&&this.recipients[e].address&&(this.recipients[e].address=this.recipients[e].address.trim(),this.recipients[e].avatar=""),this.checkSendMoreAddress()}},{key:"import",value:function(e){var t=this;this.alertService.showLoading().then((function(){setTimeout((function(){t.open(e)}),500)}))}},{key:"open",value:function(e){var t=this,a=e.target.files,i=new FileReader,s=0;i.onload=function(e){var a=e.target.result;try{var i=a.split("\n");t.recipients=[];var r={};i[0].split(",").forEach((function(e,t){return r[e]=t}));for(var c=1;c<t.sendMore_limit;c++)if(i[c]){var o=i[c].split(","),l=o[r.recipient]?o[r.recipient].trim():o[r.recipient],d=o[r.amount]?o[r.amount].trim():o[r.amount];if("ETP"===t.selectedAsset)t.validaddress(l)?t.recipients.push(new me(l,"",{ETP:d},void 0)):(t.recipients.push(new me("",l,{ETP:d},void 0)),t.sendMoreRecipientAvatarChanged(c-1));else{var u=void 0;if(r.lock_blocks&&o[r.lock_blocks]){if(r.lock_model&&o[r.lock_model])throw s=c+1,Error("ERR_TWO_LOCK_MODEL");var b=Math.round(parseFloat(d)*Math.pow(10,t.decimals)),p=o[r.lock_blocks];u="PN=0;LH="+p+";TYPE=1;LP="+p+";UN=1;LQ="+b}else r.lock_model&&o[r.lock_model]&&(u=o[r.lock_model]);t.validaddress(l)?t.recipients.push(new me(l,"",{MST:n({},t.selectedAsset,d)},u)):(t.recipients.push(new me("",l,{MST:n({},t.selectedAsset,d)},u)),t.sendMoreRecipientAvatarChanged(c-1))}}i.length>t.sendMore_limit&&t.alertService.showLimitReached("MESSAGE.SEND_MORE_IMPORT_CSV_TOO_MANY_RECIPIENT_TITLE","MESSAGE.SEND_MORE_IMPORT_CSV_TOO_MANY_RECIPIENT_BODY",t.sendMore_limit),"ETP"===t.selectedAsset?t.quantityETPChanged():t.quantityMSTChanged(),t.checkSendMoreAddress(),t.alertService.stopLoading()}catch(f){switch(t.alertService.stopLoading(),console.error(f.message),f.message){case"ERR_TWO_LOCK_MODEL":throw t.alertService.showError("ERROR_TWO_LOCK_MODEL",s),Error("ERR_IMPORT_CSV");default:throw t.alertService.showMessage("WRONG_FILE","","SEND_MORE.WRONG_FILE"),Error("ERR_IMPORT_CSV")}}},a[0]&&i.readAsText(a[0])}},{key:"download",value:function(){var e=this,t="",n="recipient,amount";this.showAdvanced&&this.lock&&this.attenuation_model&&(n+=",lock_blocks"),t+=n+="\n",this.recipients.forEach((function(n){var a=n.address+",";n.target.ETP?a+=n.target.ETP:n.target.MST&&n.target.MST[e.selectedAsset]&&(a+=n.target.MST[e.selectedAsset]),e.showAdvanced&&e.lock&&e.attenuation_model&&(a+=","+e.locktime),t+=a+="\n"})),this.downloadFile("recipients.csv",t)}},{key:"csvExample",value:function(){this.downloadFile("mvs_example.csv","recipient,amount,lock_blocks,lock_model\nMAwLwVGwJyFsTBfNj2j5nCUrQXGVRvHzPh,2,10,\nMEWdqvhETJex22kBbYDSD999Vs4xFwQ4fo,2,,PN=0;LH=20;TYPE=1;LP=20;UN=1;LQ=2\navatar-name,4")}},{key:"downloadFile",value:function(e,t){var n=document.createElement("a");if(n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),n.dispatchEvent(a)}else n.click()}},{key:"validaddress",value:function(e){return this.metaverseService.validAddress(e)}}]),t}(),fe.\u0275fac=function(e){return new(e||fe)(p.Rb(f.a),p.Rb(l.eb),p.Rb(g.a),p.Rb(h.a),p.Rb(d.a),p.Rb(c.i),p.Rb(d.h),p.Rb(m.a),p.Rb(l.bb))},fe.\u0275cmp=p.Lb({type:fe,selectors:[["app-send"]],viewQuery:function(e,t){var n;1&e&&(p.Nc(S,!0),p.Nc(M,!0)),2&e&&(p.xc(n=p.gc())&&(t.recipientAddressInput=n.first),p.xc(n=p.gc())&&(t.quantityInput=n.first))},decls:27,vars:19,consts:[["slot","start"],["lines","none"],["color","primary",3,"ngModel","ngModelChange"],["value","one","translate","SEND.SEND_SINGLE"],["value","more","translate","SEND.SEND_MANY"],[1,"available"],[4,"ngIf"],["class","right",4,"ngIf"],["align","center","class","wrong-input","translate","SEND.NOTICE_TRANSACTION_FEE_UNCOVERED",4,"ngIf"],[3,"ngSubmit","keyup.enter",4,"ngIf"],["style","padding-bottom: 0;",3,"ngSubmit","keyup.enter",4,"ngIf"],[1,"right"],["align","center","translate","SEND.NOTICE_TRANSACTION_FEE_UNCOVERED",1,"wrong-input"],[3,"ngSubmit","keyup.enter"],["sendForm","ngForm"],[1,"toggle-input"],["translate","SEND_SINGLE.TO_AVATAR"],["name","sendToAvatar",3,"ngModel","disabled","ngModelChange"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["color","primary","position","floating","translate","SEND_SINGLE.RECIPIENT_ADDRESS"],["name","recipient_address","required","",3,"ngModel","disabled","ngModelChange"],["recipientAddressInput",""],["slot","end","class","scanButton",3,"click",4,"ngIf"],["color","primary","position","floating","translate","SEND_SINGLE.AMOUNT"],["name","quantity","type","number","min","0","required","",3,"ngModel","disabled","ngModelChange"],["quantityInput",""],["slot","end","type","button","fill","outline","shape","round","id","sendAll","translate","SEND_SINGLE.BUTTON.SEND_ALL",3,"click",4,"ngIf"],["class","advice",4,"ngIf"],["lines","none","class","wrong-input","translate","SEND.TOO_MANY_DECIMALS",4,"ngIf"],["translate","SEND_SINGLE.SEND_FROM"],["name","sendfrom","multiple","false",3,"ngModel","okText","cancelText","ngModelChange"],["selected","true","value","auto","translate","SEND_SINGLE.SEND_FROM_AUTO"],[4,"ngFor","ngForOf"],["lines","none","class","wrong-input","translate","SEND_SINGLE.FROM_ADDRESS_NO_ETP",4,"ngIf"],["translate","SEND_SINGLE.SHOW_ADVANCED"],["name","showAdvanced","checked","false",3,"ngModel","ngModelChange"],[1,"padding-bottom"],["color","danger","expand","full","fill","outline","shape","round",3,"click"],["slot","start","name","close"],["translate","SEND_SINGLE.BUTTON.CANCEL"],["type","submit","expand","full","color","primary","fill","outline","shape","round",3,"disabled"],["slot","start","disabled","checked","name","cog"],["translate","SEND_SINGLE.BUTTON.NEXT"],["color","primary","position","floating","translate","SEND_SINGLE.RECIPIENT_AVATAR"],["name","recipient_avatar","required","",3,"ngModel","disabled","ngModelChange"],["recipientAvatarInput",""],["slot","end",1,"scanButton",3,"click"],["slot","icon-only","name","qr-code"],["slot","end","type","button","fill","outline","shape","round","id","sendAll","translate","SEND_SINGLE.BUTTON.SEND_ALL",3,"click"],[1,"advice"],["lines","none","translate","SEND.TOO_MANY_DECIMALS",1,"wrong-input"],[3,"value",4,"ngIf"],[3,"value"],["lines","none","translate","SEND_SINGLE.FROM_ADDRESS_NO_ETP",1,"wrong-input"],["color","primary","translate","SEND_SINGLE.FEE"],["item-end","","color","primary"],["min","10000","max","10000000","step","10000","color","primary","name","fee",3,"ngModel","ngModelChange"],["range-left",""],["range-right",""],["position","floating","translate","SEND_SINGLE.MESSAGE"],["name","message",3,"ngModel","disabled","ngModelChange"],["translate","SEND_SINGLE.HELP.MESSAGE",1,"advice"],["lines","none","class","wrong-input","translate","SEND_SINGLE.MESSAGE_TOO_LONG",4,"ngIf"],["translate","SEND_SINGLE.CHANGE_ADDRESS"],["name","changeaddress",3,"ngModel","okText","cancelText","ngModelChange"],["selected","true","value","auto","translate","SEND_SINGLE.CHANGE_ADDRESS_AUTO"],[3,"value",4,"ngFor","ngForOf"],["class","toggle-input",4,"ngIf"],[3,"quantity","decimals","asset","modelChanged",4,"ngIf"],["lines","none","translate","SEND_SINGLE.MESSAGE_TOO_LONG",1,"wrong-input"],["translate","ASSET_LOCK.TITLE"],["name","lock",3,"ngModel","ngModelChange"],[3,"quantity","decimals","asset","modelChanged"],[2,"padding-bottom","0",3,"ngSubmit","keyup.enter"],[2,"padding-bottom","0"],["translate","SEND_MORE.TO_AVATAR"],["name","sendToAvatar","checked","false",3,"ngModel","ngModelChange"],["class","right-buttons",4,"ngIf"],["class","card-block",4,"ngFor","ngForOf"],[1,"right-buttons"],["fill","outline","shape","round","color","primary",3,"click",4,"ngIf"],["fill","outline","shape","round","color","secondary",3,"click",4,"ngIf"],["fill","outline","shape","round","color","success",3,"click",4,"ngIf"],["color","primary"],["translate","SEND_MORE.TOTAL_TO_SEND"],[1,"total-amount"],["class","fiat",4,"ngIf"],["lines","none","class","wrong-input","translate","SEND_MORE.TOTAL_MORE_AVAILABLE",4,"ngIf"],["translate","SEND_MORE.SEND_FROM"],["selected","true","value","auto","translate","SEND_MORE.SEND_FROM_AUTO"],["translate","SEND_MORE.SHOW_ADVANCED"],["translate","SEND_MORE.BUTTON.CANCEL"],["translate","SEND_MORE.BUTTON.NEXT"],["fill","outline","shape","round",3,"click"],["slot","start","name","document"],["translate","SEND_MORE.BUTTON.IMPORT_FROM_CSV"],["name","file","type","file","id","file","accept",".csv",1,"ion-hide",3,"change"],["f",""],[1,"card-block"],["size","6"],["translate","SEND_MORE.RECIPIENT_TITLE",1,"recipient-title",3,"translateParams"],["tabIndex","-1","fill","clear","color","primary",1,"remove-button",3,"click"],["size","12","size-md","6",4,"ngIf"],["size","12","size-md","6"],["lines","none","class","fiat",4,"ngIf"],["color","primary","position","floating","translate","SEND_MORE.RECIPIENT_AVATAR",3,"translateParams"],["required","",3,"ngModel","ngModelOptions","ngModelChange"],["color","primary","position","floating","translate","SEND_MORE.RECIPIENT_ADDRESS",3,"translateParams"],["color","primary","position","floating","translate","SEND_MORE.AMOUNT",3,"translateParams"],["type","number","min","0","required","",3,"ngModel","ngModelOptions","ngModelChange"],["lines","none",1,"fiat"],["fill","outline","shape","round","color","primary",3,"click"],["slot","start","name","add"],["translate","SEND_MORE.BUTTON.ADD_RECIPIENT"],["fill","outline","shape","round","color","secondary",3,"click"],["slot","start","name","download"],["translate","SEND_MORE.BUTTON.EXPORT_CSV"],["fill","outline","shape","round","color","success",3,"click"],["translate","SEND_MORE.BUTTON.DOWNLOAD_CSV_EXAMPLE"],[1,"fiat"],["lines","none","translate","SEND_MORE.TOTAL_MORE_AVAILABLE",1,"wrong-input"],["position","floating","translate","SEND_MORE.MESSAGE"],["lines","none","translate","SEND_MORE.HELP.MESSAGE",1,"advice"],["lines","none","class","wrong-input","translate","SEND_MORE.MESSAGE_TOO_LONG",4,"ngIf"],["translate","SEND_MORE.CHANGE_ADDRESS"],["selected","true","value","auto","translate","SEND_MORE.CHANGE_ADDRESS_AUTO"],[3,"quantity","decimals","asset","toMany","modelChanged",4,"ngIf"],["lines","none","translate","SEND_MORE.MESSAGE_TOO_LONG",1,"wrong-input"],[3,"quantity","decimals","asset","toMany","modelChanged"]],template:function(e,t){1&e&&(p.Xb(0,"ion-header"),p.Xb(1,"ion-toolbar"),p.Xb(2,"ion-buttons",0),p.Sb(3,"ion-back-button"),p.Wb(),p.Xb(4,"ion-title"),p.Ic(5),p.kc(6,"translate"),p.Wb(),p.Wb(),p.Wb(),p.Xb(7,"ion-content"),p.Xb(8,"ion-item",1),p.Xb(9,"ion-segment",2),p.fc("ngModelChange",(function(e){return t.transfer_type=e})),p.Sb(10,"ion-segment-button",3),p.Sb(11,"ion-segment-button",4),p.Wb(),p.Wb(),p.Sb(12,"br"),p.Xb(13,"ion-row"),p.Xb(14,"ion-col"),p.Xb(15,"p",5),p.Ic(16),p.kc(17,"translate"),p.Gc(18,_,1,0,"br",6),p.Ic(19),p.kc(20,"format"),p.Wb(),p.Wb(),p.Xb(21,"ion-col"),p.Gc(22,F,6,8,"p",7),p.Gc(23,y,6,8,"p",7),p.Wb(),p.Wb(),p.Gc(24,I,1,0,"p",8),p.Gc(25,B,42,34,"form",9),p.Gc(26,pe,40,27,"form",10),p.Wb()),2&e&&(p.Fb(5),p.Lc("",t.selectedAsset," ",p.lc(6,12,"SEND.TITLE"),""),p.Fb(4),p.pc("ngModel",t.transfer_type),p.Fb(7),p.Kc("",p.lc(17,14,"SEND.AVAILABLE_BALANCE"),": "),p.Fb(2),p.pc("ngIf",t.platform.is("mobile")),p.Fb(1),p.Lc("",p.mc(20,16,t.showBalance,t.decimals)," ",t.selectedAsset,""),p.Fb(3),p.pc("ngIf","one"==t.transfer_type),p.Fb(1),p.pc("ngIf","more"==t.transfer_type),p.Fb(1),p.pc("ngIf",t.etpBalance<t.fee/1e8),p.Fb(1),p.pc("ngIf","one"==t.transfer_type),p.Fb(1),p.pc("ngIf","more"==t.transfer_type))},directives:[l.u,l.X,l.j,l.f,l.g,l.V,l.r,l.x,l.L,l.gb,o.i,o.l,l.M,v.a,l.K,l.q,c.m,o.p,o.j,o.k,l.A,l.z,l.W,l.c,c.k,l.w,l.hb,o.n,l.db,l.N,l.O,c.l,l.i,l.v,l.h,l.G,A.a,l.k],pipes:[v.d,E.a,c.f],styles:["#scanButton[_ngcontent-%COMP%]{width:34px}#scanButton[_ngcontent-%COMP%], #sendAll[_ngcontent-%COMP%]{height:34px;margin-top:20px}.right-buttons[_ngcontent-%COMP%]{text-align:right;width:100%}.list-md[_ngcontent-%COMP%]   .item-input[_ngcontent-%COMP%]:last-child{border-bottom:0;box-shadow:inset 0 0 0 0!important}.total-amount[_ngcontent-%COMP%]{display:inline}.fiat[_ngcontent-%COMP%]{color:#949494!important}.recipient-title[_ngcontent-%COMP%]{padding-left:16px;padding-top:0}.card-block[_ngcontent-%COMP%]{padding:10px}.remove-button[_ngcontent-%COMP%]{float:right;margin:0}.card-block[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding:0}.available[_ngcontent-%COMP%]{padding-left:10px}"]}),fe)}],Ee=((ge=function e(){s(this,e)}).\u0275mod=p.Pb({type:ge}),ge.\u0275inj=p.Ob({factory:function(e){return new(e||ge)},imports:[[d.j.forChild(Ae)],d.j]}),ge),Se=r("iTUp"),Me=r("TXHh"),_e=((he=function e(){s(this,e)}).\u0275mod=p.Pb({type:he}),he.\u0275inj=p.Ob({factory:function(e){return new(e||he)},imports:[[c.c,o.e,l.Y,v.c.forChild(),Se.a,Me.a,Ee]]}),he)},iTUp:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("ofXK"),i=n("fXoL"),r=function(){var e=function e(){s(this,e)};return e.\u0275mod=i.Pb({type:e}),e.\u0275inj=i.Ob({factory:function(t){return new(t||e)},imports:[[a.c]]}),e}()},q5gJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("fXoL"),r=function(){var e=function(){function e(){s(this,e)}return i(e,[{key:"transform",value:function(e,t){return(e/Math.pow(10,t)).toLocaleString(void 0,{maximumFractionDigits:t})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=a.Qb({name:"format",type:e,pure:!0}),e}()}}])}();