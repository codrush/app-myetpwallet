(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{LB3o:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r("mrSG"),n=r("fXoL"),s=r("tk/3"),c=r("e8h1");let a=(()=>{class e{constructor(e,t){this.http=e,this.storage=t,this.URL="https://bridge.mvs.org/api"}getBridgeRate(e,t){return this.http.get(`${this.URL}/rate/${e}/${t}`)}getBridgePairs(){return this.http.get(this.URL+"/pairs")}getOrder(e){return this.http.get(`${this.URL}/order/${e}`)}createOrder(e){return this.http.post(this.URL+"/order",e)}getOrders(){return Object(i.a)(this,void 0,void 0,(function*(){return(yield this.storage.get("etp_bridge_orders"))||[]}))}setOrders(e){return this.storage.set("etp_bridge_orders",e)}saveOrder(e){return this.getOrders().then(t=>{let r=!1;return t=t.map(t=>t.id===e.id?(r=!0,e):t),r||t.push(e),this.setOrders(t)})}isMetaverseSymbol(e=""){return-1!==["ETP"].indexOf(e)}}return e.\u0275fac=function(t){return new(t||e)(n.bc(s.a),n.bc(c.b))},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},VMct:function(e,t,r){"use strict";r.r(t),r.d(t,"SwftPageModule",(function(){return oe}));var i=r("ofXK"),n=r("3Pt+"),s=r("TEn/"),c=r("tyNb"),a=r("mrSG"),o=r("gddX"),d=r("UwpU"),l=r("fXoL"),b=r("BZA/"),m=r("LB3o"),p=r("3LUQ"),S=r("OaWH"),u=r("Fvwb"),f=r("Dvla"),g=r("2g2N"),h=r("sYmb"),v=r("JvOL"),F=r("q5gJ");const O=["quantityInput"];function T(e,t){1&e&&l.Sb(0,"ion-spinner",28)}function W(e,t){1&e&&l.Sb(0,"h4",29)}const A=function(e){return{rate:e}};function y(e,t){if(1&e&&l.Sb(0,"div",56),2&e){const e=l.jc(2);l.pc("translateParams",l.tc(1,A,e.bridgeRate.instantRate))}}function P(e,t){1&e&&l.Sb(0,"ion-spinner",28)}function R(e,t){if(1&e&&(l.Xb(0,"ion-select-option",57),l.Ic(1),l.Wb()),2&e){const e=t.$implicit;l.qc("value",e),l.Fb(1),l.Kc("",e," ")}}const E=function(e,t,r,i){return{min:e,max:t,symbol:r,fee:i}};function I(e,t){if(1&e&&l.Sb(0,"div",58),2&e){const e=l.jc(2);l.pc("translateParams",l.wc(1,E,e.bridgeRate.depositMin,e.bridgeRate.depositMax,e.createOrderParameters.depositSymbol,100*e.bridgeRate.depositCoinFeeRate))}}function X(e,t){if(1&e&&(l.Xb(0,"ion-select-option",57),l.Ic(1),l.kc(2,"format"),l.Wb()),2&e){const e=t.$implicit;l.qc("value",e.address),l.Fb(1),l.Lc(" ",e.identifier," - ",l.mc(2,3,e.balance,8)," ETP")}}const M=function(e){return{"error-border":e}},C=function(e){return{symbol:e}};function w(e,t){if(1&e){const e=l.Yb();l.Xb(0,"ion-item",20),l.Sb(1,"ion-label",59),l.Xb(2,"ion-select",60),l.fc("ngModelChange",(function(t){return l.Ac(e),l.jc(2).createOrderParameters.refundAddress=t})),l.kc(3,"translate"),l.kc(4,"translate"),l.Gc(5,X,3,6,"ion-select-option",38),l.Wb(),l.Wb()}if(2&e){const e=l.jc(2);l.pc("ngClass",l.tc(10,M,!e.validRefundAddress())),l.Fb(1),l.pc("translateParams",l.tc(12,C,e.createOrderParameters.depositSymbol)),l.Fb(1),l.qc("okText",l.lc(3,6,"OK")),l.qc("cancelText",l.lc(4,8,"CANCEL")),l.pc("ngModel",e.createOrderParameters.refundAddress),l.Fb(3),l.pc("ngForOf",e.addressbalances)}}function _(e,t){if(1&e){const e=l.Yb();l.Xb(0,"ion-item",20),l.Sb(1,"ion-label",61),l.Xb(2,"ion-input",62),l.fc("ngModelChange",(function(t){return l.Ac(e),l.jc(2).createOrderParameters.refundAddress=t})),l.Wb(),l.Wb()}if(2&e){const e=l.jc(2);l.pc("ngClass",l.tc(3,M,!e.validRefundAddress())),l.Fb(1),l.pc("translateParams",l.tc(5,C,e.createOrderParameters.depositSymbol)),l.Fb(1),l.pc("ngModel",e.createOrderParameters.refundAddress)}}function j(e,t){if(1&e&&(l.Xb(0,"ion-select-option",57),l.Ic(1),l.Wb()),2&e){const e=t.$implicit;l.qc("value",e),l.Fb(1),l.Kc("",e," ")}}const k=function(e,t){return{fee:e,symbol:t}};function D(e,t){if(1&e&&l.Sb(0,"div",63),2&e){const e=l.jc(2);l.pc("translateParams",l.uc(1,k,e.bridgeRate.receiveCoinFee,e.createOrderParameters.receiveSymbol))}}function B(e,t){if(1&e&&(l.Xb(0,"ion-select-option",57),l.Ic(1),l.kc(2,"format"),l.Wb()),2&e){const e=t.$implicit;l.qc("value",e.address),l.Fb(1),l.Lc(" ",e.identifier," - ",l.mc(2,3,e.balance,8)," ETP")}}function x(e,t){if(1&e){const e=l.Yb();l.Xb(0,"ion-item",20),l.Sb(1,"ion-label",64),l.Xb(2,"ion-select",65),l.fc("ngModelChange",(function(t){return l.Ac(e),l.jc(2).createOrderParameters.receiveAddress=t})),l.kc(3,"translate"),l.kc(4,"translate"),l.Gc(5,B,3,6,"ion-select-option",38),l.Wb(),l.Wb()}if(2&e){const e=l.jc(2);l.pc("ngClass",l.tc(10,M,!e.validRecipientAddress())),l.Fb(1),l.pc("translateParams",l.tc(12,C,e.createOrderParameters.receiveSymbol)),l.Fb(1),l.qc("okText",l.lc(3,6,"OK")),l.qc("cancelText",l.lc(4,8,"CANCEL")),l.pc("ngModel",e.createOrderParameters.receiveAddress),l.Fb(3),l.pc("ngForOf",e.addressbalances)}}function L(e,t){if(1&e){const e=l.Yb();l.Xb(0,"ion-item",20),l.Sb(1,"ion-label",66),l.Xb(2,"ion-input",67),l.fc("ngModelChange",(function(t){return l.Ac(e),l.jc(2).createOrderParameters.receiveAddress=t})),l.Wb(),l.Wb()}if(2&e){const e=l.jc(2);l.pc("ngClass",l.tc(3,M,!e.validRecipientAddress())),l.Fb(1),l.pc("translateParams",l.tc(5,C,e.createOrderParameters.receiveSymbol)),l.Fb(1),l.pc("ngModel",e.createOrderParameters.receiveAddress)}}const N=function(){return{"valid-border":!0}},G=function(e,t){return{"error-border":e,"valid-border":t}};function U(e,t){if(1&e){const e=l.Yb();l.Xb(0,"form",30,31),l.fc("ngSubmit",(function(){return l.Ac(e),l.jc().createOrder()}))("keyup.enter",(function(){return l.Ac(e),l.jc().createOrder()})),l.Xb(2,"ion-card",19),l.Xb(3,"div",32),l.Xb(4,"ion-icon",33),l.fc("click",(function(){return l.Ac(e),l.jc().switch()})),l.Wb(),l.Gc(5,y,1,3,"div",34),l.Wb(),l.Gc(6,P,1,0,"ion-spinner",11),l.Xb(7,"ion-row"),l.Xb(8,"ion-col",35),l.Xb(9,"ion-item",20),l.Xb(10,"ion-label",36),l.Ic(11),l.kc(12,"translate"),l.Wb(),l.Xb(13,"ion-select",37),l.fc("ngModelChange",(function(t){return l.Ac(e),l.jc().changeDepositSymbol(t)})),l.kc(14,"translate"),l.kc(15,"translate"),l.Gc(16,R,2,2,"ion-select-option",38),l.Wb(),l.Wb(),l.Xb(17,"ion-item",20),l.Sb(18,"ion-label",39),l.Xb(19,"ion-input",40),l.fc("ngModelChange",(function(t){return l.Ac(e),l.jc().createOrderParameters.depositAmount=t}))("ngModelChange",(function(){return l.Ac(e),l.jc().updateReceiveAmount()})),l.Wb(),l.Wb(),l.Gc(20,I,1,6,"div",41),l.Gc(21,w,6,14,"ion-item",42),l.Gc(22,_,3,7,"ion-item",42),l.Wb(),l.Xb(23,"ion-col",35),l.Xb(24,"ion-item",20),l.Sb(25,"ion-label",43),l.Xb(26,"ion-select",44),l.fc("ngModelChange",(function(t){return l.Ac(e),l.jc().changeReceiveSymbol(t)})),l.kc(27,"translate"),l.kc(28,"translate"),l.Xb(29,"ion-select-option",45),l.Ic(30,"ETP"),l.Wb(),l.Gc(31,j,2,2,"ion-select-option",38),l.Wb(),l.Wb(),l.Xb(32,"ion-item",20),l.Sb(33,"ion-label",46),l.Xb(34,"ion-input",47),l.fc("ngModelChange",(function(t){return l.Ac(e),l.jc().createOrderParameters.receiveAmount=t})),l.Wb(),l.Wb(),l.Gc(35,D,1,4,"div",48),l.Gc(36,x,6,14,"ion-item",42),l.Gc(37,L,3,7,"ion-item",42),l.Wb(),l.Wb(),l.Xb(38,"ion-row",49),l.Xb(39,"ion-col"),l.Xb(40,"ion-button",50),l.fc("click",(function(){return l.Ac(e),l.jc().cancel()})),l.Sb(41,"ion-icon",51),l.Sb(42,"span",52),l.Wb(),l.Wb(),l.Xb(43,"ion-col"),l.Xb(44,"ion-button",53),l.Sb(45,"ion-icon",54),l.Sb(46,"span",55),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.yc(1),t=l.jc();l.Fb(5),l.pc("ngIf",t.bridgeRate),l.Fb(1),l.pc("ngIf",t.loadingRate),l.Fb(3),l.pc("ngClass",l.sc(34,N)),l.Fb(2),l.Jc(l.lc(12,24,"SWFT.FROM_ASSET")),l.Fb(2),l.qc("okText",l.lc(14,26,"OK")),l.qc("cancelText",l.lc(15,28,"CANCEL")),l.pc("ngModel",t.createOrderParameters.depositSymbol),l.Fb(3),l.pc("ngForOf",t.depositSymbolList),l.Fb(1),l.pc("ngClass",l.uc(35,G,!t.validDepositAmount(t.createOrderParameters.depositAmount),t.validDepositAmount(t.createOrderParameters.depositAmount))),l.Fb(2),l.pc("ngModel",t.createOrderParameters.depositAmount),l.Fb(1),l.pc("ngIf",t.bridgeRate),l.Fb(1),l.pc("ngIf",t.etpBridgeService.isMetaverseSymbol(t.createOrderParameters.depositSymbol)),l.Fb(1),l.pc("ngIf",!t.etpBridgeService.isMetaverseSymbol(t.createOrderParameters.depositSymbol)),l.Fb(2),l.pc("ngClass",l.sc(38,N)),l.Fb(2),l.qc("okText",l.lc(27,30,"OK")),l.qc("cancelText",l.lc(28,32,"CANCEL")),l.pc("ngModel",t.createOrderParameters.receiveSymbol),l.Fb(5),l.pc("ngForOf",t.bridgePairs.ETP),l.Fb(1),l.pc("ngClass",l.sc(39,N)),l.Fb(2),l.pc("ngModel",t.createOrderParameters.receiveAmount),l.Fb(1),l.pc("ngIf",t.bridgeRate),l.Fb(1),l.pc("ngIf",t.etpBridgeService.isMetaverseSymbol(t.createOrderParameters.receiveSymbol)),l.Fb(1),l.pc("ngIf",!t.etpBridgeService.isMetaverseSymbol(t.createOrderParameters.receiveSymbol)),l.Fb(7),l.pc("disabled",!(e.form.valid&&t.validDepositAmount(t.createOrderParameters.depositAmount)&&t.validRefundAddress()&&t.validRecipientAddress()))}}function $(e,t){if(1&e&&(l.Xb(0,"a",85),l.Ic(1),l.Wb()),2&e){const e=l.jc().$implicit,t=l.jc();l.qc("href",t.explorerURL("adr",e.deposit.address),l.Cc),l.Fb(1),l.Jc(e.deposit.address)}}function q(e,t){if(1&e){const e=l.Yb();l.Xb(0,"a",86),l.fc("click",(function(){l.Ac(e);const t=l.jc().$implicit;return l.jc().show(t.deposit.address)})),l.Ic(1),l.Wb()}if(2&e){const e=l.jc().$implicit;l.Fb(1),l.Jc(e.deposit.address)}}function Y(e,t){if(1&e&&(l.Xb(0,"a",85),l.Ic(1),l.Wb()),2&e){const e=l.jc().$implicit,t=l.jc();l.qc("href",t.explorerURL("adr",e.refund.address),l.Cc),l.Fb(1),l.Jc(e.refund.address)}}function J(e,t){if(1&e){const e=l.Yb();l.Xb(0,"a",86),l.fc("click",(function(){l.Ac(e);const t=l.jc().$implicit;return l.jc().show(t.refund.address)})),l.Ic(1),l.Wb()}if(2&e){const e=l.jc().$implicit;l.Fb(1),l.Jc(e.refund.address)}}function V(e,t){if(1&e&&(l.Xb(0,"a",85),l.Ic(1),l.Wb()),2&e){const e=l.jc(2).$implicit,t=l.jc();l.qc("href",t.explorerURL("tx",e.refund.txid),l.Cc),l.Fb(1),l.Jc(e.refund.txid)}}function z(e,t){if(1&e){const e=l.Yb();l.Xb(0,"a",86),l.fc("click",(function(){l.Ac(e);const t=l.jc(2).$implicit;return l.jc().show(t.refund.txid)})),l.Ic(1),l.Wb()}if(2&e){const e=l.jc(2).$implicit;l.Fb(1),l.Jc(e.refund.txid)}}function K(e,t){if(1&e&&(l.Xb(0,"ion-row"),l.Xb(1,"ion-col",73),l.Sb(2,"div",87),l.Wb(),l.Xb(3,"ion-col",73),l.Xb(4,"h4",75),l.Gc(5,V,2,2,"a",76),l.Gc(6,z,2,1,"a",77),l.Wb(),l.Wb(),l.Wb()),2&e){const e=l.jc().$implicit,t=l.jc();l.Fb(2),l.pc("translateParams",l.tc(3,C,e.deposit.symbol)),l.Fb(3),l.pc("ngIf",t.etpBridgeService.isMetaverseSymbol(e.deposit.symbol)),l.Fb(1),l.pc("ngIf",!t.etpBridgeService.isMetaverseSymbol(e.deposit.symbol))}}function H(e,t){if(1&e&&(l.Xb(0,"a",85),l.Ic(1),l.Wb()),2&e){const e=l.jc().$implicit,t=l.jc();l.qc("href",t.explorerURL("adr",e.receive.address),l.Cc),l.Fb(1),l.Jc(e.receive.address)}}function Q(e,t){if(1&e){const e=l.Yb();l.Xb(0,"a",86),l.fc("click",(function(){l.Ac(e);const t=l.jc().$implicit;return l.jc().show(t.receive.address)})),l.Ic(1),l.Wb()}if(2&e){const e=l.jc().$implicit;l.Fb(1),l.Jc(e.receive.address)}}function Z(e,t){if(1&e&&(l.Xb(0,"a",85),l.Ic(1),l.Wb()),2&e){const e=l.jc(2).$implicit,t=l.jc();l.qc("href",t.explorerURL("tx",e.receive.txid),l.Cc),l.Fb(1),l.Jc(e.receive.txid)}}function ee(e,t){if(1&e){const e=l.Yb();l.Xb(0,"a",86),l.fc("click",(function(){l.Ac(e);const t=l.jc(2).$implicit;return l.jc().show(t.receive.txid)})),l.Ic(1),l.Wb()}if(2&e){const e=l.jc(2).$implicit;l.Fb(1),l.Jc(e.receive.txid)}}function te(e,t){if(1&e&&(l.Xb(0,"ion-row"),l.Xb(1,"ion-col",73),l.Sb(2,"div",88),l.Wb(),l.Xb(3,"ion-col",73),l.Xb(4,"h4",75),l.Gc(5,Z,2,2,"a",76),l.Gc(6,ee,2,1,"a",77),l.Wb(),l.Wb(),l.Wb()),2&e){const e=l.jc().$implicit,t=l.jc();l.Fb(2),l.pc("translateParams",l.tc(3,C,e.receive.symbol)),l.Fb(3),l.pc("ngIf",t.etpBridgeService.isMetaverseSymbol(e.receive.symbol)),l.Fb(1),l.pc("ngIf",!t.etpBridgeService.isMetaverseSymbol(e.receive.symbol))}}function re(e,t){if(1&e){const e=l.Yb();l.Xb(0,"ion-card",68),l.Xb(1,"ion-row"),l.Xb(2,"ion-col"),l.Xb(3,"ion-row"),l.Xb(4,"ion-col"),l.Xb(5,"h2",69),l.fc("click",(function(){l.Ac(e);const r=t.$implicit;return l.jc().copy(r.id,"id")})),l.Ic(6),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(7,"ion-row"),l.Xb(8,"ion-col",70),l.Xb(9,"ion-row"),l.Sb(10,"ion-col",71),l.Xb(11,"ion-col",72),l.Ic(12),l.Wb(),l.Wb(),l.Xb(13,"ion-row"),l.Xb(14,"ion-col",73),l.Sb(15,"div",74),l.Wb(),l.Xb(16,"ion-col",73),l.Xb(17,"h4",75),l.Gc(18,$,2,2,"a",76),l.Gc(19,q,2,1,"a",77),l.Wb(),l.Wb(),l.Wb(),l.Xb(20,"ion-row"),l.Xb(21,"ion-col",73),l.Sb(22,"div",78),l.Wb(),l.Xb(23,"ion-col",73),l.Xb(24,"h4",75),l.Gc(25,Y,2,2,"a",76),l.Gc(26,J,2,1,"a",77),l.Wb(),l.Wb(),l.Wb(),l.Gc(27,K,7,5,"ion-row",79),l.Wb(),l.Xb(28,"ion-col",70),l.Xb(29,"ion-row"),l.Sb(30,"ion-col",80),l.Xb(31,"ion-col",72),l.Ic(32),l.Wb(),l.Wb(),l.Xb(33,"ion-row"),l.Xb(34,"ion-col",73),l.Sb(35,"div",81),l.Wb(),l.Xb(36,"ion-col",73),l.Xb(37,"h4",75),l.Gc(38,H,2,2,"a",76),l.Gc(39,Q,2,1,"a",77),l.Wb(),l.Wb(),l.Wb(),l.Gc(40,te,7,5,"ion-row",79),l.Wb(),l.Wb(),l.Xb(41,"div",24),l.Xb(42,"ion-button",82),l.fc("click",(function(){l.Ac(e);const r=t.$implicit;return l.jc().gotoDetails(r.id)})),l.Sb(43,"ion-icon",83),l.Sb(44,"span",84),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=t.$implicit,r=l.jc();l.Fb(6),l.Kc(" ",e.id," "),l.Fb(6),l.Lc("",e.deposit.amount," ",e.deposit.symbol,""),l.Fb(3),l.pc("translateParams",l.tc(16,C,e.deposit.symbol)),l.Fb(3),l.pc("ngIf",r.etpBridgeService.isMetaverseSymbol(e.deposit.symbol)),l.Fb(1),l.pc("ngIf",!r.etpBridgeService.isMetaverseSymbol(e.deposit.symbol)),l.Fb(3),l.pc("translateParams",l.tc(18,C,e.deposit.symbol)),l.Fb(3),l.pc("ngIf",r.etpBridgeService.isMetaverseSymbol(e.deposit.symbol)),l.Fb(1),l.pc("ngIf",!r.etpBridgeService.isMetaverseSymbol(e.deposit.symbol)),l.Fb(1),l.pc("ngIf",e.refund.txid),l.Fb(5),l.Lc("",e.receive.amount," ",e.receive.symbol,""),l.Fb(3),l.pc("translateParams",l.tc(20,C,e.receive.symbol)),l.Fb(3),l.pc("ngIf",r.etpBridgeService.isMetaverseSymbol(e.receive.symbol)),l.Fb(1),l.pc("ngIf",!r.etpBridgeService.isMetaverseSymbol(e.receive.symbol)),l.Fb(1),l.pc("ngIf",e.receive.txid)}}function ie(e,t){if(1&e){const e=l.Yb();l.Xb(0,"ion-button",89),l.fc("click",(function(){return l.Ac(e),l.jc().scan()})),l.Sb(1,"ion-icon",90),l.Wb()}}const ne=function(){return["created","1"]},se=[{path:"",component:(()=>{class e{constructor(e,t,r,i,n,s,c,a,o,d){this.platform=e,this.metaverseService=t,this.etpBridgeService=r,this.alertService=i,this.globals=n,this.modalCtrl=s,this.router=c,this.walletService=a,this.clipboardService=o,this.toastService=d,this.etpBalance=0,this.loadingPair=!0,this.loadingRate=!1,this.depositSymbolList=[],this.orders=[],this.createOrderParameters={depositSymbol:"ETP",receiveSymbol:"BTC",receiveAmount:null,refundAddress:"",receiveAddress:"",depositAmount:null},this.validDepositAmount=e=>this.bridgeRate&&e>=this.bridgeRate.depositMin&&e<=this.bridgeRate.depositMax,this.validAddress=(e,t)=>void 0!==e&&""!==e&&(!this.etpBridgeService.isMetaverseSymbol(t)||this.metaverseService.validAddress(e)),this.validRefundAddress=()=>this.validAddress(this.createOrderParameters.refundAddress,this.createOrderParameters.depositSymbol),this.validRecipientAddress=()=>this.validAddress(this.createOrderParameters.receiveAddress,this.createOrderParameters.receiveSymbol),this.validId=e=>e,this.explorerURL=(e,t)=>"mainnet"===this.globals.network?"https://explorer.mvs.org/"+e+"/"+t:"https://explorer-testnet.mvs.org/"+e+"/"+t,this.gotoDetails=e=>this.router.navigate(["account","swft","order",e]),this.isMobile=this.walletService.isMobile(),this.etpBridgeService.getBridgePairs().toPromise().then(e=>{this.loadingPair=!1,this.bridgePairs=e,this.depositSymbolList=Object.keys(this.bridgePairs)}).catch(e=>{this.loadingPair=!1,console.error(e)}),Promise.all([this.metaverseService.getBalances(),this.metaverseService.getAddresses(),this.metaverseService.getAddressBalances()]).then(([e,t,r])=>{this.etpBalance=e.ETP.available,this.addresses=t;const i=[];Object.keys(t).forEach(e=>{const n=t[e];i.push(r[n]?{address:n,avatar:r[n].AVATAR?r[n].AVATAR:"",identifier:r[n].AVATAR?r[n].AVATAR:n,balance:r[n].ETP.available}:{address:n,avatar:"",identifier:n,balance:0})}),this.addressbalances=i})}ngOnInit(){}ionViewWillEnter(){this.getRate(),this.loadOrders()}getRate(){this.loadingRate=!0,this.bridgeRate=void 0,this.etpBridgeService.getBridgeRate(this.createOrderParameters.depositSymbol,this.createOrderParameters.receiveSymbol).toPromise().then(e=>{this.bridgeRate=e,this.updateReceiveAmount()}).finally(()=>{this.loadingRate=!1})}loadOrders(){return Object(a.a)(this,void 0,void 0,(function*(){return this.orders=yield this.etpBridgeService.getOrders(),this.orders}))}createOrder(){let e;return this.alertService.showLoading().then(()=>this.etpBridgeService.createOrder(this.createOrderParameters).toPromise()).then(t=>(e=t,this.etpBridgeService.saveOrder(t))).then(()=>this.loadOrders()).then(()=>{this.alertService.stopLoading(),this.alertService.showMessage("SWFT.MESSAGE.SUCCESS_CREATE_SWFT_TITLE","SWFT.MESSAGE.SUCCESS_CREATE_SWFT_BODY",""),this.gotoDetails(e.id)}).catch(e=>{console.error(e),this.alertService.stopLoading(),this.alertService.showError("SWFT.MESSAGE.CREATE_SWFT_ORDER_ERROR",e._body)})}importOrder(){return this.alertService.showLoading().then(()=>this.etpBridgeService.getOrder(this.importFromId).toPromise()).then(e=>this.etpBridgeService.saveOrder(e)).then(()=>this.loadOrders()).then(()=>{this.alertService.stopLoading(),this.alertService.showMessage("SWFT.MESSAGE.SUCCESS_IMPORT_SWFT_TITLE","SWFT.MESSAGE.SUCCESS_IMPORT_SWFT_BODY","")}).catch(e=>{console.error(e),this.alertService.stopLoading(),this.alertService.showError("SWFT.MESSAGE.CREATE_SWFT_ORDER_ERROR",e.message)})}cancel(){this.createOrderParameters={depositSymbol:"ETP",receiveSymbol:"BTC",receiveAmount:null,refundAddress:"",receiveAddress:"",depositAmount:null}}changeDepositSymbol(e){this.etpBridgeService.isMetaverseSymbol(e)||this.etpBridgeService.isMetaverseSymbol(this.createOrderParameters.receiveSymbol)?e===this.createOrderParameters.receiveSymbol&&(this.createOrderParameters.receiveSymbol=this.createOrderParameters.depositSymbol):this.createOrderParameters.receiveSymbol="ETP",this.createOrderParameters.depositSymbol=e,this.getRate()}changeReceiveSymbol(e){this.etpBridgeService.isMetaverseSymbol(e)||this.etpBridgeService.isMetaverseSymbol(this.createOrderParameters.depositSymbol)?e===this.createOrderParameters.depositSymbol&&(this.createOrderParameters.depositSymbol=this.createOrderParameters.receiveSymbol):this.createOrderParameters.depositSymbol="ETP",this.createOrderParameters.receiveSymbol=e,this.getRate()}updateReceiveAmount(){const e=(this.bridgeRate?this.createOrderParameters.depositAmount*this.bridgeRate.instantRate*(1-this.bridgeRate.depositCoinFeeRate):0).toString().split(".");e[1]=e[1]?e[1].substring(0,6):"0",this.createOrderParameters.receiveAmount=parseFloat(e[0]+"."+e[1])}switch(){const e=this.createOrderParameters.receiveSymbol;this.createOrderParameters.receiveSymbol=this.createOrderParameters.depositSymbol,this.createOrderParameters.depositSymbol=e,this.createOrderParameters.receiveAmount=0,this.createOrderParameters.depositAmount=0,this.createOrderParameters.refundAddress="",this.createOrderParameters.receiveAddress="",this.getRate()}copy(e,t){return Object(a.a)(this,void 0,void 0,(function*(){try{switch(yield this.clipboardService.copyFromContent(e),t){case"id":this.toastService.simpleToast("SWFT.TOAST.ID_COPIED");break;default:this.toastService.simpleToast("IDENTITIES.TOAST.COPIED")}}catch(r){console.log("Error while copying")}}))}scan(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:o.a,showBackdrop:!1,backdropDismiss:!1});e.onWillDismiss().then(t=>{if(t.data&&t.data.text){const e=t.data.text.toString().split("&");this.metaverseService.validAddress(e[0])?this.importFromId=e[0]:this.alertService.showMessage("SCAN.INVALID_ADDRESS.TITLE","SCAN.INVALID_ADDRESS.SUBTITLE","")}e.remove()}),yield e.present()}))}show(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=e,r=e,i=yield this.modalCtrl.create({component:d.a,componentProps:{title:r,content:t}});yield i.present()}))}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(s.eb),l.Rb(b.a),l.Rb(m.a),l.Rb(p.a),l.Rb(S.a),l.Rb(s.bb),l.Rb(c.h),l.Rb(u.a),l.Rb(f.b),l.Rb(g.a))},e.\u0275cmp=l.Lb({type:e,selectors:[["app-swft"]],viewQuery:function(e,t){var r;1&e&&l.Nc(O,!0),2&e&&l.xc(r=l.gc())&&(t.quantityInput=r.first)},decls:35,vars:16,consts:[["slot","start"],["translate","SWFT.TITLE"],["href","https://www.swft.pro","target","_blank","rel","noopener",1,"swft-logo"],[3,"src"],[1,"swft-info"],["align","center"],["translate","SWFT.INFORMATION"],["href","https://t.me/SWFTBlockchain","target","_blank","rel","noopener","translate","SWFT.INFORMATION_LINK"],["align","center","translate","SWFT.INFORMATION_WARNING",1,"wrong-input"],["translate","SWFT.CREATE_ORDER"],["translate","SWFT.CREATE_ORDER_DESCRIPTION"],["name","dots",4,"ngIf"],["class","wrong-input center","translate","SWFT.UNABLE_CONNECT_SWFT",4,"ngIf"],[3,"ngSubmit","keyup.enter",4,"ngIf"],["translate","SWFT.HISTORY_TITLE"],["translate","SWFT.HISTORY_DESCRIPTION"],["class","card-order-history",4,"ngFor","ngForOf"],["translate","SWFT.IMPORT_ORDER"],["translate","SWFT.IMPORT_ORDER_DESCRIPTION"],[1,"card-block"],[3,"ngClass"],["color","primary","position","floating","translate","SWFT.ORDER_ID"],["name","importFromId",3,"ngModel","ngModelChange"],["slot","end","class","scanButton",3,"click",4,"ngIf"],[1,"center"],["fill","outline","shape","round",3,"disabled","click"],["slot","start","name","add"],["translate","SWFT.IMPORT_ORDER_BUTTON"],["name","dots"],["translate","SWFT.UNABLE_CONNECT_SWFT",1,"wrong-input","center"],[3,"ngSubmit","keyup.enter"],["swapForm","ngForm"],[1,"ion-text-center"],["id","swapIcon","name","swap-horizontal",3,"click"],["id","rate","lines","none","translate","SWFT.RATE_INFO",3,"translateParams",4,"ngIf"],["size","6"],["color","primary"],["name","depositSymbol",3,"ngModel","okText","cancelText","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["color","primary","position","floating","translate","SWFT.AMOUNT_SEND"],["name","depositAmount","type","number",3,"ngModel","ngModelChange"],["lines","none","class","advice","translate","SWFT.MIN_MAX_DEPOSIT",3,"translateParams",4,"ngIf"],[3,"ngClass",4,"ngIf"],["color","primary","translate","SWFT.TO_ASSET"],["name","receiveSymbol",3,"ngModel","okText","cancelText","ngModelChange"],["value","ETP"],["color","primary","position","floating","translate","SWFT.AMOUNT_RECEIVE"],["name","receiveAmount","type","number","disabled","",3,"ngModel","ngModelChange"],["lines","none","class","advice","translate","SWFT.RECEIVE_COIN_FEE",3,"translateParams",4,"ngIf"],[1,"buttons-row"],["color","danger","expand","full","fill","outline","shape","round",3,"click"],["slot","start","name","close"],["translate","SWFT.BUTTON.CANCEL"],["type","submit","expand","full","color","secondary","fill","outline","shape","round",3,"disabled"],["slot","start","disabled","checked","name","send"],["translate","SWFT.BUTTON.NEXT"],["id","rate","lines","none","translate","SWFT.RATE_INFO",3,"translateParams"],[3,"value"],["lines","none","translate","SWFT.MIN_MAX_DEPOSIT",1,"advice",3,"translateParams"],["color","primary","translate","SWFT.REFUND_ADDRESS",3,"translateParams"],["name","refundAddress","multiple","false",3,"ngModel","okText","cancelText","ngModelChange"],["color","primary","position","floating","translate","SWFT.REFUND_ADDRESS",3,"translateParams"],["name","refundAddress","type","text",3,"ngModel","ngModelChange"],["lines","none","translate","SWFT.RECEIVE_COIN_FEE",1,"advice",3,"translateParams"],["color","primary","translate","SWFT.RECEIVE_ADDRESS",3,"translateParams"],["name","receiveAddress","multiple","false",3,"ngModel","okText","cancelText","ngModelChange"],["color","primary","position","floating","translate","SWFT.RECEIVE_ADDRESS",3,"translateParams"],["name","receiveAddress","type","text",3,"ngModel","ngModelChange"],[1,"card-order-history"],[1,"pointer",3,"click"],["size","12","size-md","6"],["size","12","size-sm","6","translate","SWFT.FROM_ASSET"],["size","12","size-sm","6",1,"right"],["size","12","size-sm","6"],["translate","SWFT.DEPOSIT_ADDRESS",3,"translateParams"],[1,"breakwords"],["target","_blank","rel","noopener","class","right",3,"href",4,"ngIf"],["class","right",3,"click",4,"ngIf"],["translate","SWFT.REFUND_ADDRESS",3,"translateParams"],[4,"ngIf"],["size","12","size-sm","6","translate","SWFT.TO_ASSET"],["translate","SWFT.RECEIVE_ADDRESS",3,"translateParams"],["fill","outline","shape","round",3,"click"],["slot","start","name","arrow-forward"],["translate","SWFT.SEE_DETAILS_BUTTON"],["target","_blank","rel","noopener",1,"right",3,"href"],[1,"right",3,"click"],["translate","SWFT.REFUND_TX",3,"translateParams"],["translate","SWFT.RECEIVE_TX",3,"translateParams"],["slot","end",1,"scanButton",3,"click"],["slot","icon-only","name","qr-code"]],template:function(e,t){1&e&&(l.Xb(0,"ion-header"),l.Xb(1,"ion-toolbar"),l.Xb(2,"ion-buttons",0),l.Sb(3,"ion-menu-button"),l.Wb(),l.Sb(4,"ion-title",1),l.Wb(),l.Wb(),l.Xb(5,"ion-content"),l.Xb(6,"ion-grid"),l.Xb(7,"a",2),l.Sb(8,"img",3),l.Wb(),l.Xb(9,"ion-row",4),l.Xb(10,"ion-col"),l.Xb(11,"p",5),l.Sb(12,"span",6),l.Sb(13,"a",7),l.Wb(),l.Sb(14,"p",8),l.Wb(),l.Wb(),l.Sb(15,"h3",9),l.Sb(16,"p",10),l.Gc(17,T,1,0,"ion-spinner",11),l.Gc(18,W,1,0,"h4",12),l.Gc(19,U,47,40,"form",13),l.Sb(20,"h3",14),l.Sb(21,"p",15),l.Gc(22,re,45,22,"ion-card",16),l.kc(23,"orderBy"),l.Sb(24,"h3",17),l.Sb(25,"p",18),l.Xb(26,"ion-card",19),l.Xb(27,"ion-item",20),l.Sb(28,"ion-label",21),l.Xb(29,"ion-input",22),l.fc("ngModelChange",(function(e){return t.importFromId=e})),l.Wb(),l.Gc(30,ie,2,0,"ion-button",23),l.Wb(),l.Xb(31,"div",24),l.Xb(32,"ion-button",25),l.fc("click",(function(){return t.importOrder()})),l.Sb(33,"ion-icon",26),l.Sb(34,"span",27),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e&&(l.Fb(8),l.pc("src","assets/images/swft-logo.png",l.Cc),l.Fb(9),l.pc("ngIf",t.loadingPair),l.Fb(1),l.pc("ngIf",!t.loadingPair&&!t.bridgePairs),l.Fb(1),l.pc("ngIf",!t.loadingPair&&t.bridgePairs),l.Fb(3),l.pc("ngForOf",l.mc(23,9,t.orders,l.sc(12,ne))),l.Fb(5),l.pc("ngClass",l.uc(13,G,!t.validId(t.importFromId),t.validId(t.importFromId))),l.Fb(2),l.pc("ngModel",t.importFromId),l.Fb(1),l.pc("ngIf",t.isMobile),l.Fb(2),l.pc("disabled",!t.validId(t.importFromId)))},directives:[s.u,s.X,s.j,s.C,s.V,h.a,s.r,s.t,s.K,s.q,i.m,i.l,s.k,s.x,i.k,s.z,s.w,s.hb,n.i,n.l,s.i,s.v,s.R,n.p,n.j,n.k,s.N,s.gb,s.db,s.O],pipes:[v.a,h.d,F.a],styles:["#swapIcon[_ngcontent-%COMP%]{font-size:36px;margin-top:10px;cursor:pointer}"]}),e})()},{path:"order",loadChildren:()=>r.e(45).then(r.bind(null,"Mm+m")).then(e=>e.OrderDetailPageModule)}];let ce=(()=>{class e{}return e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({factory:function(t){return new(t||e)},imports:[[c.j.forChild(se)],c.j]}),e})();var ae=r("iTUp");let oe=(()=>{class e{}return e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({factory:function(t){return new(t||e)},imports:[[i.c,n.e,s.Y,h.c.forChild(),ae.a,ce]]}),e})()},iTUp:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r("ofXK"),n=r("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[i.c]]}),e})()},q5gJ:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r("fXoL");let n=(()=>{class e{transform(e,t){return(e/Math.pow(10,t)).toLocaleString(void 0,{maximumFractionDigits:t})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Qb({name:"format",type:e,pure:!0}),e})()}}]);