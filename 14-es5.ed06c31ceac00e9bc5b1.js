!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"/ldR":function(t,s,c){"use strict";(function(t){Object.defineProperty(s,"__esModule",{value:!0});var u=c("Xe4H"),f=c("QVnb"),l=function(s){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,s);var c=o(l);function l(t){var n,r=t.version,i=void 0===r?1:r,o=t.network,s=void 0===o?"mainnet":o,a=t.source,u=void 0===a?"":a,f=t.target,h=void 0===f?"":f,d=t.sourceSignature,b=void 0===d?"":d,v=t.callback,g=void 0===v?"":v,p=t.time,I=void 0===p?0:p,m=t.timeout,E=void 0===m?0:m,S=t.targetSignature,T=void 0===S?"":S;return e(this,l),(n=c.call(this,i,s)).type="auth",n.source=u,n.target=h,n.sourceSignature=b,n.targetSignature=T,n.callback=g,n.time=I,n.timeout=E,n}return n(l,[{key:"validateSource",value:function(e,t){}},{key:"encodeBuffer",value:function(){return t.concat([r(a(l.prototype),"encodeBuffer",this).call(this,u.REQUEST_TYPE_AUTH),f.encodeVarStr(this.source),f.encodeVarStr(this.target),f.encodeVarInt(this.time),f.encodeVarInt(this.timeout),f.encodeVarStr(this.callback),f.encodeVarStr(this.sourceSignature,"hex"),f.encodeVarStr(this.targetSignature,"hex")])}}],[{key:"decodeBuffer",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{offset:0};if(1!==e)throw Error("Unsupported request version");return new l({version:e,network:t,source:f.decodeVarStr(n,r),target:f.decodeVarStr(n,r),time:f.decodeVarInt(n,r),timeout:f.decodeVarInt(n,r),callback:f.decodeVarStr(n,r),sourceSignature:f.decodeVarStr(n,r,"hex"),targetSignature:f.decodeVarStr(n,r,"hex")})}}]),l}(u.MetaverseRequest);s.AuthRequest=l}).call(this,c("HDXh").Buffer)},"0ZLj":function(t,r,i){"use strict";(function(t){Object.defineProperty(r,"__esModule",{value:!0});var o=i("/ldR"),s=i("Xe4H"),a=i("QVnb");r.Request=function(){function r(t){switch(e(this,r),t.type){case"auth":return new o.AuthRequest(t);default:throw Error("Unsupported type")}}return n(r,null,[{key:"decode",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hex";return this.decodeBuffer(t.from(e,n))}},{key:"decodeBuffer",value:function(e){var t={offset:0},n=a.decodeVarInt(e,t),r="custom";switch(a.decodeVarInt(e,t)){case 1:r="mainnet";break;case 2:r="testnet";break;case 0:break;default:throw Error("Illegal network")}switch(a.decodeVarInt(e,t)){case s.REQUEST_TYPE_AUTH:return o.AuthRequest.decodeBuffer(n,r,e,t);default:throw Error("Unsupported type")}}}]),r}()}).call(this,i("HDXh").Buffer)},"7BdR":function(t,r,i){"use strict";(function(t){i.d(r,"a",(function(){return X}));var o=i("mrSG"),s=i("Ej91"),a=i("LvDl"),c=i("fXoL"),u=i("tyNb"),f=i("OaWH"),l=i("BZA/"),h=i("ofXK"),d=i("Fvwb"),b=i("onos"),v=i("3LUQ"),g=i("TEn/"),p=i("sYmb"),I=i("3Pt+"),m=i("z+xu"),E=["selectAvatar"];function S(e,t){if(1&e&&(c.Xb(0,"ion-select-option",11),c.Ic(1),c.Wb()),2&e){var n=t.$implicit;c.qc("value",n),c.Fb(1),c.Jc(n)}}function T(e,t){if(1&e){var n=c.Yb();c.Xb(0,"ion-item"),c.Xb(1,"ion-label",7),c.Ic(2),c.kc(3,"translate"),c.Wb(),c.Xb(4,"ion-select",8,9),c.fc("ngModelChange",(function(e){return c.Ac(n),c.jc().avatar=e}))("ionChange",(function(){c.Ac(n);var e=c.jc();return e.onAvatarSelectChange(e.avatar)})),c.kc(6,"translate"),c.kc(7,"translate"),c.Gc(8,S,2,2,"ion-select-option",10),c.Wb(),c.Wb()}if(2&e){var r=c.jc();c.Fb(2),c.Jc(c.lc(3,5,"BITIDENT.CONFIRM.SELECT_AVATAR")),c.Fb(2),c.qc("okText",c.lc(6,7,"OK")),c.qc("cancelText",c.lc(7,9,"CANCEL")),c.pc("ngModel",r.avatar),c.Fb(4),c.pc("ngForOf",r.avatars)}}var y=function(e){return{seconds:e}};function k(e,t){if(1&e&&(c.Xb(0,"div"),c.Xb(1,"ion-row"),c.Xb(2,"ion-col"),c.Sb(3,"ion-item",36),c.Wb(),c.Xb(4,"ion-col",16),c.Xb(5,"ion-item",17),c.Xb(6,"span"),c.Ic(7),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(8,"ion-row"),c.Xb(9,"ion-col"),c.Sb(10,"ion-item",37),c.Wb(),c.Xb(11,"ion-col",16),c.Xb(12,"ion-item",17),c.Ic(13),c.kc(14,"date"),c.Wb(),c.Wb(),c.Wb(),c.Xb(15,"ion-row"),c.Xb(16,"ion-col"),c.Sb(17,"ion-item",38),c.Wb(),c.Xb(18,"ion-col",16),c.Sb(19,"ion-item",39),c.Wb(),c.Wb(),c.Wb()),2&e){var n=c.jc(2);c.Fb(7),c.Jc(n.verifiedToken.callback),c.Fb(6),c.Jc(c.mc(14,3,1e3*n.verifiedToken.time,"medium")),c.Fb(6),c.pc("translateParams",c.tc(6,y,n.verifiedToken.timeout))}}function w(e,t){1&e&&c.Sb(0,"ion-icon",40)}function R(e,t){1&e&&c.Sb(0,"ion-icon",41)}function N(e,t){1&e&&c.Sb(0,"span",42)}function O(e,t){1&e&&c.Sb(0,"span",43)}function A(e,t){if(1&e){var n=c.Yb();c.Xb(0,"ion-item"),c.Sb(1,"ion-label",44),c.Xb(2,"ion-checkbox",45),c.fc("ngModelChange",(function(e){return c.Ac(n),c.jc(2).noSigAgreed=e})),c.Wb(),c.Wb()}if(2&e){var r=c.jc(2);c.Fb(2),c.pc("ngModel",r.noSigAgreed)}}var D=function(e){return{leftTime:e}},_=function(e){return{"error-border":e}};function M(e,t){if(1&e){var n=c.Yb();c.Xb(0,"form",12,13),c.fc("ngSubmit",(function(){c.Ac(n);var e=c.jc();return e.signAndSend(e.passphrase)})),c.Xb(2,"ion-card",14),c.Xb(3,"ion-grid"),c.Xb(4,"ion-row"),c.Xb(5,"ion-col"),c.Sb(6,"ion-item",15),c.Wb(),c.Xb(7,"ion-col",16),c.Xb(8,"ion-item",17),c.Ic(9),c.Wb(),c.Wb(),c.Wb(),c.Xb(10,"ion-row"),c.Xb(11,"ion-col"),c.Sb(12,"ion-item",18),c.Wb(),c.Xb(13,"ion-col",16),c.Xb(14,"ion-item",17),c.Ic(15),c.Wb(),c.Wb(),c.Wb(),c.Xb(16,"ion-row"),c.Xb(17,"ion-col"),c.Sb(18,"ion-item",19),c.Wb(),c.Xb(19,"ion-col",16),c.Xb(20,"ion-item",17),c.Ic(21),c.Wb(),c.Wb(),c.Wb(),c.Xb(22,"ion-row"),c.Xb(23,"ion-col"),c.Sb(24,"ion-item",20),c.Wb(),c.Xb(25,"ion-col",16),c.Xb(26,"ion-item",17),c.Xb(27,"countdown",21),c.Ic(28,"$!m!:$!s!"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Gc(29,k,20,8,"div",5),c.Xb(30,"ion-row"),c.Xb(31,"ion-col"),c.Xb(32,"ion-button",22),c.fc("click",(function(){c.Ac(n);var e=c.jc();return e.showDetails=!e.showDetails})),c.Gc(33,w,1,0,"ion-icon",23),c.Gc(34,R,1,0,"ion-icon",24),c.Gc(35,N,1,0,"span",25),c.Gc(36,O,1,0,"span",26),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(37,"ion-item",27),c.Sb(38,"ion-label",28),c.Xb(39,"ion-input",29),c.fc("ngModelChange",(function(e){return c.Ac(n),c.jc().passphrase=e})),c.Wb(),c.Wb(),c.Sb(40,"br"),c.Gc(41,A,3,1,"ion-item",5),c.Xb(42,"ion-row"),c.Xb(43,"ion-col"),c.Xb(44,"ion-button",30),c.fc("click",(function(){return c.Ac(n),c.jc().cancel()})),c.Sb(45,"ion-icon",31),c.Sb(46,"span",32),c.Wb(),c.Wb(),c.Xb(47,"ion-col"),c.Xb(48,"ion-button",33),c.Sb(49,"ion-icon",34),c.Sb(50,"span",35),c.Wb(),c.Wb(),c.Wb(),c.Wb()}if(2&e){var r=c.yc(1),i=c.jc();c.Fb(9),c.Jc(i.verifiedToken.source),c.Fb(6),c.Jc(i.verifiedToken.target),c.Fb(6),c.Jc(i.hostname),c.Fb(6),c.pc("config",c.tc(13,D,i.leftTime)),c.Fb(2),c.pc("ngIf",i.showDetails),c.Fb(4),c.pc("ngIf",!i.showDetails),c.Fb(1),c.pc("ngIf",i.showDetails),c.Fb(1),c.pc("ngIf",!i.showDetails),c.Fb(1),c.pc("ngIf",i.showDetails),c.Fb(1),c.pc("ngClass",c.tc(15,_,!i.validPassword(i.passphrase))),c.Fb(2),c.pc("ngModel",i.passphrase),c.Fb(2),c.pc("ngIf",""==i.sourceSignature),c.Fb(7),c.pc("disabled",!r.form.valid||!i.validPassword(i.passphrase)||""==i.sourceSignature&&!i.noSigAgreed)}}var X=function(){var r=function(){function r(t,n,i,o,s,a,c){var u=this;e(this,r),this.router=t,this.appService=n,this.metaverseService=i,this.location=o,this.wallet=s,this.bitident=a,this.alertService=c,this.avatar="",this.avatars=[],this.avatarsAddress={},this.showDetails=!1,this.passphrase="",this.noSigAgreed=!1,this.leftTime=0,this.validPassword=function(e){return e&&e.length>0},this.onAvatarSelectChange=function(e){u.verifiedToken.target=e}}return n(r,[{key:"ionViewDidEnter",value:function(){this.token=history.state.data?history.state.data.token:"",this.loadAvatars()}},{key:"cancel",value:function(){this.router.navigate(["account","bitident"])}},{key:"loadAvatars",value:function(){var e=this;return this.metaverseService.listAvatars().then((function(t){0===t.length?e.alertService.showMessage("BITIDENT.MESSAGE.NO_AVATAR_TITLE","","BITIDENT.MESSAGE.NO_AVATAR_TITLE_BODY"):(t.forEach((function(t){e.avatarsAddress[t.symbol]=t.address,e.avatars.push(t.symbol)})),e.check(e.token))}))}},{key:"check",value:function(e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i,o,c=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==this.token&&Object(a.isString)(this.token)&&0!==this.token.trim().length){n.next=2;break}return n.abrupt("return",(this.location.back(),this.alertService.showError("BITIDENT.MESSAGE.TOKEN_MISSING","")));case 2:return n.next=4,this.alertService.showLoading();case 4:if(n.prev=4,r=s.Request.decode(e),this.sourceSignature=r.sourceSignature,!(r.version>1)){n.next=10;break}this.location.back(),this.alertService.showError("BITIDENT.MESSAGE.HIGHER_VERSION","version "+r.version),n.next=32;break;case 10:if(r.network===this.appService.network){n.next=14;break}this.location.back(),this.alertService.showError("BITIDENT.MESSAGE.DIFFERENT_NETWORK",r.network),n.next=32;break;case 14:if("auth"===r.type){n.next=18;break}this.location.back(),this.alertService.showError("BITIDENT.MESSAGE.TYPE_NOT_SUPPORTED",r.type),n.next=32;break;case 18:if(!(1e3*(r.time+r.timeout)<Date.now())){n.next=22;break}this.location.back(),this.alertService.showError("BITIDENT.MESSAGE.TIMEOUT",""),n.next=32;break;case 22:if(!r.target||-1!==this.avatars.indexOf(r.target)){n.next=26;break}this.location.back(),this.alertService.showError("BITIDENT.MESSAGE.UNKNOWN_AVATAR",r.target),n.next=32;break;case 26:return r.sourceSignature="",i=r.encode("hex"),n.next=30,this.metaverseService.getGlobalAvatar(r.source);case 30:o=n.sent.address,this.sourceSignature&&!s.Message.verify(i,o,t.from(this.sourceSignature,"hex"),r.source)?(this.location.back(),this.alertService.showError("BITIDENT.MESSAGE.WRONG_SIGNATURE",r.source)):(this.hostname=new URL(r.callback).hostname,this.verifiedToken=r,this.leftTime=r.time+r.timeout-Math.floor(Date.now())/1e3,this.verifiedToken.target||setTimeout((function(){return c.selectAvatar.open()}),100));case 32:n.next=37;break;case 34:n.prev=34,n.t0=n.catch(4),console.error(n.t0),this.location.back(),this.alertService.showError("BITIDENT.MESSAGE.WRONG_INCOMING_DATA",n.t0);case 37:this.alertService.stopLoading();case 38:case"end":return n.stop()}}),n,this,[[4,34]])})))}},{key:"signAndSend",value:function(e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.alertService.showLoading();case 3:return t.next=5,this.wallet.getWallet(e);case 5:return n=t.sent,t.next=8,n.findDeriveNodeByAddess(this.avatarsAddress[this.verifiedToken.target],200);case 8:return r=t.sent,t.next=11,s.Message.signPK(this.verifiedToken.encode("hex"),r.keyPair.d.toBuffer(32),r.keyPair.compressed,this.verifiedToken.target);case 11:return i=t.sent,this.verifiedToken.targetSignature=i.toString("hex"),this.verifiedToken.sourceSignature=this.sourceSignature,t.next=16,this.bitident.confirm(this.verifiedToken.callback,this.verifiedToken.encode("hex"));case 16:this.alertService.stopLoading(),this.router.navigate(["account","portfolio"]),this.alertService.showMessage("BITIDENT.MESSAGE.SIGNIN_SUCCESSFUL_TITLE","BITIDENT.MESSAGE.SIGNIN_SUCCESSFUL_BODY",""),t.next=36;break;case 21:if(t.prev=21,t.t0=t.catch(0),this.alertService.stopLoading(),!t.t0.message){t.next=36;break}t.t1=(console.error(t.t0.message),t.t0.message),t.next="ERR_DECRYPT_WALLET"===t.t1?27:"EXPIRED"===t.t1?29:"ERR_AUTH"===t.t1?31:"ERR_INVALID_SIGNATURE"===t.t1?33:35;break;case 27:return this.alertService.showError("BITIDENT.MESSAGE.PASSWORD_WRONG",""),t.abrupt("break",36);case 29:return this.alertService.showError("BITIDENT.MESSAGE.EXPIRED",""),t.abrupt("break",36);case 31:return this.alertService.showError("BITIDENT.MESSAGE.SEND_SIG_ERROR",""),t.abrupt("break",36);case 33:return this.alertService.showError("BITIDENT.MESSAGE.SEND_INVALID_SIGNATURE",""),t.abrupt("break",36);case 35:throw this.alertService.showError("BITIDENT.MESSAGE.SIGN",t.t0.message),Error("ERR_AUTH");case 36:case"end":return t.stop()}}),t,this,[[0,21]])})))}}]),r}();return r.\u0275fac=function(e){return new(e||r)(c.Rb(u.h),c.Rb(f.a),c.Rb(l.a),c.Rb(h.i),c.Rb(d.a),c.Rb(b.a),c.Rb(v.a))},r.\u0275cmp=c.Lb({type:r,selectors:[["app-confirm"]],viewQuery:function(e,t){var n;1&e&&c.Nc(E,!0),2&e&&c.xc(n=c.gc())&&(t.selectAvatar=n.first)},inputs:{token:"token"},decls:12,vars:2,consts:[["slot","start"],["defaultHref","/bitident"],["translate","BITIDENT.CONFIRM.TITLE"],[1,"top-info"],["align","center","translate","BITIDENT.CONFIRM.INFORMATION"],[4,"ngIf"],["lines","none",3,"ngSubmit",4,"ngIf"],["color","primary","floating",""],["name","avatar","multiple","false",3,"ngModel","okText","cancelText","ngModelChange","ionChange"],["selectAvatar",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["lines","none",3,"ngSubmit"],["signForm","ngForm"],["size","12","size-lg","6"],["lines","none","translate","BITIDENT.CONFIRM.VERIFY_SOURCE"],[1,"right"],["lines","none"],["lines","none","translate","BITIDENT.CONFIRM.VERIFY_AVATAR"],["lines","none","translate","BITIDENT.CONFIRM.VERIFY_HOST"],["lines","none","translate","BITIDENT.CONFIRM.VERIFY_REMAINING_TIME"],[3,"config"],[1,"right-buttons",3,"click"],["slot","start","name","arrow-down",4,"ngIf"],["slot","start","name","arrow-up",4,"ngIf"],["translate","BITIDENT.CONFIRM.SHOW_DETAILS",4,"ngIf"],["translate","BITIDENT.CONFIRM.HIDE_DETAILS",4,"ngIf"],[3,"ngClass"],["color","primary","position","floating","translate","BITIDENT.CONFIRM.PASSWORD"],["name","passphrase","type","password","required","",3,"ngModel","ngModelChange"],["color","danger","expand","full","fill","outline","shape","round",3,"click"],["slot","start","name","close"],["translate","BITIDENT.CONFIRM.BUTTON.CANCEL"],["type","submit","expand","full","fill","outline","shape","round","color","primary",3,"disabled"],["slot","start","name","send"],["translate","BITIDENT.CONFIRM.BUTTON.NEXT"],["lines","none","translate","BITIDENT.CONFIRM.VERIFY_CALLBACK"],["lines","none","translate","BITIDENT.CONFIRM.VERIFY_TIME_OF_REQUEST"],["lines","none","translate","BITIDENT.CONFIRM.VERIFY_REQUEST_DURATION"],["lines","none","translate","BITIDENT.CONFIRM.VERIFY_REQUEST_DURATION_VALUE",3,"translateParams"],["slot","start","name","arrow-down"],["slot","start","name","arrow-up"],["translate","BITIDENT.CONFIRM.SHOW_DETAILS"],["translate","BITIDENT.CONFIRM.HIDE_DETAILS"],["id","disclaimer-agree-label","text-wrap","","translate","BITIDENT.CONFIRM.NO_SIG_AGREE"],["name","no_sig_agreed","id","no-sig-agree",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.Xb(0,"ion-header"),c.Xb(1,"ion-toolbar"),c.Xb(2,"ion-buttons",0),c.Sb(3,"ion-back-button",1),c.Wb(),c.Sb(4,"ion-title",2),c.Wb(),c.Wb(),c.Xb(5,"ion-content"),c.Xb(6,"ion-grid"),c.Xb(7,"ion-row",3),c.Xb(8,"ion-col"),c.Sb(9,"p",4),c.Wb(),c.Wb(),c.Gc(10,T,9,11,"ion-item",5),c.Gc(11,M,51,17,"form",6),c.Wb(),c.Wb()),2&e&&(c.Fb(10),c.pc("ngIf",t.verifiedToken&&!t.verifiedToken.target),c.Fb(1),c.pc("ngIf",t.verifiedToken&&t.verifiedToken.target))},directives:[g.u,g.X,g.j,g.f,g.g,g.V,p.a,g.r,g.t,g.K,g.q,h.m,g.x,g.z,g.N,g.gb,I.i,I.l,h.l,g.O,I.p,I.j,I.k,g.k,m.a,g.i,h.k,g.w,g.hb,I.n,g.v,g.p,g.c],pipes:[p.d,h.e],styles:["ion-item[_ngcontent-%COMP%]{--min-height:16px}"]}),r}()}).call(this,i("HDXh").Buffer)},Ej91:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("0ZLj");t.Request=r.Request;var i=n("Z8qY");t.Message=i.Message},EyXv:function(t,n,r){"use strict";r.r(n),r.d(n,"ConfirmPageModule",(function(){return g}));var i,o,s=r("ofXK"),a=r("3Pt+"),c=r("TEn/"),u=r("tyNb"),f=r("7BdR"),l=r("fXoL"),h=[{path:"",component:f.a}],d=((i=function t(){e(this,t)}).\u0275mod=l.Pb({type:i}),i.\u0275inj=l.Ob({factory:function(e){return new(e||i)},imports:[[u.j.forChild(h)],u.j]}),i),b=r("sYmb"),v=r("z+xu"),g=((o=function t(){e(this,t)}).\u0275mod=l.Pb({type:o}),o.\u0275inj=l.Ob({factory:function(e){return new(e||o)},imports:[[s.c,a.e,c.Y,v.b,b.c.forChild(),d]]}),o)},QVnb:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("nU2i");function i(e){return r.encode(e)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{offset:0},n=r.decode(e,t.offset);return t.offset+=i(n).length,n}t.encodeVarStr=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8",i=e.from(t,n);return e.concat([r.encode(i.length),i])},t.decodeVarStr=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{offset:0},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"utf-8",i=o(t,n),s=t.slice(n.offset,n.offset+i).toString(r);return n.offset+=e.from(s,r).length,s},t.encodeVarInt=i,t.decodeVarInt=o}).call(this,n("HDXh").Buffer)},Xe4H:function(t,r,i){"use strict";(function(t){Object.defineProperty(r,"__esModule",{value:!0});var o=i("QVnb");r.REQUEST_TYPE_AUTH=1,r.MetaverseRequest=function(){function r(t,n){e(this,r),this.version=t,this.network=n}return n(r,[{key:"encodeBuffer",value:function(e){return t.concat([o.encodeVarInt(this.version),o.encodeVarInt(this.getNetworkId()),o.encodeVarInt(e)])}},{key:"encode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"buffer",t=this.encodeBuffer();return"buffer"!==e?t.toString(e):t}},{key:"getNetworkId",value:function(){switch(this.network){case"mainnet":return 1;case"testnet":return 2}return 0}}]),r}()}).call(this,i("HDXh").Buffer)},Z8qY:function(t,r,i){"use strict";(function(t){Object.defineProperty(r,"__esModule",{value:!0});var o=i("p0sm"),s=i("b3gk"),a=i("IzB8"),c=i("pQ88");r.Message=function(){function r(){e(this,r)}return n(r,null,[{key:"encodeSignature",value:function(e,n,r){return r&&(n+=4),t.concat([t.alloc(1,n+27),e])}},{key:"decodeSignature",value:function(e){if(65!==e.length)throw new Error("Invalid signature length");var t=e.readUInt8(0)-27;if(t>7)throw new Error("Invalid signature parameter");return{compressed:!!(4&t),recovery:3&t,signature:e.slice(1)}}},{key:"verify",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Metaverse";t.isBuffer(r)||(r=t.from(r,"hex"));var c=this.decodeSignature(r),u=o.magicHash(e,"\x18".concat(i," Signed Message:\n")),f=a.recover(u,c.signature,c.recovery,c.compressed),l=o.hash160(f),h=s.decode(n).slice(1);return t.isBuffer(h)||(h=t.from(h,"hex")),0==t.compare(l,h)}},{key:"signWIF",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Metaverse",r=c.decode(t);return this.signPK(e,r.privateKey,r.compressed,n)}},{key:"signPK",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Metaverse",i=o.magicHash(e,"\x18".concat(r," Signed Message:\n")),s=a.sign(i,t);return this.encodeSignature(s.signature,s.recovery,n)}}]),r}()}).call(this,i("HDXh").Buffer)},onos:function(t,r,i){"use strict";i.d(r,"a",(function(){return a}));var o=i("fXoL"),s=i("tk/3"),a=function(){var t=function(){function t(n){e(this,t),this.http=n}return n(t,[{key:"confirm",value:function(e,t){return this.http.post(e,{token:t}).toPromise().catch((function(e){throw console.error(e._body),Error(e._body)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.bc(s.a))},t.\u0275prov=o.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},p0sm:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("mObS"),i=n("nU2i");function o(e){return r("sha256").update(e).digest()}function s(e){return o(o(e))}t.sha256=o,t.hash256=s,t.hash160=function(e){return r("ripemd160").update(o(e)).digest()},t.magicHash=function(t,n){e.isBuffer(n=n||"\x18Metaverse Signed Message:\n")||(n=e.from(n,"utf8"));var r=i.encodingLength(t.length),o=e.allocUnsafe(n.length+r+t.length);return n.copy(o,0),i.encode(t.length,o,n.length),o.write(t,n.length+r),s(o)}}).call(this,n("HDXh").Buffer)},"z+xu":function(t,r,i){"use strict";i.d(r,"a",(function(){return d})),i.d(r,"b",(function(){return b}));var o=i("fXoL"),s=i("ofXK");function a(e,t){if(1&e&&(o.Vb(0),o.Sb(1,"span",2),o.Ub()),2&e){var n=o.jc();o.Fb(1),o.pc("innerHTML",n.i.text,o.Bc)}}function c(e,t){1&e&&o.Tb(0)}var u=function(e){return{$implicit:e}},f=function(e){return e[e.ing=0]="ing",e[e.pause=1]="pause",e[e.stop=2]="stop",e[e.done=3]="done",e}({}),l=function(){var t=function(){function t(n){e(this,t),this.ngZone=n,this.fns=[],this.commands=[],this.ing=!1}return n(t,[{key:"start",value:function(){var e=this;!0!==this.ing&&(this.ing=!0,this.nextTime=+new Date,this.ngZone.runOutsideAngular((function(){e.process()})))}},{key:"process",value:function(){for(var e=this;this.commands.length;)this.commands.shift()();var t=+new Date-this.nextTime,n=1+Math.floor(t/100);t=100-t%100,this.nextTime+=100*n;for(var r=0,i=this.fns.length;r<i;r+=2){var o=this.fns[r+1];if(0===o)this.fns[r](n);else{o+=2*n-1;var s=Math.floor(o/20);s>0&&this.fns[r](s),this.fns[r+1]=o%20+1}}this.ing&&setTimeout((function(){return e.process()}),t)}},{key:"add",value:function(e,t){var n=this;return this.commands.push((function(){n.fns.push(e),n.fns.push(1e3===t?1:0),n.ing=!0})),this}},{key:"remove",value:function(e){var t=this;return this.commands.push((function(){var n=t.fns.indexOf(e);-1!==n&&t.fns.splice(n,2),t.ing=t.fns.length>0})),this}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.bc(o.E))},t.\u0275prov=o.Nb({token:t,factory:t.\u0275fac}),t}(),h=function(){var t=function t(n){var r=this;e(this,t),this.locale=n,this.demand=!1,this.leftTime=0,this.format="HH:mm:ss",this.timezone="+0000",this.formatDate=function(e){var t=e.date,n=e.formatStr,i=e.timezone;return Object(s.s)(new Date(t),n,r.locale,i||r.timezone||"+0000")}};return t.\u0275fac=function(e){return new(e||t)(o.bc(o.y))},t.\u0275prov=Object(o.Nb)({factory:function(){return new t(Object(o.bc)(o.y))},token:t,providedIn:"root"}),t}(),d=function(){var t=function(){function t(n,r,i,s,a){e(this,t),this.locale=n,this.timer=r,this.defCog=i,this.cdr=s,this.ngZone=a,this.frequency=1e3,this._notify={},this.status=f.ing,this.isDestroy=!1,this.i={},this.left=0,this.event=new o.q}return n(t,[{key:"begin",value:function(){this.status=f.ing,this.callEvent("start")}},{key:"restart",value:function(){this.status!==f.stop&&this.destroy(),this.init(),this.callEvent("restart")}},{key:"stop",value:function(){this.status!==f.stop&&(this.status=f.stop,this.destroy(),this.callEvent("stop"))}},{key:"pause",value:function(){this.status!==f.stop&&this.status!==f.pause&&(this.status=f.pause,this.callEvent("pause"))}},{key:"resume",value:function(){this.status!==f.stop&&this.status===f.pause&&(this.status=f.ing,this.callEvent("resume"))}},{key:"callEvent",value:function(e){this.event.emit({action:e,left:this.left,status:this.status,text:this.i.text})}},{key:"init",value:function(){var e=this,t=this.locale,n=this.defCog,r=this.config=Object.assign(Object.assign(Object.assign({},new h(t)),n),this.config),i=this.frequency=~r.format.indexOf("S")?100:1e3;this.status=r.demand?f.pause:f.ing,this.getLeft();var o=this.reflow;this.reflow=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.apply(e,[t,n])},Array.isArray(r.notify)&&r.notify.forEach((function(t){if(t<1)throw new Error("The notify config must be a positive integer.");t*=1e3,e._notify[t-=t%i]=!0})),this.timer.add(this.reflow,i).start(),this.reflow(0,!0)}},{key:"destroy",value:function(){return this.timer.remove(this.reflow),this}},{key:"reflow",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.isDestroy){var r=this.status,i=this.config,o=this._notify;if(n||r===f.ing){var s=this.left=this.left-this.frequency*t;this.i={value:s,text:i.formatDate({date:s,formatStr:i.format,timezone:i.timezone})},"function"==typeof i.prettyText&&(this.i.text=i.prettyText(this.i.text)),this.cdr.detectChanges(),(0===i.notify||o[s])&&this.ngZone.run((function(){e.callEvent("notify")})),s<1&&this.ngZone.run((function(){e.status=f.done,e.callEvent("done"),e.destroy()}))}}}},{key:"getLeft",value:function(){var e=this.config,t=this.frequency,n=1e3*e.leftTime,r=e.stopTime;!n&&r&&(n=r-(new Date).getTime()),this.left=n-n%t}},{key:"ngOnInit",value:function(){this.init(),this.config.demand||this.begin()}},{key:"ngOnDestroy",value:function(){this.isDestroy=!0,this.destroy()}},{key:"ngOnChanges",value:function(e){e.config.firstChange||this.restart()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Rb(o.y),o.Rb(l),o.Rb(h),o.Rb(o.i),o.Rb(o.E))},t.\u0275cmp=o.Lb({type:t,selectors:[["countdown"]],hostVars:2,hostBindings:function(e,t){2&e&&o.Jb("count-down",!0)},inputs:{config:"config",render:"render"},outputs:{event:"event"},features:[o.Db],decls:2,vars:5,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(e,t){1&e&&(o.Gc(0,a,2,1,"ng-container",0),o.Gc(1,c,1,0,"ng-container",1)),2&e&&(o.pc("ngIf",!t.render),o.Fb(1),o.pc("ngTemplateOutlet",t.render)("ngTemplateOutletContext",o.tc(3,u,t.i)))},directives:[s.m,s.n],encapsulation:2,changeDetection:0}),t}(),b=function(){var t=function t(){e(this,t)};return t.\u0275mod=o.Pb({type:t}),t.\u0275inj=o.Ob({factory:function(e){return new(e||t)},providers:[l],imports:[[s.c]]}),t}()}}])}();