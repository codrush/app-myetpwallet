(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{JLTk:function(t,e,n){"use strict";n.r(e),n.d(e,"MstPageModule",(function(){return x}));var i=n("ofXK"),s=n("3Pt+"),o=n("TEn/"),c=n("tyNb"),r=n("mrSG"),a=n("fXoL"),l=n("BZA/"),d=n("sYmb"),b=n("JvOL"),u=n("q5gJ");const f=["slides"];function m(t,e){if(1&t){const t=a.Yb();a.Xb(0,"ion-buttons",24),a.Xb(1,"ion-button",25),a.Sb(2,"ion-icon",26),a.Wb(),a.Xb(3,"ion-button",27),a.fc("click",(function(){return a.Ac(t),a.jc().startReordering()})),a.Sb(4,"ion-icon",28),a.Wb(),a.Wb()}}function h(t,e){if(1&t){const t=a.Yb();a.Xb(0,"ion-buttons",24),a.Xb(1,"ion-button",27),a.fc("click",(function(){return a.Ac(t),a.jc().endReordering()})),a.Sb(2,"ion-icon",29),a.Wb(),a.Wb()}}function g(t,e){1&t&&a.Sb(0,"ion-col",30)}function p(t,e){1&t&&a.Sb(0,"ion-col",31)}function M(t,e){1&t&&a.Sb(0,"ion-col",32)}function S(t,e){1&t&&a.Sb(0,"div",33)}function v(t,e){1&t&&a.Sb(0,"div",34)}function y(t,e){1&t&&a.Sb(0,"ion-spinner",35)}const I=function(t){return{"default-logo":t}};function T(t,e){if(1&t){const t=a.Yb();a.Xb(0,"ion-item",38),a.fc("click",(function(){a.Ac(t);const e=a.jc().$implicit;return a.jc(2).clickMst(e.symbol)})),a.Xb(1,"img",39),a.fc("error",(function(e){return a.Ac(t),a.jc(3).errorImg(e)})),a.Wb(),a.Xb(2,"ion-label",40),a.Ic(3),a.Wb(),a.Xb(4,"ion-col"),a.Ic(5),a.kc(6,"format"),a.Wb(),a.Xb(7,"ion-col",41),a.Ic(8),a.kc(9,"format"),a.Wb(),a.Xb(10,"ion-col",41),a.Ic(11),a.kc(12,"format"),a.Wb(),a.Wb()}if(2&t){const t=a.jc().$implicit;a.Fb(1),a.pc("src",t.icon,a.Cc)("ngClass",a.tc(15,I,"default_mst"==t.icon)),a.Fb(2),a.Jc(t.symbol),a.Fb(2),a.Jc(a.mc(6,6,t.balance.total||0,t.balance.decimals)),a.Fb(3),a.Jc(a.mc(9,9,t.balance.unconfirmed||0,t.balance.decimals)),a.Fb(3),a.Jc(a.mc(12,12,t.balance.frozen||0,t.balance.decimals))}}function F(t,e){1&t&&a.Sb(0,"div",44)}function X(t,e){if(1&t){const t=a.Yb();a.Xb(0,"ion-button",27),a.fc("click",(function(){return a.Ac(t),a.jc(2).$implicit.hidden=!0})),a.Sb(1,"ion-icon",45),a.Wb()}}function O(t,e){if(1&t){const t=a.Yb();a.Xb(0,"ion-button",27),a.fc("click",(function(){return a.Ac(t),a.jc(2).$implicit.hidden=!1})),a.Sb(1,"ion-icon",46),a.Wb()}}function W(t,e){if(1&t){const t=a.Yb();a.Xb(0,"ion-item"),a.Xb(1,"img",39),a.fc("error",(function(e){return a.Ac(t),a.jc(3).errorImg(e)})),a.Wb(),a.Xb(2,"ion-label",40),a.Ic(3),a.Wb(),a.Xb(4,"ion-buttons",24),a.Gc(5,F,1,0,"div",42),a.Gc(6,X,2,0,"ion-button",43),a.Gc(7,O,2,0,"ion-button",43),a.Wb(),a.Sb(8,"ion-reorder",24),a.Wb()}if(2&t){const t=a.jc().$implicit;a.Fb(1),a.pc("src",t.icon,a.Cc)("ngClass",a.tc(6,I,"default_mst"==t.icon)),a.Fb(2),a.Jc(t.symbol),a.Fb(2),a.pc("ngIf",!t.deletable),a.Fb(1),a.pc("ngIf",!t.hidden),a.Fb(1),a.pc("ngIf",t.hidden)}}function k(t,e){if(1&t&&(a.Xb(0,"div"),a.Gc(1,T,13,17,"ion-item",37),a.Gc(2,W,9,8,"ion-item",18),a.Wb()),2&t){const t=e.$implicit,n=a.jc(2);a.Fb(1),a.pc("ngIf","default"==n.status&&!t.hidden),a.Fb(1),a.pc("ngIf","edit"==n.status)}}const j=function(){return["order","-1"]};function G(t,e){if(1&t){const t=a.Yb();a.Xb(0,"ion-reorder-group",36),a.fc("ionItemReorder",(function(e){return a.Ac(t),a.jc().reorder(e)})),a.Gc(1,k,3,2,"div",22),a.kc(2,"orderBy"),a.Wb()}if(2&t){const t=a.jc();a.Fb(1),a.pc("ngForOf",a.mc(2,1,t.msts,a.sc(4,j)))}}function C(t,e){1&t&&a.Sb(0,"p",47)}function L(t,e){1&t&&a.Gc(0,C,1,0,"ng-template")}function A(t,e){if(1&t){const t=a.Yb();a.Xb(0,"ion-item"),a.Xb(1,"img",9),a.fc("error",(function(e){return a.Ac(t),a.jc().errorImg(e)})),a.Wb(),a.Xb(2,"ion-label",40),a.Ic(3),a.Wb(),a.Xb(4,"ion-col"),a.Ic(5),a.Wb(),a.Xb(6,"ion-buttons",24),a.Xb(7,"ion-button",48),a.fc("click",(function(){a.Ac(t);const n=e.$implicit;return a.jc().addMst(n)})),a.Sb(8,"ion-icon",49),a.Wb(),a.Wb(),a.Wb()}if(2&t){const t=e.$implicit,n=a.jc();a.Fb(1),a.pc("src",n.icons.MST[t.symbol]||"assets/icon/default_mst.png",a.Cc),a.Fb(2),a.Jc(t.symbol),a.Fb(2),a.Jc(t.description),a.Fb(2),a.pc("disabled",-1!==n.order.indexOf(t.symbol))}}function w(t,e){1&t&&a.Sb(0,"ion-spinner",35)}function R(t,e){if(1&t){const t=a.Yb();a.Xb(0,"div",50),a.Xb(1,"ion-button",51),a.fc("click",(function(){return a.Ac(t),a.jc().getMoreMsts()})),a.Sb(2,"ion-icon",52),a.Sb(3,"span",53),a.Wb(),a.Wb()}if(2&t){const t=a.jc();a.Fb(1),a.pc("disabled",t.loadingMoreMsts)}}const P=[{path:"",component:(()=>{class t{constructor(t,e){this.metaverseService=t,this.router=e,this.segment=0,this.icons={MST:[],MIT:[]},this.whitelist=[],this.tickers={},this.msts=[],this.reorderingMsts=[],this.allMsts=[],this.loading=!0,this.loadingMoreMsts=!0,this.order=[],this.mstsFullyLoaded=!1,this.status="default",this.errorImg=t=>t.target.remove()}ngOnInit(){this.loadTickers(),this.heightSubscription=this.metaverseService.height$.subscribe(()=>{this.showBalances()}),this.initGetMsts()}ngOnDestroy(){this.heightSubscription&&this.heightSubscription.unsubscribe()}loadTickers(){return Object(r.a)(this,void 0,void 0,(function*(){[this.base,this.tickers]=yield this.metaverseService.getBaseAndTickers()}))}setSegment(){return Object(r.a)(this,void 0,void 0,(function*(){this.segment=yield this.slides.getActiveIndex()}))}showBalances(){return Object(r.a)(this,void 0,void 0,(function*(){try{if("default"===this.status){this.balances=yield this.metaverseService.getBalances(),yield this.metaverseService.addAssetsToAssetOrder(Object.keys(this.balances.MST)),this.order=yield this.metaverseService.assetOrder();const t=yield this.metaverseService.getHiddenMst();this.icons=yield this.metaverseService.getDefaultIcon(),this.msts=[],Object.keys(this.balances.MST).forEach(e=>{const n={decimals:this.balances.MST[e].decimals,available:this.balances.MST[e].available||0,unconfirmed:this.balances.MST[e].unconfirmed||0,frozen:this.balances.MST[e].frozen||0,total:0};n.total=n.available+n.unconfirmed+n.frozen,this.msts.push({symbol:e,balance:n,icon:this.icons.MST[e]||"assets/icon/default_mst.png",hidden:-1!==t.indexOf(e),order:this.order.indexOf(e),deletable:!1})});const e={decimals:0,available:0,unconfirmed:0,frozen:0,total:0};this.order.forEach(n=>{this.balances.MST[n]||this.msts.push({symbol:n,balance:e,icon:this.icons.MST[n]||"assets/icon/default_mst.png",hidden:-1!==t.indexOf(n),order:this.order.indexOf(n),deletable:!0})}),this.loading=!1}}catch(t){console.error(t),console.log("Can't load balances")}}))}startReordering(){document.getElementById("reorder").disabled=!1,this.status="edit",this.reorderingMsts=this.msts}reorder(t){const e=this.reorderingMsts.splice(t.detail.from,1)[0];this.reorderingMsts.splice(t.detail.to,0,e),t.detail.complete()}endReordering(){return Object(r.a)(this,void 0,void 0,(function*(){document.getElementById("reorder").disabled=!0,this.status="default",this.msts=this.reorderingMsts;const t=[],e=[];this.msts.forEach(n=>{t.push(n.symbol),n.hidden&&e.push(n.symbol)}),yield this.metaverseService.setAssetOrder(t),yield this.metaverseService.setHiddenMst(e)}))}clickMst(t){"default"===this.status&&this.router.navigate(["/account","mst",t])}initGetMsts(){return Object(r.a)(this,void 0,void 0,(function*(){this.allMsts=[],this.loadingMoreMsts=!0;const[t,e]=yield Promise.all([this.metaverseService.listSpecialMsts(),this.metaverseService.listMsts()]);this.allMsts=t.concat(e),this.loadingMoreMsts=!1}))}getMoreMsts(){return Object(r.a)(this,void 0,void 0,(function*(){this.loadingMoreMsts=!0;const t=this.allMsts[this.allMsts.length-1]?this.allMsts[this.allMsts.length-1].symbol:void 0,e=yield this.metaverseService.listMsts(t);e&&e.length<20&&(this.mstsFullyLoaded=!0),this.allMsts=this.allMsts.concat(e),this.loadingMoreMsts=!1}))}addMst(t){return Object(r.a)(this,void 0,void 0,(function*(){this.msts.push({symbol:t.symbol,balance:{decimals:t.decimals,available:0,unconfirmed:0,frozen:0,total:0},icon:this.icons.MST[t.symbol]||"assets/icon/default_mst.png",hidden:!1,order:this.msts.length,deletable:!0}),this.order.push(t.symbol),yield this.metaverseService.addAssetsToAssetOrder([t.symbol])}))}}return t.\u0275fac=function(e){return new(e||t)(a.Rb(l.a),a.Rb(c.h))},t.\u0275cmp=a.Lb({type:t,selectors:[["app-mst"]],viewQuery:function(t,e){var n;1&t&&a.Nc(f,!0),2&t&&a.xc(n=a.gc())&&(e.slides=n.first)},decls:35,vars:16,consts:[["slot","start"],["translate","MST.TITLE"],["slot","end",4,"ngIf"],["lines","none"],["color","primary",3,"ngModel","ngModelChange","ionChange"],["value","0","translate","MST.GRID.TITLE"],["value","1","translate","MST.ALL.TITLE"],["pager","false",3,"options","ionSlideWillChange"],["slides",""],[1,"coinlogo",3,"src","error"],["translate","MST.GRID.SYMBOL",1,"symbol"],["translate","MST.GRID.TOTAL",4,"ngIf"],["class","ion-hide-sm-down","translate","MST.GRID.UNCONFIRMED",4,"ngIf"],["class","ion-hide-sm-down","translate","MST.GRID.FROZEN",4,"ngIf"],["class","empty-space-header-edit",4,"ngIf"],["class","empty-space-header-default",4,"ngIf"],["name","dots",4,"ngIf"],["id","reorder",3,"ionItemReorder",4,"ngIf"],[4,"ngIf"],["translate","MST.ALL.SYMBOL",1,"symbol"],["translate","MST.ALL.DESCRIPTION"],[1,"empty-space-header-all"],[4,"ngFor","ngForOf"],["class","center",4,"ngIf"],["slot","end"],["routerLink","/account/mst/create"],["slot","icon-only","name","add"],[3,"click"],["slot","icon-only","name","pencil"],["slot","icon-only","name","checkmark"],["translate","MST.GRID.TOTAL"],["translate","MST.GRID.UNCONFIRMED",1,"ion-hide-sm-down"],["translate","MST.GRID.FROZEN",1,"ion-hide-sm-down"],[1,"empty-space-header-edit"],[1,"empty-space-header-default"],["name","dots"],["id","reorder",3,"ionItemReorder"],["button","","detail","",3,"click",4,"ngIf"],["button","","detail","",3,"click"],[1,"coinlogo",3,"src","ngClass","error"],[1,"symbol"],[1,"ion-hide-sm-down"],["class","empty-space-button",4,"ngIf"],[3,"click",4,"ngIf"],[1,"empty-space-button"],["color","black","slot","icon-only","name","eye"],["color","black","slot","icon-only","name","eye-off"],["translate","NO_MST"],[3,"disabled","click"],["color","black","slot","icon-only","name","add"],[1,"center"],["color","primary","fill","outline","shape","round",3,"disabled","click"],["slot","start","name","add"],["translate","MST.ALL.LOAD_MORE"]],template:function(t,e){if(1&t){const t=a.Yb();a.Xb(0,"ion-header"),a.Xb(1,"ion-toolbar"),a.Xb(2,"ion-buttons",0),a.Sb(3,"ion-menu-button"),a.Wb(),a.Sb(4,"ion-title",1),a.Gc(5,m,5,0,"ion-buttons",2),a.Gc(6,h,3,0,"ion-buttons",2),a.Wb(),a.Wb(),a.Xb(7,"ion-content"),a.Xb(8,"ion-item",3),a.Xb(9,"ion-segment",4),a.fc("ngModelChange",(function(t){return e.segment=t}))("ionChange",(function(){return a.Ac(t),a.yc(13).slideTo(e.segment)})),a.Sb(10,"ion-segment-button",5),a.Sb(11,"ion-segment-button",6),a.Wb(),a.Wb(),a.Xb(12,"ion-slides",7,8),a.fc("ionSlideWillChange",(function(){return e.setSegment()})),a.Xb(14,"ion-slide"),a.Xb(15,"ion-item"),a.Xb(16,"img",9),a.fc("error",(function(t){return e.errorImg(t)})),a.Wb(),a.Sb(17,"ion-label",10),a.Gc(18,g,1,0,"ion-col",11),a.Gc(19,p,1,0,"ion-col",12),a.Gc(20,M,1,0,"ion-col",13),a.Gc(21,S,1,0,"div",14),a.Gc(22,v,1,0,"div",15),a.Wb(),a.Gc(23,y,1,0,"ion-spinner",16),a.Gc(24,G,3,5,"ion-reorder-group",17),a.Gc(25,L,1,0,void 0,18),a.Wb(),a.Xb(26,"ion-slide"),a.Xb(27,"ion-item"),a.Xb(28,"img",9),a.fc("error",(function(t){return e.errorImg(t)})),a.Wb(),a.Sb(29,"ion-label",19),a.Sb(30,"ion-col",20),a.Sb(31,"div",21),a.Wb(),a.Gc(32,A,9,4,"ion-item",22),a.Gc(33,w,1,0,"ion-spinner",16),a.Gc(34,R,4,1,"div",23),a.Wb(),a.Wb(),a.Wb()}2&t&&(a.Fb(5),a.pc("ngIf","default"==e.status),a.Fb(1),a.pc("ngIf","edit"==e.status),a.Fb(3),a.pc("ngModel",e.segment),a.Fb(7),a.pc("src","assets/icon/default_mst.png",a.Cc),a.Fb(2),a.pc("ngIf","default"==e.status),a.Fb(1),a.pc("ngIf","default"==e.status),a.Fb(1),a.pc("ngIf","default"==e.status),a.Fb(1),a.pc("ngIf","edit"==e.status),a.Fb(1),a.pc("ngIf","default"==e.status),a.Fb(1),a.pc("ngIf",e.loading),a.Fb(1),a.pc("ngIf",null==e.msts?null:e.msts.length),a.Fb(1),a.pc("ngIf",!e.loading&&e.msts&&0==e.msts.length),a.Fb(3),a.pc("src","assets/icon/default_mst.png",a.Cc),a.Fb(4),a.pc("ngForOf",e.allMsts),a.Fb(1),a.pc("ngIf",e.loadingMoreMsts),a.Fb(1),a.pc("ngIf",!e.mstsFullyLoaded))},directives:[o.u,o.X,o.j,o.C,o.V,d.a,i.m,o.r,o.x,o.L,o.gb,s.i,s.l,o.M,o.Q,o.P,o.z,o.q,i.l,o.i,o.fb,c.i,o.v,o.R,o.I,i.k,o.H],pipes:[b.a,u.a],styles:[".coinlogo[_ngcontent-%COMP%]{width:28px;margin-right:20px}.empty-space-header-edit[_ngcontent-%COMP%]{width:212px}.empty-space-header-default[_ngcontent-%COMP%]{width:20px}.empty-space-button[_ngcontent-%COMP%]{width:48px}.empty-space-header-all[_ngcontent-%COMP%]{width:80px}ion-slide[_ngcontent-%COMP%]{display:block}"]}),t})()},{path:"create",loadChildren:()=>Promise.all([n.e(0),n.e(44)]).then(n.bind(null,"ntM1")).then(t=>t.CreatePageModule)},{path:":symbol",loadChildren:()=>n.e(13).then(n.bind(null,"1+b2")).then(t=>t.DetailsPageModule)}];let D=(()=>{class t{}return t.\u0275mod=a.Pb({type:t}),t.\u0275inj=a.Ob({factory:function(e){return new(e||t)},imports:[[c.j.forChild(P)],c.j]}),t})();var _=n("iTUp");let x=(()=>{class t{}return t.\u0275mod=a.Pb({type:t}),t.\u0275inj=a.Ob({factory:function(e){return new(e||t)},imports:[[i.c,s.e,o.Y,_.a,d.c.forChild(),D]]}),t})()},iTUp:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("ofXK"),s=n("fXoL");let o=(()=>{class t{}return t.\u0275mod=s.Pb({type:t}),t.\u0275inj=s.Ob({factory:function(e){return new(e||t)},imports:[[i.c]]}),t})()},q5gJ:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("fXoL");let s=(()=>{class t{transform(t,e){return(t/Math.pow(10,e)).toLocaleString(void 0,{maximumFractionDigits:e})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.Qb({name:"format",type:t,pure:!0}),t})()}}]);