!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,c=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(s){r=!0,c=s}finally{try{i||null==o.return||o.return()}finally{if(r)throw c}}return n}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{f4Sq:function(t,i,c){"use strict";c.r(i),c.d(i,"PortfolioPageModule",(function(){return B}));var a=c("ofXK"),o=c("3Pt+"),s=c("TEn/"),b=c("tyNb"),l=c("mrSG"),u=c("itXk"),f=c("fXoL"),m=c("sYmb"),d=c("BZA/"),h=c("q5gJ"),p=c("JvOL");function v(e,t){1&e&&f.Sb(0,"ion-spinner",11)}function g(e,t){if(1&e&&(f.Xb(0,"div",19),f.Ic(1),f.kc(2,"number"),f.Wb()),2&e){var n=f.jc(2);f.Fb(1),f.Lc(" \u2248",n.base," ",f.mc(2,2,n.fiatValue(n.etpBalance.total||0,"ETP",8),"1.0-2")," ")}}function k(e,t){if(1&e&&(f.Xb(0,"div",19),f.Ic(1),f.kc(2,"number"),f.Wb()),2&e){var n=f.jc(2);f.Fb(1),f.Lc(" \u2248",n.base," ",f.mc(2,2,n.fiatValue(n.etpBalance.unconfirmed||0,"ETP",8),"1.0-2")," ")}}function T(e,t){if(1&e&&(f.Xb(0,"div",19),f.Ic(1),f.kc(2,"number"),f.Wb()),2&e){var n=f.jc(2);f.Fb(1),f.Lc(" \u2248",n.base," ",f.mc(2,2,n.fiatValue(n.etpBalance.frozen||0,"ETP",8),"1.0-2")," ")}}function y(e,t){if(1&e&&(f.Xb(0,"div",19),f.Ic(1),f.kc(2,"number"),f.Wb()),2&e){var n=f.jc(2).$implicit,i=f.jc(2);f.Fb(1),f.Lc(" \u2248",i.base," ",f.mc(2,2,i.fiatValue(n.balance.total||0,n.symbol,n.balance.decimals),"1.0-2")," ")}}function S(e,t){if(1&e&&(f.Xb(0,"div",19),f.Ic(1),f.kc(2,"number"),f.Wb()),2&e){var n=f.jc(2).$implicit,i=f.jc(2);f.Fb(1),f.Lc(" \u2248",i.base," ",f.mc(2,2,i.fiatValue(n.balance.unconfirmed||0,n.symbol,n.balance.decimals),"1.0-2")," ")}}function I(e,t){if(1&e&&(f.Xb(0,"div",19),f.Ic(1),f.kc(2,"number"),f.Wb()),2&e){var n=f.jc(2).$implicit,i=f.jc(2);f.Fb(1),f.Lc(" \u2248",i.base," ",f.mc(2,2,i.fiatValue(n.balance.frozen||0,n.symbol,n.balance.decimals),"1.0-2")," ")}}var P=function(e){return{"default-logo":e}};function w(e,t){if(1&e){var n=f.Yb();f.Xb(0,"ion-item",12),f.Xb(1,"img",21),f.fc("error",(function(e){return f.Ac(n),f.jc(3).errorImg(e)})),f.Wb(),f.Xb(2,"ion-label",13),f.Ic(3),f.Wb(),f.Xb(4,"ion-col",14),f.Ic(5),f.kc(6,"format"),f.Gc(7,y,3,5,"div",15),f.Wb(),f.Xb(8,"ion-col",16),f.Ic(9),f.kc(10,"format"),f.Gc(11,S,3,5,"div",15),f.Wb(),f.Xb(12,"ion-col",16),f.Ic(13),f.kc(14,"format"),f.Gc(15,I,3,5,"div",15),f.Wb(),f.Xb(16,"ion-buttons",7),f.Xb(17,"ion-button",22),f.fc("click",(function(e){return f.Ac(n),e.preventDefault(),e.stopPropagation()})),f.Sb(18,"span",23),f.Wb(),f.Wb(),f.Wb()}if(2&e){var i=f.jc().$implicit,r=f.jc(2);f.pc("routerLink","/account/mst/"+i.symbol),f.Fb(1),f.pc("src",i.icon,f.Cc)("ngClass",f.tc(20,P,"default_mst"==i.icon)),f.Fb(2),f.Jc(i.symbol),f.Fb(2),f.Kc(" ",f.mc(6,11,i.balance.total||0,i.balance.decimals)," "),f.Fb(2),f.pc("ngIf",r.tickers&&r.tickers[i.symbol]&&r.tickers[i.symbol][r.base]),f.Fb(2),f.Kc(" ",f.mc(10,14,i.balance.unconfirmed||0,i.balance.decimals)," "),f.Fb(2),f.pc("ngIf",r.tickers&&r.tickers[i.symbol]&&r.tickers[i.symbol][r.base]),f.Fb(2),f.Kc(" ",f.mc(14,17,i.balance.frozen||0,i.balance.decimals)," "),f.Fb(2),f.pc("ngIf",r.tickers&&r.tickers[i.symbol]&&r.tickers[i.symbol][r.base]),f.Fb(2),f.pc("routerLink","/account/send/"+i.symbol)}}function E(e,t){if(1&e&&(f.Xb(0,"div"),f.Gc(1,w,19,22,"ion-item",20),f.Wb()),2&e){var n=t.$implicit;f.Fb(1),f.pc("ngIf",!n.hidden&&(n.balance.total||"DNA"==n.symbol))}}var X=function(){return["order","-1"]};function F(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div"),f.Xb(1,"ion-item",12),f.Xb(2,"img",2),f.fc("error",(function(e){return f.Ac(n),f.jc().errorImg(e)})),f.Wb(),f.Xb(3,"ion-label",13),f.Ic(4,"ETP"),f.Wb(),f.Xb(5,"ion-col",14),f.Ic(6),f.kc(7,"format"),f.Gc(8,g,3,5,"div",15),f.Wb(),f.Xb(9,"ion-col",16),f.Ic(10),f.kc(11,"format"),f.Gc(12,k,3,5,"div",15),f.Wb(),f.Xb(13,"ion-col",16),f.Ic(14),f.kc(15,"format"),f.Gc(16,T,3,5,"div",15),f.Wb(),f.Xb(17,"ion-buttons",7),f.Xb(18,"ion-button",17),f.fc("click",(function(e){return f.Ac(n),e.preventDefault(),e.stopPropagation()})),f.Wb(),f.Wb(),f.Wb(),f.Gc(19,E,2,1,"div",18),f.kc(20,"orderBy"),f.Wb()}if(2&e){var i=f.jc();f.Fb(1),f.pc("routerLink","/account/mst/ETP"),f.Fb(1),f.pc("src","assets/icon/ETP.png",f.Cc),f.Fb(4),f.Kc(" ",f.mc(7,10,i.etpBalance.total||0,8)," "),f.Fb(2),f.pc("ngIf",i.tickers&&i.tickers.ETP&&i.tickers.ETP[i.base]),f.Fb(2),f.Kc(" ",f.mc(11,13,i.etpBalance.unconfirmed||0,8)," "),f.Fb(2),f.pc("ngIf",i.tickers&&i.tickers.ETP&&i.tickers.ETP[i.base]),f.Fb(2),f.Kc(" ",f.mc(15,16,i.etpBalance.frozen||0,8)," "),f.Fb(2),f.pc("ngIf",i.tickers&&i.tickers.ETP&&i.tickers.ETP[i.base]),f.Fb(2),f.pc("routerLink","/account/send/ETP"),f.Fb(1),f.pc("ngForOf",f.mc(20,19,i.msts,f.sc(22,X)))}}var O,W,j,M=[{path:"",component:(O=function(){function t(e,i,r){var c=this;n(this,t),this.translate=e,this.metaverseService=i,this.router=r,this.icons={MST:[],MIT:[]},this.whitelist=[],this.msts=[],this.loading=!0,this.fiatValue=function(e,t,n){return parseFloat(e)/Math.pow(10,n)*c.tickers[t][c.base].price||0},this.errorImg=function(e){return e.target.remove()}}return r(t,[{key:"ionViewWillEnter",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loading=!0,this.heightSubscription=Object(u.a)([this.metaverseService.height$,this.metaverseService.balanceUpdated$]).subscribe((function(){t.showBalances()}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnInit",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadTickers(),e.next=3,this.metaverseService.getWhitelist();case 3:this.whitelist=e.sent;case 4:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnDestroy",value:function(){this.heightSubscription&&this.heightSubscription.unsubscribe()}},{key:"loadTickers",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.metaverseService.getBaseAndTickers();case 2:n=t.sent,i=e(n,2),this.base=i[0],this.tickers=i[1];case 6:case"end":return t.stop()}}),t,this)})))}},{key:"showBalances",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.metaverseService.getBalances();case 3:return this.balances=e.sent,e.next=6,this.metaverseService.addAssetsToAssetOrder(Object.keys(this.balances.MST));case 6:return e.next=8,this.metaverseService.assetOrder();case 8:return t=e.sent,e.next=11,this.metaverseService.getHiddenMst();case 11:return n=e.sent,e.next=14,this.metaverseService.getDefaultIcon();case 14:this.icons=e.sent,this.etpBalance={decimals:8,available:this.balances.ETP.available||0,unconfirmed:this.balances.ETP.unconfirmed||0,frozen:this.balances.ETP.frozen||0,total:0},this.etpBalance.total=this.etpBalance.available+this.etpBalance.unconfirmed+this.etpBalance.frozen,this.balances.ETP.available=this.balances.ETP.available||0,this.balances.ETP.unconfirmed=this.balances.ETP.unconfirmed||0,this.balances.ETP.frozen=this.balances.ETP.frozen||0,this.balances.ETP.total=this.balances.ETP.available+this.balances.ETP.unconfirmed+this.balances.ETP.frozen,this.msts=[],Object.keys(this.balances.MST).forEach((function(e){var r={decimals:i.balances.MST[e].decimals,available:i.balances.MST[e].available||0,unconfirmed:i.balances.MST[e].unconfirmed||0,frozen:i.balances.MST[e].frozen||0,total:0};r.total=r.available+r.unconfirmed+r.frozen,i.msts.push({symbol:e,balance:r,icon:i.icons.MST[e]||"assets/icon/default_mst.png",hidden:-1!==n.indexOf(e),order:t.indexOf(e)})})),this.loading=!1,e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),console.error(e.t0),console.log("Can't load balances");case 29:case"end":return e.stop()}}),e,this,[[0,26]])})))}},{key:"goToMst",value:function(e){this.router.navigate(["/account","mst",e])}},{key:"ignoreEvent",value:function(e){e.preventDefault()}}]),t}(),O.\u0275fac=function(e){return new(e||O)(f.Rb(m.e),f.Rb(d.a),f.Rb(b.h))},O.\u0275cmp=f.Lb({type:O,selectors:[["app-portfolio"]],decls:16,vars:4,consts:[["slot","start"],["translate","ACCOUNT.TITLE"],[1,"coinlogo",3,"src","error"],["translate","MST.GRID.SYMBOL",1,"symbol"],["translate","MST.GRID.TOTAL",1,"right"],["translate","MST.GRID.UNCONFIRMED",1,"ion-hide-sm-down","right"],["translate","MST.GRID.FROZEN",1,"ion-hide-sm-down","right"],["slot","end",1,"right-buttons"],["color","danger","fill","outline","shape","round","translate","MST.GRID.BUTTON.SEND",1,"invisible",3,"routerLink","click"],["name","dots",4,"ngIf"],[4,"ngIf"],["name","dots"],["button","",3,"routerLink"],[1,"symbol"],[1,"right"],["class","fiat",4,"ngIf"],[1,"ion-hide-sm-down","right"],["color","danger","fill","outline","shape","round","translate","MST.GRID.BUTTON.SEND",3,"routerLink","click"],[4,"ngFor","ngForOf"],[1,"fiat"],["button","",3,"routerLink",4,"ngIf"],[1,"coinlogo",3,"src","ngClass","error"],["color","danger","fill","outline","shape","round",3,"routerLink","click"],["translate","MST.GRID.BUTTON.SEND"]],template:function(e,t){1&e&&(f.Xb(0,"ion-header"),f.Xb(1,"ion-toolbar"),f.Xb(2,"ion-buttons",0),f.Sb(3,"ion-menu-button"),f.Wb(),f.Sb(4,"ion-title",1),f.Wb(),f.Wb(),f.Xb(5,"ion-content"),f.Xb(6,"ion-item"),f.Xb(7,"img",2),f.fc("error",(function(e){return t.errorImg(e)})),f.Wb(),f.Sb(8,"ion-label",3),f.Sb(9,"ion-col",4),f.Sb(10,"ion-col",5),f.Sb(11,"ion-col",6),f.Xb(12,"ion-buttons",7),f.Xb(13,"ion-button",8),f.fc("click",(function(e){return e.preventDefault(),e.stopPropagation()})),f.Wb(),f.Wb(),f.Wb(),f.Gc(14,v,1,0,"ion-spinner",9),f.Gc(15,F,21,23,"div",10),f.Wb()),2&e&&(f.Fb(7),f.pc("src","assets/icon/default_mst.png",f.Cc),f.Fb(6),f.pc("routerLink","/account/send/ETP"),f.Fb(1),f.pc("ngIf",t.loading),f.Fb(1),f.pc("ngIf",!t.loading))},directives:[s.u,s.X,s.j,s.C,s.V,m.a,s.r,s.x,s.z,s.q,s.i,s.fb,b.i,a.m,s.R,a.l,a.k],pipes:[h.a,p.a,a.f],styles:[".coinlogo[_ngcontent-%COMP%]{width:28px;margin-right:20px}.right-buttons[_ngcontent-%COMP%]{margin-right:10px;margin-left:20px}@media screen and (max-width:630px){.right-buttons[_ngcontent-%COMP%]{margin-right:0;margin-left:0}}.inside-line[_ngcontent-%COMP%]{width:100%}ion-card[_ngcontent-%COMP%]{margin:0}.fiat[_ngcontent-%COMP%]{font-size:.9rem!important;color:#949494}"]}),O)}],L=((W=function e(){n(this,e)}).\u0275mod=f.Pb({type:W}),W.\u0275inj=f.Ob({factory:function(e){return new(e||W)},imports:[[b.j.forChild(M)],b.j]}),W),x=c("iTUp"),B=((j=function e(){n(this,e)}).\u0275mod=f.Pb({type:j}),j.\u0275inj=f.Ob({factory:function(e){return new(e||j)},imports:[[a.c,o.e,s.Y,x.a,m.c.forChild(),L]]}),j)},iTUp:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var r=i("ofXK"),c=i("fXoL"),a=function(){var e=function e(){n(this,e)};return e.\u0275mod=c.Pb({type:e}),e.\u0275inj=c.Ob({factory:function(t){return new(t||e)},imports:[[r.c]]}),e}()},q5gJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var c=i("fXoL"),a=function(){var e=function(){function e(){n(this,e)}return r(e,[{key:"transform",value:function(e,t){return(e/Math.pow(10,t)).toLocaleString(void 0,{maximumFractionDigits:t})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=c.Qb({name:"format",type:e,pure:!0}),e}()}}])}();