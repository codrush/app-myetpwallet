(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"2c9M":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return a}));const i={getEngine(){const t=window;return t.TapticEngine||t.Capacitor&&t.Capacitor.isPluginAvailable("Haptics")&&t.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(t){const e=this.getEngine();if(!e)return;const n=this.isCapacitor()?t.style.toUpperCase():t.style;e.impact({style:n})},notification(t){const e=this.getEngine();if(!e)return;const n=this.isCapacitor()?t.style.toUpperCase():t.style;e.notification({style:n})},selection(){this.impact({style:"light"})},selectionStart(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionStart():t.gestureSelectionStart())},selectionChanged(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionChanged():t.gestureSelectionChanged())},selectionEnd(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionEnd():t.gestureSelectionEnd())}},o=()=>{i.selection()},s=()=>{i.selectionStart()},r=()=>{i.selectionChanged()},a=()=>{i.selectionEnd()},c=t=>{i.impact(t)}},"3LUQ":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("mrSG"),o=n("fXoL"),s=n("TEn/"),r=n("sYmb");let a=(()=>{class t{constructor(t,e,n){this.alertCtrl=t,this.loadingCtrl=e,this.translate=n}stopLoading(){this.loading&&this.loading.dismiss()}showLoading(t,e){return Object(i.a)(this,void 0,void 0,(function*(){return this.loading=yield this.loadingCtrl.create({spinner:e||"circular",message:yield this.translate.get(t||"MESSAGE.LOADING").toPromise()}),yield this.loading.present(),this.loading}))}askPassphrase(t,e){this.translate.get(["PASSWORD","OK","CANCEL",t]).subscribe(n=>Object(i.a)(this,void 0,void 0,(function*(){(yield this.alertCtrl.create({header:n.PASSWORD,subHeader:n[t],backdropDismiss:!1,inputs:[{name:"passphrase",placeholder:n.PASSWORD,type:"password"}],buttons:[{text:n.CANCEL,role:"cancel",handler:t=>e()},{text:n.OK,handler:t=>e(t.passphrase)}]})).present()})))}askInfo(t,e,n,o,s){this.translate.get(["OK","CANCEL",t,e,n]).subscribe(r=>Object(i.a)(this,void 0,void 0,(function*(){(yield this.alertCtrl.create({header:r[t],message:r[e],backdropDismiss:!1,inputs:[{name:"info",placeholder:r[n],type:o}],buttons:[{text:r.CANCEL,role:"cancel"},{text:r.OK,handler:t=>s(t.info)}]})).present()})))}ask2Info(t,e,n,o,s,r,a){this.translate.get(["OK","CANCEL",t,e,n,o]).subscribe(c=>Object(i.a)(this,void 0,void 0,(function*(){(yield this.alertCtrl.create({header:c[t],message:c[e],backdropDismiss:!1,inputs:[{name:"info1",placeholder:c[n],type:s},{name:"info2",placeholder:c[o],type:r}],buttons:[{text:c.CANCEL,role:"cancel"},{text:c.OK,handler:t=>a(t)}]})).present()})))}showError(t,e){this.translate.get(["MESSAGE.ERROR_TITLE",t,"OK"]).subscribe(n=>Object(i.a)(this,void 0,void 0,(function*(){(yield this.alertCtrl.create({header:n["MESSAGE.ERROR_TITLE"],subHeader:n[t],message:e,buttons:[{text:n.OK}]})).present()})))}showErrorTranslated(t,e){this.translate.get(["MESSAGE.ERROR_TITLE",t,e,"OK"]).subscribe(n=>Object(i.a)(this,void 0,void 0,(function*(){(yield this.alertCtrl.create({header:n["MESSAGE.ERROR_TITLE"],subHeader:n[t],message:n[e],buttons:[{text:n.OK}]})).present()})))}showMessage(t,e,n,o="MESSAGE.OK"){this.translate.get([t,e,n,o]).subscribe(s=>Object(i.a)(this,void 0,void 0,(function*(){(yield this.alertCtrl.create({header:s[t],subHeader:s[e]||e,message:s[n]||n,buttons:[{text:s[o]}]})).present()})))}showLimitReached(t,e,n){this.translate.get([t,e,"MESSAGE.OK"]).subscribe(o=>Object(i.a)(this,void 0,void 0,(function*(){(yield this.alertCtrl.create({header:o[t],message:o[e]+n,buttons:[{text:o["MESSAGE.OK"]}]})).present()})))}showCheckbox(t,e,n,o,s){this.translate.get(["OK",t,e,n]).subscribe(r=>Object(i.a)(this,void 0,void 0,(function*(){(yield this.alertCtrl.create({header:r[t],message:r[e],backdropDismiss:!1,inputs:[{name:"checkbox",type:"checkbox",label:r[n],value:"checked",checked:o}],buttons:[{text:r.OK,handler:t=>s(t&&t.length>0)}]})).present()})))}confirm(t,e,n,o,s,r){this.translate.get([e,n,o,s,r]).subscribe(a=>Object(i.a)(this,void 0,void 0,(function*(){(yield this.alertCtrl.create({header:a[e],subHeader:a[n],message:a[o],buttons:[{text:a[r]},{text:a[s],handler:t}]})).present()})))}alertConfirm(t,e,n,o){return Object(i.a)(this,void 0,void 0,(function*(){let i;const s=yield this.translate.get([t,e,n,o]).toPromise(),r=yield this.alertCtrl.create({cssClass:"my-custom-class",header:s[t],message:s[e],buttons:[{text:s[n],role:"cancel",cssClass:"secondary",handler:()=>(r.dismiss(!1),!1)},{text:s[o],handler:()=>(r.dismiss(!0),!1)}]});return yield r.present(),yield r.onDidDismiss().then(t=>{i=!0===t.data}),i}))}alertTripleChoice(t,e,n,o,s){return Object(i.a)(this,void 0,void 0,(function*(){let i;const r=yield this.translate.get([t,e,n,o,s]).toPromise(),a=yield this.alertCtrl.create({cssClass:"my-custom-class",header:r[t],message:r[e],buttons:[{text:r[n],cssClass:"secondary",handler:()=>(a.dismiss("cancel"),!1)},{text:r[o],handler:()=>(a.dismiss("option1"),!1)},{text:r[s],handler:()=>(a.dismiss("option2"),!1)}]});return yield a.present(),yield a.onDidDismiss().then(t=>{i=t.data}),i}))}alertTripleChoiceAndInput(t,e,n="GLOBAL.CANCEL",o,s,r,a){return Object(i.a)(this,void 0,void 0,(function*(){let i;const c=yield this.translate.get([t,e,n,o,s,r]).toPromise(),l=yield this.alertCtrl.create({cssClass:"my-custom-class",header:c[t],message:c[e],inputs:[{name:"info",placeholder:c[r],type:a}],buttons:[{text:c[n],cssClass:"secondary",handler:t=>(l.dismiss(["cancel",t.info]),!1)},{text:c[o],handler:t=>(l.dismiss(["option1",t.info]),!1)},{text:c[s],handler:t=>(l.dismiss(["option2",t.info]),!1)}]});return yield l.present(),yield l.onDidDismiss().then(t=>{t&&t.data&&(i={choice:t.data[0],input:t.data[1]})}),i}))}}return t.\u0275fac=function(e){return new(e||t)(o.bc(s.b),o.bc(s.ab),o.bc(r.e))},t.\u0275prov=o.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"6i10":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));const i={bubbles:{dur:1e3,circles:9,fn:(t,e,n)=>{const i=t*e/n-t+"ms",o=2*Math.PI*e/n;return{r:5,style:{top:9*Math.sin(o)+"px",left:9*Math.cos(o)+"px","animation-delay":i}}}},circles:{dur:1e3,circles:8,fn:(t,e,n)=>{const i=e/n,o=t*i-t+"ms",s=2*Math.PI*i;return{r:5,style:{top:9*Math.sin(s)+"px",left:9*Math.cos(s)+"px","animation-delay":o}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(t,e)=>({r:6,style:{left:9-9*e+"px","animation-delay":-110*e+"ms"}})},lines:{dur:1e3,lines:12,fn:(t,e,n)=>({y1:17,y2:29,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/n-t+"ms"}})},"lines-small":{dur:1e3,lines:12,fn:(t,e,n)=>({y1:12,y2:20,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/n-t+"ms"}})}}},"7wo0":function(t,e,n){"use strict";n.r(e),n.d(e,"SettingsPageModule",(function(){return v}));var i=n("ofXK"),o=n("3Pt+"),s=n("TEn/"),r=n("tyNb"),a=n("mrSG"),c=n("fXoL"),l=n("B180"),u=n("OaWH"),d=n("Fvwb"),h=n("sYmb");function b(t,e){1&t&&c.Sb(0,"ion-back-button",19)}function m(t,e){if(1&t){const t=c.Yb();c.Xb(0,"ion-item",9),c.fc("click",(function(){return c.Ac(t),c.jc().reset()})),c.Sb(1,"ion-icon",20),c.Xb(2,"ion-label"),c.Sb(3,"h1",21),c.Sb(4,"p",22),c.Wb(),c.Wb()}}function p(t,e){1&t&&(c.Xb(0,"ion-item",23),c.Sb(1,"ion-icon",24),c.Xb(2,"ion-label"),c.Sb(3,"h1",25),c.Sb(4,"p",26),c.Wb(),c.Wb())}function g(t,e){1&t&&(c.Xb(0,"ion-item",27),c.Sb(1,"ion-icon",28),c.Xb(2,"ion-label"),c.Sb(3,"h1",29),c.Sb(4,"p",30),c.Wb(),c.Wb())}function f(t,e){if(1&t){const t=c.Yb();c.Xb(0,"ion-item",9),c.fc("click",(function(){return c.Ac(t),c.jc().logout()})),c.Sb(1,"ion-icon",31),c.Xb(2,"ion-label"),c.Sb(3,"h1",32),c.Sb(4,"p",33),c.Wb(),c.Wb()}}const S=[{path:"",component:(()=>{class t{constructor(t,e,n,i,o){this.platform=t,this.logoutService=e,this.appService=n,this.router=i,this.walletService=o,this.darkTheme=document.body.classList.contains("dark"),this.loggedIn=!1}ngOnInit(){return Object(a.a)(this,void 0,void 0,(function*(){this.network=yield this.appService.getNetwork(),this.loggedIn="account"===this.router.url.split("/")[1]}))}reset(){return Object(a.a)(this,void 0,void 0,(function*(){this.router.navigate(["/loading"],{state:{data:{reset:!0}}})}))}logout(){this.logoutService.logout()}updateTheme(){this.darkTheme=!this.darkTheme,this.darkTheme?(document.body.classList.add("dark"),this.walletService.setTheme("dark")):(document.body.classList.remove("dark"),this.walletService.setTheme("light"))}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(s.eb),c.Rb(l.a),c.Rb(u.a),c.Rb(r.h),c.Rb(d.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-settings"]],decls:28,vars:6,consts:[["slot","start"],["defaultHref","/login",4,"ngIf"],["translate","SETTINGS.TITLE"],["button","",3,"click",4,"ngIf"],["routerLink","export-mobile",4,"ngIf"],["routerLink","language"],["name","flag"],["translate","SETTINGS.LANGUAGE.TITLE"],["translate","SETTINGS.LANGUAGE.SUBTITLE"],["button","",3,"click"],["name","moon"],["translate","SETTINGS.THEME.TITLE"],["translate","SETTINGS.THEME.SUBTITLE"],["id","themeToggle","slot","end",3,"ngModel","ngModelChange","click"],["routerLink","base-currency","button","",4,"ngIf"],["button","","routerLink","/info"],["name","information"],["translate","INFO.TITLE"],["translate","INFO.SUBTITLE"],["defaultHref","/login"],["name","refresh"],["translate","SETTINGS.RESYNC.TITLE"],["translate","SETTINGS.RESYNC.SUBTITLE"],["routerLink","export-mobile"],["name","phone-portrait"],["translate","SETTINGS.EXPORT_MOBILE.TITLE"],["translate","SETTINGS.EXPORT_MOBILE.SUBTITLE"],["routerLink","base-currency","button",""],["name","logo-usd"],["translate","SETTINGS.BASE_CURRENCY.TITLE"],["translate","SETTINGS.BASE_CURRENCY.SUBTITLE"],["name","log-out"],["translate","SETTINGS.LOGOUT.TITLE"],["translate","SETTINGS.LOGOUT.SUBTITLE"]],template:function(t,e){1&t&&(c.Xb(0,"ion-header"),c.Xb(1,"ion-toolbar"),c.Xb(2,"ion-buttons",0),c.Sb(3,"ion-menu-button"),c.Gc(4,b,1,0,"ion-back-button",1),c.Wb(),c.Sb(5,"ion-title",2),c.Wb(),c.Wb(),c.Xb(6,"ion-content"),c.Xb(7,"ion-list"),c.Gc(8,m,5,0,"ion-item",3),c.Gc(9,p,5,0,"ion-item",4),c.Xb(10,"ion-item",5),c.Sb(11,"ion-icon",6),c.Xb(12,"ion-label"),c.Sb(13,"h1",7),c.Sb(14,"p",8),c.Wb(),c.Wb(),c.Xb(15,"ion-item",9),c.fc("click",(function(){return e.updateTheme()})),c.Sb(16,"ion-icon",10),c.Xb(17,"ion-label"),c.Sb(18,"h1",11),c.Sb(19,"p",12),c.Wb(),c.Xb(20,"ion-toggle",13),c.fc("ngModelChange",(function(t){return e.darkTheme=t}))("click",(function(){return e.updateTheme()})),c.Wb(),c.Wb(),c.Gc(21,g,5,0,"ion-item",14),c.Xb(22,"ion-item",15),c.Sb(23,"ion-icon",16),c.Xb(24,"ion-label"),c.Sb(25,"h1",17),c.Sb(26,"p",18),c.Wb(),c.Wb(),c.Gc(27,f,5,0,"ion-item",3),c.Wb(),c.Wb()),2&t&&(c.Fb(4),c.pc("ngIf",!e.loggedIn),c.Fb(4),c.pc("ngIf",e.loggedIn),c.Fb(1),c.pc("ngIf",e.loggedIn&&!e.platform.is("mobile")),c.Fb(11),c.pc("ngModel",e.darkTheme),c.Fb(1),c.pc("ngIf",e.loggedIn),c.Fb(6),c.pc("ngIf",e.loggedIn))},directives:[s.u,s.X,s.j,s.C,i.m,s.V,h.a,s.r,s.A,s.x,s.fb,r.i,s.v,s.z,s.W,s.c,o.i,o.l,s.f,s.g],styles:["h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{text-overflow:clip;white-space:normal}h1[_ngcontent-%COMP%]{margin:0}ion-icon[_ngcontent-%COMP%]{margin-right:20px}ion-item[_ngcontent-%COMP%]{cursor:pointer}"]}),t})()},{path:"language",loadChildren:()=>n.e(62).then(n.bind(null,"jGah")).then(t=>t.LanguagePageModule)},{path:"export-mobile",loadChildren:()=>Promise.all([n.e(3),n.e(0),n.e(61)]).then(n.bind(null,"6iVq")).then(t=>t.ExportMobilePageModule)},{path:"base-currency",loadChildren:()=>n.e(60).then(n.bind(null,"Yzsn")).then(t=>t.BaseCurrencyPageModule)}];let O=(()=>{class t{}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(e){return new(e||t)},imports:[[r.j.forChild(S)],r.j]}),t})(),v=(()=>{class t{}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(e){return new(e||t)},imports:[[i.c,o.e,s.Y,h.c.forChild(),O]]}),t})()},"9FR+":function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));var i=n("mrSG"),o=n("fXoL"),s=n("TEn/"),r=n("3LUQ"),a=n("BZA/"),c=n("ofXK"),l=n("3Pt+"),u=n("sYmb");function d(t,e){if(1&t){const t=o.Yb();o.Xb(0,"ion-item",2),o.Xb(1,"ion-segment",3),o.fc("ngModelChange",(function(e){return o.Ac(t),o.jc().type=e}))("ngModelChange",(function(e){return o.Ac(t),o.jc().inputChange(e)})),o.Sb(2,"ion-segment-button",4),o.Sb(3,"ion-segment-button",5),o.Sb(4,"ion-segment-button",6),o.Wb(),o.Wb()}if(2&t){const t=o.jc();o.Fb(1),o.pc("ngModel",t.type)}}const h=function(t,e,n){return{blocktime:t,duration_days:e,duration_hours:n}};function b(t,e){if(1&t&&o.Sb(0,"ion-item",14),2&t){const t=o.jc(2);o.pc("translateParams",o.vc(1,h,t.blocktime,t.duration_days,t.duration_hours))}}const m=function(t,e){return{"error-border":t,"valid-border":e}};function p(t,e){if(1&t){const t=o.Yb();o.Xb(0,"ion-item",7),o.Sb(1,"ion-label",15),o.Xb(2,"ion-input",16),o.fc("ngModelChange",(function(e){return o.Ac(t),o.jc(2).nbrPeriod=e}))("ngModelChange",(function(e){return o.Ac(t),o.jc(2).inputChange(e)})),o.Wb(),o.Wb()}if(2&t){const t=o.jc(2);o.pc("ngClass",o.uc(2,m,!t.validNbrPeriod(t.nbrPeriod),t.validNbrPeriod(t.nbrPeriod))),o.Fb(2),o.pc("ngModel",t.nbrPeriod)}}function g(t,e){1&t&&o.Sb(0,"div",17)}function f(t,e){if(1&t){const t=o.Yb();o.Xb(0,"ion-list"),o.Xb(1,"ion-item",7),o.Sb(2,"ion-label",8),o.Xb(3,"ion-input",9),o.fc("ngModelChange",(function(e){return o.Ac(t),o.jc().locktime=e}))("ngModelChange",(function(e){return o.Ac(t),o.jc().inputChange(e)})),o.Wb(),o.Wb(),o.Sb(4,"div",10),o.Gc(5,b,1,5,"ion-item",11),o.Gc(6,p,3,5,"ion-item",12),o.Gc(7,g,1,0,"div",13),o.Wb()}if(2&t){const t=o.jc();o.Fb(1),o.pc("ngClass",o.uc(5,m,!t.validLocktime(t.locktime),t.validLocktime(t.locktime))),o.Fb(2),o.pc("ngModel",t.locktime),o.Fb(2),o.pc("ngIf",t.validLocktime(t.locktime)),o.Fb(1),o.pc("ngIf","recurrent"==t.type),o.Fb(1),o.pc("ngIf","recurrent"==t.type)}}function S(t,e){if(1&t){const t=o.Yb();o.Xb(0,"ion-row"),o.Xb(1,"input",29),o.fc("change",(function(e){return o.Ac(t),o.jc(2).import(e)})),o.Wb(),o.Xb(2,"label",30),o.Sb(3,"ion-icon",31),o.Sb(4,"span",32),o.Wb(),o.Wb()}}const O=function(t){return{period_nbr:t}};function v(t,e){if(1&t){const t=o.Yb();o.Xb(0,"ion-card",33),o.Xb(1,"ion-row"),o.Xb(2,"ion-col",34),o.Sb(3,"h3",35),o.Wb(),o.Xb(4,"ion-col",34),o.Xb(5,"ion-button",36),o.fc("click",(function(){o.Ac(t);const n=e.index;return o.jc(2).removePeriod(n)})),o.Ic(6," X "),o.Wb(),o.Wb(),o.Xb(7,"ion-col",37),o.Xb(8,"ion-item",7),o.Sb(9,"ion-label",38),o.Xb(10,"ion-input",39),o.fc("ngModelChange",(function(n){return o.Ac(t),e.$implicit.locktime=n}))("ngModelChange",(function(e){return o.Ac(t),o.jc(2).inputChange(e)})),o.Wb(),o.Wb(),o.Wb(),o.Xb(11,"ion-col",37),o.Xb(12,"ion-item",7),o.Sb(13,"ion-label",40),o.Xb(14,"ion-input",41),o.fc("ngModelChange",(function(n){return o.Ac(t),e.$implicit.quantity=n}))("ngModelChange",(function(e){return o.Ac(t),o.jc(2).inputChange(e)})),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Wb()}if(2&t){const t=e.$implicit,n=e.index,i=o.jc(2);o.Gb("data-index",n),o.Fb(3),o.pc("translateParams",o.tc(8,O,n+1)),o.Fb(5),o.pc("ngClass",o.uc(10,m,!i.validLocktime(t.locktime),i.validLocktime(t.locktime))),o.Fb(1),o.pc("translateParams",o.tc(13,O,n+1)),o.Fb(1),o.pc("ngModel",t.locktime),o.Fb(2),o.pc("ngClass",o.uc(15,m,!i.validQuantity(t.quantity),i.validQuantity(t.quantity))),o.Fb(1),o.pc("translateParams",o.tc(18,O,n+1)),o.Fb(1),o.pc("ngModel",t.quantity)}}function T(t,e){if(1&t){const t=o.Yb();o.Xb(0,"ion-button",42),o.fc("click",(function(){return o.Ac(t),o.jc(2).addPeriod()})),o.Sb(1,"ion-icon",43),o.Sb(2,"span",44),o.Wb()}}function E(t,e){1&t&&o.Sb(0,"ion-item",45)}const y=function(t){return{"error-border":t}},C=function(t){return{number:t}},L=function(t,e){return{quantity:t,asset:e}};function _(t,e){if(1&t){const t=o.Yb();o.Xb(0,"ion-list"),o.Gc(1,S,5,0,"ion-row",1),o.Gc(2,v,15,20,"ion-card",18),o.Xb(3,"div",19),o.Xb(4,"ion-button",20),o.fc("click",(function(){return o.Ac(t),o.jc().download()})),o.Sb(5,"ion-icon",21),o.Sb(6,"span",22),o.Wb(),o.Xb(7,"ion-button",23),o.fc("click",(function(){return o.Ac(t),o.jc().csvExample()})),o.Sb(8,"ion-icon",21),o.Sb(9,"span",24),o.Wb(),o.Gc(10,T,3,0,"ion-button",25),o.Wb(),o.Xb(11,"ion-item",7),o.Sb(12,"ion-label",26),o.Wb(),o.Sb(13,"br"),o.Xb(14,"ion-item",7),o.Sb(15,"ion-label",27),o.Wb(),o.Gc(16,E,1,0,"ion-item",28),o.Sb(17,"br"),o.Wb()}if(2&t){const t=o.jc();o.Fb(1),o.pc("ngIf",!t.platform.is("mobile")),o.Fb(1),o.pc("ngForOf",t.periods),o.Fb(8),o.pc("ngIf",t.periods.length<t.periods_nbr_limit),o.Fb(1),o.pc("ngClass",o.tc(8,y,!t.validLocktime(t.total_locktime))),o.Fb(1),o.pc("translateParams",o.tc(10,C,t.total_locktime)),o.Fb(2),o.pc("ngClass",o.tc(12,y,!t.validTotalQuantity())),o.Fb(1),o.pc("translateParams",o.uc(14,L,t.total_quantity,t.asset)),o.Fb(1),o.pc("ngIf",!t.validTotalQuantity())}}class A{constructor(t,e){this.locktime=t,this.quantity=e}}let I=(()=>{class t{constructor(t,e,n){this.platform=t,this.alertService=e,this.metaverseService=n,this.toMany=!1,this.type="simple",this.periods=[],this.periods_nbr_limit=50,this.periods_length_limit=1e7,this.total_quantity=0,this.total_locktime=0,this.duration_days=0,this.duration_hours=0,this.modelChanged=new o.q,this.validLocktime=t=>t&&t>0&&0==this.countDecimals(t)&&t<1e8,this.validNbrPeriod=t=>t&&t>0&&t<=1e3&&0==this.countDecimals(t),this.validQuantity=t=>void 0!==t&&this.countDecimals(t)<=this.decimals&&t>0,this.validTotalQuantity=()=>void 0!==this.quantity&&this.total_quantity<=parseFloat(this.quantity)}ngOnInit(){return Object(i.a)(this,void 0,void 0,(function*(){this.periods.push(new A(void 0,void 0));try{const t=yield this.metaverseService.getHeight();this.blocktime=yield this.metaverseService.getBlocktime(t)}catch(t){console.error(t.message)}}))}ngOnChanges(t){this.inputChange(event),this.toMany&&(this.type="simple")}addPeriod(){this.periods.push(new A(void 0,void 0)),this.inputChange(event)}removePeriod(t){this.periods.splice(t,1),this.inputChange(event)}inputChange(t){let e,n=Math.round(parseFloat(this.quantity)*Math.pow(10,this.decimals));switch(this.duration_days=Math.floor(this.blocktime*this.locktime/86400),this.duration_hours=Math.floor(this.blocktime*this.locktime/3600-24*this.duration_days),this.type){case"simple":this.validLocktime(this.locktime)&&(e=this.toMany?"PN=0;LH="+this.locktime+";TYPE=1;LP="+this.locktime+";UN=1":"PN=0;LH="+this.locktime+";TYPE=1;LQ="+n+";LP="+this.locktime+";UN=1");break;case"recurrent":this.validLocktime(this.locktime)&&this.validNbrPeriod(this.nbrPeriod)&&(e="PN=0;LH="+Math.floor(this.locktime/this.nbrPeriod)+";TYPE=1;LQ="+n+";LP="+this.locktime+";UN="+this.nbrPeriod);break;case"custom":let t,i,o=!0,s=0,r=0;for(let e=0;e<this.periods.length;e++){const n=this.periods[e];n.quantity&&(s+=parseFloat(n.quantity)),n.locktime&&(r+=parseFloat(n.locktime)),t=0===e?Math.round(parseFloat(n.quantity)*Math.pow(10,this.decimals))+"":t+","+Math.round(parseFloat(n.quantity)*Math.pow(10,this.decimals)),i=0===e?n.locktime:i+","+n.locktime,this.validQuantity(n.quantity)&&this.validLocktime(n.locktime)||(o=!1)}this.total_quantity=s,this.total_locktime=r,o&&this.validLocktime(r)&&this.total_quantity<=parseFloat(this.quantity)&&(e="PN=0;LH="+this.periods[0].locktime+";TYPE=2;LQ="+Math.round(s*Math.pow(10,this.decimals))+";LP="+r+";UN="+this.periods.length+";UC="+i+";UQ="+t)}this.attenuation_model!==e&&(this.quantity||this.toMany)&&(this.modelChanged.emit({attenuation_model:e,locktime:this.locktime}),this.attenuation_model=e)}countDecimals(t){return Math.floor(t)!==t&&t.toString().split(".").length>1&&t.toString().split(".")[1].length||0}import(t){this.alertService.showLoading().then(()=>{setTimeout(()=>{this.open(t)},500)})}open(t){const e=t.target.files,n=new FileReader;n.onload=t=>{const e=t.target.result;try{const t=e.split("\n");if(t.length>this.periods_nbr_limit)this.alertService.showLimitReached("MESSAGE.LOCK_IMPORT_CSV_TOO_MANY_PERIODS_TITLE","MESSAGE.LOCK_IMPORT_CSV_TOO_MANY_PERIOD_BODY",this.periods_nbr_limit);else{this.periods=[];for(let e=0;e<t.length;e++)if(t[e]){let n=t[e].split(",");n[0]=n[0]?n[0].trim():n[0],this.periods.push(new A(n[0],n[1]))}this.inputChange(event)}this.alertService.stopLoading()}catch(t){this.alertService.stopLoading(),console.error(t),this.alertService.showMessage("WRONG_FILE","","SEND_MORE.WRONG_FILE")}},e[0]&&n.readAsText(e[0])}download(){let t="";this.periods.forEach(e=>{t+=e.locktime+","+e.quantity+"\n"}),this.downloadFile("lock_model.csv",t)}csvExample(){this.downloadFile("mvs_example.csv","Locktime in Block,Amount,Please delete this line before import\n10,1000\n20,2000\n50,10000")}downloadFile(t,e){const n=document.createElement("a");if(n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),document.createEvent){const t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),n.dispatchEvent(t)}else n.click()}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(s.eb),o.Rb(r.a),o.Rb(a.a))},t.\u0275cmp=o.Lb({type:t,selectors:[["app-attenuation-model-selector"]],inputs:{quantity:"quantity",decimals:"decimals",asset:"asset",toMany:"toMany"},outputs:{modelChanged:"modelChanged"},features:[o.Db],decls:4,vars:3,consts:[["lines","none",4,"ngIf"],[4,"ngIf"],["lines","none"],["color","primary",3,"ngModel","ngModelChange"],["value","simple","translate","ASSET_LOCK.SIMPLE"],["value","recurrent","translate","ASSET_LOCK.RECURRENT"],["value","custom","translate","ASSET_LOCK.CUSTOM"],[3,"ngClass"],["color","primary","position","floating","translate","ASSET_LOCK.DURATION"],["name","locktime","type","number","min","0","step","1",3,"ngModel","ngModelChange"],["translate","ASSET_LOCK.HELP.TOTAL_DURATION",1,"advice"],["class","info-input","lines","none","translate","ASSET_LOCK.DURATION_ESTIMATION",3,"translateParams",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","advice","translate","ASSET_LOCK.HELP.NBR_PERIOD",4,"ngIf"],["lines","none","translate","ASSET_LOCK.DURATION_ESTIMATION",1,"info-input",3,"translateParams"],["color","primary","position","floating","translate","ASSET_LOCK.NBR_PERIOD"],["name","nbrPeriod","type","number","min","0","step","1",3,"ngModel","ngModelChange"],["translate","ASSET_LOCK.HELP.NBR_PERIOD",1,"advice"],["class","card-block",4,"ngFor","ngForOf"],[1,"right-buttons"],["color","primary","fill","outline","shape","round",3,"click"],["slot","start","name","download"],["translate","ASSET_LOCK.BUTTON.EXPORT_CSV"],["color","secondary","fill","outline","shape","round",3,"click"],["translate","ASSET_LOCK.BUTTON.DOWNLOAD_CSV_EXAMPLE"],["color","success","fill","outline","shape","round",3,"click",4,"ngIf"],["color","primary","translate","ASSET_LOCK.TOTAL_DURATION",3,"translateParams"],["color","primary","translate","ASSET_LOCK.TOTAL_QUANTITY",3,"translateParams"],["lines","none","class","wrong-input","translate","ASSET_LOCK.TOTAL_MORE_SEND",4,"ngIf"],["type","file","name","file","id","file","accept",".csv",1,"inputfile",3,"change"],["for","file"],["slot","start","name","document"],["translate","ASSET_LOCK.BUTTON.IMPORT_FROM_CSV"],[1,"card-block"],["size","6"],["translate","ASSET_LOCK.PERIOD_NBR",1,"period-title",3,"translateParams"],["tabIndex","-1","fill","clear","color","primary",1,"remove-button",3,"click"],["size","12","size-md","6"],["color","primary","translate","ASSET_LOCK.DURATION_CUSTOM_PERIOD","color","primary","position","floating",3,"translateParams"],["required","",3,"ngModel","ngModelChange"],["color","primary","translate","ASSET_LOCK.AMOUNT_CUSTOM_PERIOD","color","primary","position","floating",3,"translateParams"],["type","number","min","0","required","",3,"ngModel","ngModelChange"],["color","success","fill","outline","shape","round",3,"click"],["slot","start","name","add"],["translate","ASSET_LOCK.BUTTON.ADD_PERIOD"],["lines","none","translate","ASSET_LOCK.TOTAL_MORE_SEND",1,"wrong-input"]],template:function(t,e){1&t&&(o.Xb(0,"div"),o.Gc(1,d,5,1,"ion-item",0),o.Gc(2,f,8,8,"ion-list",1),o.Gc(3,_,18,17,"ion-list",1),o.Wb()),2&t&&(o.Fb(1),o.pc("ngIf",!e.toMany),o.Fb(1),o.pc("ngIf","simple"==e.type||"recurrent"==e.type),o.Fb(1),o.pc("ngIf","custom"==e.type))},directives:[c.m,s.x,s.L,s.gb,l.i,l.l,s.M,u.a,s.A,c.k,s.z,s.w,s.db,c.l,s.i,s.v,s.K,s.k,s.q,s.hb,l.n],styles:[".right-buttons[_ngcontent-%COMP%]{text-align:right;width:100%}.period-title[_ngcontent-%COMP%]{padding-left:16px;padding-top:0}.remove-button[_ngcontent-%COMP%]{float:right;margin:0}.card-block[_ngcontent-%COMP%]{padding:10px}.inputfile[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.inputfile[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{font-weight:500;background-color:var(--ion-color-secondary);margin:auto 0 auto auto;padding:8px 15px;border-radius:2.5px;display:block;color:#fff;font-size:1em;transition:all .4s;cursor:pointer;text-transform:uppercase;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12)}.inputfile[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:hover, .inputfile[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%]{opacity:.9}.inputfile[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:8px}"]}),t})()},B180:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("mrSG"),o=n("fXoL"),s=n("3LUQ"),r=n("Fvwb"),a=n("BZA/"),c=n("tyNb");let l=(()=>{class t{constructor(t,e,n,i){this.alertService=t,this.walletService=e,this.metaverseService=n,this.router=i,this.savedAccountsName=[]}init(){return Object(i.a)(this,void 0,void 0,(function*(){this.hasSeed=yield this.walletService.hasSeed();const t=yield this.walletService.getSavedAccounts();this.savedAccountsName=t&&t.length>=1?t.map(t=>t.name):[]}))}logout(){return Object(i.a)(this,void 0,void 0,(function*(){(yield this.walletService.getSessionAccountInfo())||!this.hasSeed?this.saveAccount():this.showLogoutNoAccount()}))}forgetAccount(){return Object(i.a)(this,void 0,void 0,(function*(){const t=yield this.walletService.getAccountName();yield this.walletService.deleteAccount(t),yield this.metaverseService.hardReset(),this.router.navigate(["login"])}))}saveAccount(){return Object(i.a)(this,void 0,void 0,(function*(){const t=yield this.walletService.getAccountName();t?this.save(t):this.newUsername("LOGOUT.SAVE_NEW_USER.TITLE","LOGOUT.SAVE_NEW_USER.SUBTITLE","LOGOUT.SAVE_NEW_USER.PLACEHOLDER")}))}newUsername(t,e,n){return Object(i.a)(this,void 0,void 0,(function*(){const i=yield this.alertService.alertTripleChoiceAndInput(t,e,"LOGOUT.CONFIRMATION.CANCEL","LOGOUT.CONFIRMATION.FORGET","LOGOUT.CONFIRMATION.SAVE",n,"text");if(i)switch(i.choice){case"option1":this.forgetAccount();break;case"option2":const t=i.input;t?-1!==this.savedAccountsName.indexOf(t)?this.newUsername("LOGOUT.SAVE_ACCOUNT_ALREADY_EXIST.TITLE","LOGOUT.SAVE_ACCOUNT_ALREADY_EXIST.SUBTITLE",n):this.save(t):this.newUsername("LOGOUT.SAVE_ACCOUNT_NO_NAME.TITLE","LOGOUT.SAVE_ACCOUNT_NO_NAME.SUBTITLE",n);break;default:return}}))}save(t){return Object(i.a)(this,void 0,void 0,(function*(){try{yield this.walletService.saveAccount(t),yield this.metaverseService.hardReset(),yield this.router.navigate(["login"])}catch(e){this.alertService.showError("ERROR.SAVE_ACCOUNT",e.message)}}))}showLogoutNoAccount(){return Object(i.a)(this,void 0,void 0,(function*(){(yield this.alertService.alertConfirm("LOGOUT.CONFIRMATION_NO_ACCOUNT.TITLE","LOGOUT.CONFIRMATION_NO_ACCOUNT.SUBTITLE","LOGOUT.CONFIRMATION_NO_ACCOUNT.CANCEL","LOGOUT.CONFIRMATION_NO_ACCOUNT.OK"))&&(yield this.metaverseService.hardReset(),this.router.navigate(["login"]))}))}}return t.\u0275fac=function(e){return new(e||t)(o.bc(s.a),o.bc(r.a),o.bc(a.a),o.bc(c.h))},t.\u0275prov=o.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},JvOL:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("fXoL");let o=(()=>{class t{transform(t,e){const n=e[0],i=e[1];return t.sort((t,e)=>t[n]<e[n]?1==i?1:-1:t[n]>e[n]?1==i?-1:1:0),t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.Qb({name:"orderBy",type:t,pure:!0}),t})()},NqGI:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));const i=async(t,e,n,i,o)=>{if(t)return t.attachViewToDom(e,n,o,i);if("string"!=typeof n&&!(n instanceof HTMLElement))throw new Error("framework delegate is missing");const s="string"==typeof n?e.ownerDocument&&e.ownerDocument.createElement(n):n;return i&&i.forEach(t=>s.classList.add(t)),o&&Object.assign(s,o),e.appendChild(s),s.componentOnReady&&await s.componentOnReady(),s},o=(t,e)=>{if(e){if(t)return t.removeViewFromDom(e.parentElement,e);e.remove()}return Promise.resolve()}},TXHh:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("ofXK"),o=n("3Pt+"),s=n("TEn/"),r=n("sYmb"),a=n("iTUp"),c=n("fXoL");let l=(()=>{class t{}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(e){return new(e||t)},imports:[[i.c,o.e,s.Y,r.c.forChild(),a.a]]}),t})()},"U/uv":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("sxy2"),o=n("ItpF"),s=n("2c9M");const r=(t,e)=>{let n,r;const a=(t,i,o)=>{if("undefined"==typeof document)return;const s=document.elementFromPoint(t,i);s&&e(s)?s!==n&&(l(),c(s,o)):l()},c=(t,e)=>{n=t,r||(r=n);const o=n;Object(i.g)(()=>o.classList.add("ion-activated")),e()},l=(t=!1)=>{if(!n)return;const e=n;Object(i.g)(()=>e.classList.remove("ion-activated")),t&&r!==n&&n.click(),n=void 0};return Object(o.createGesture)({el:t,gestureName:"buttonActiveDrag",threshold:0,onStart:t=>a(t.currentX,t.currentY,s.a),onMove:t=>a(t.currentX,t.currentY,s.b),onEnd:()=>{l(!0),Object(s.e)(),r=void 0}})}},m5Kd:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var i=n("mrSG"),o=n("2Vo4"),s=n("pLZG"),r=n("meUc"),a=n.n(r),c=n("OZ/i"),l=n.n(c),u=n("fXoL"),d=n("OaWH"),h=n("Fvwb");let b=(()=>{class t{constructor(t,e){this.appService=t,this.wallet=e,this.ready$=new o.a(!1),this.Tx=n("jSND").Transaction,this.web3=new a.a,this.appService.network$.pipe(Object(s.a)(t=>!!t)).subscribe(t=>{console.log("setup metaverse service for network",t),this.network="testnet"===t?"https://vm.mvs.org/testnet_rpc":"https://vm.mvs.org/rpc",this.web3.setProvider(this.network),this.ready$.next(!0)})}sendParams(t,e,n=this.appService.default_fees_vm.gas,o=this.appService.default_fees_vm.gasPrice){return Object(i.a)(this,void 0,void 0,(function*(){return{to:t,value:this.web3.utils.toWei(e+"","ether"),chainId:"testnet"===this.network?43:23,networkId:"testnet"===this.network?43:23,gas:n,gasPrice:o,nonce:void 0}}))}getHeight(){return this.web3.eth.getBlockNumber()}getTransaction(t){return this.web3.eth.getTransaction(t)}showBlockNumber(t){return new l.a(t.number.toString("hex"),16).toNumber()}getPrivateKey(t){return Object(i.a)(this,void 0,void 0,(function*(){return this.wallet.exportPrivateKey(t,"m/44'/60'/0'/0/0")}))}sign(t,e){return Object(i.a)(this,void 0,void 0,(function*(){const n=yield this.getPrivateKey(e),i=this.web3.eth.accounts.wallet.add(n),o=yield i.signTransaction(t);return this.web3.eth.accounts.wallet.clear(),o}))}send(t){return Object(i.a)(this,void 0,void 0,(function*(){return this.web3.eth.sendSignedTransaction(t.rawTransaction).once("transactionHash",t=>{console.log({hash:t})})}))}balanceOf(t){return Object(i.a)(this,void 0,void 0,(function*(){return this.web3.eth.getBalance(t)}))}}return t.\u0275fac=function(e){return new(e||t)(u.bc(d.a),u.bc(h.a))},t.\u0275prov=u.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},pCZr:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("ofXK"),o=n("bmg4"),s=n("TEn/"),r=n("fXoL");let a=(()=>{class t{}return t.\u0275mod=r.Pb({type:t}),t.\u0275inj=r.Ob({factory:function(e){return new(e||t)},imports:[[i.c,s.Y,o.a]]}),t})()},sPtc:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return a}));const i=(t,e)=>null!==e.closest(t),o=(t,e)=>"string"==typeof t&&t.length>0?Object.assign({"ion-color":!0,["ion-color-"+t]:!0},e):e,s=t=>{const e={};return(t=>void 0!==t?(Array.isArray(t)?t:t.split(" ")).filter(t=>null!=t).map(t=>t.trim()).filter(t=>""!==t):[])(t).forEach(t=>e[t]=!0),e},r=/^[a-z][a-z0-9+\-.]*:/,a=async(t,e,n,i)=>{if(null!=t&&"#"!==t[0]&&!r.test(t)){const o=document.querySelector("ion-router");if(o)return null!=e&&e.preventDefault(),o.push(t,n,i)}return!1}}}]);