!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{T2jK:function(n,r,i){"use strict";i.r(r),i.d(r,"OpenQrPageModule",(function(){return k}));var o=i("ofXK"),a=i("3Pt+"),c=i("TEn/"),s=i("tyNb"),l=i("mrSG"),b=i("gddX"),d=i("fXoL"),u=i("3LUQ"),f=i("OaWH"),p=i("Fvwb"),v=i("BZA/"),h=i("sYmb");function g(e,t){if(1&e&&(d.Xb(0,"ion-col",6),d.Xb(1,"ion-card"),d.Xb(2,"ion-card-header"),d.Sb(3,"ion-card-title",7),d.Wb(),d.Xb(4,"ion-card-content"),d.Sb(5,"p",7),d.Sb(6,"img",8),d.Wb(),d.Wb(),d.Wb()),2&e){var n=t.$implicit;d.Fb(3),d.pc("translate","IMPORT_QR.HOW_TO_IMPORT_WALLET_MOBILE_STEP"+n),d.Fb(2),d.pc("translate","IMPORT_QR.HOW_TO_IMPORT_WALLET_MOBILE_STEP"+n+"_TEXT"),d.Fb(1),d.pc("src","/assets/images/mobile_import_"+n+".jpeg",d.Cc)}}var S=function(){return[1,2,3]};function w(e,t){1&e&&(d.Xb(0,"div"),d.Sb(1,"h2",4),d.Xb(2,"ion-grid"),d.Xb(3,"ion-row"),d.Gc(4,g,7,3,"ion-col",5),d.Wb(),d.Wb(),d.Wb()),2&e&&(d.Fb(4),d.pc("ngForOf",d.sc(1,S)))}function R(e,t){if(1&e){var n=d.Yb();d.Xb(0,"ion-button",11),d.fc("click",(function(){return d.Ac(n),d.jc(2).scan()})),d.Sb(1,"ion-icon",12),d.Sb(2,"span",13),d.Wb()}}function m(e,t){if(1&e&&(d.Xb(0,"ion-row"),d.Xb(1,"ion-col",9),d.Gc(2,R,3,0,"ion-button",10),d.Wb(),d.Wb()),2&e){var n=d.jc();d.Fb(2),d.pc("ngIf",!n.qrCodeLoaded)}}function O(e,t){if(1&e){var n=d.Yb();d.Xb(0,"ion-row"),d.Xb(1,"ion-col",9),d.Xb(2,"ion-button",17),d.fc("click",(function(){d.Ac(n);var e=d.jc(2);return e.decrypt(e.password,e.seed)})),d.Sb(3,"ion-icon",12),d.Sb(4,"span",18),d.Wb(),d.Wb(),d.Wb()}if(2&e){var r=d.jc(2);d.Fb(2),d.pc("disabled",!r.passwordValid(r.password))}}function W(e,t){if(1&e){var n=d.Yb();d.Xb(0,"div"),d.Xb(1,"ion-row"),d.Sb(2,"ion-icon",14),d.Wb(),d.Xb(3,"ion-item"),d.Sb(4,"ion-label",15),d.Xb(5,"ion-input",16),d.fc("ngModelChange",(function(e){return d.Ac(n),d.jc().password=e})),d.Wb(),d.Wb(),d.Gc(6,O,5,1,"ion-row",3),d.Wb()}if(2&e){var r=d.jc();d.Fb(5),d.pc("ngModel",r.password),d.Fb(1),d.pc("ngIf",!r.isMobile)}}function M(e,t){if(1&e){var n=d.Yb();d.Xb(0,"ion-button",21),d.fc("click",(function(){return d.Ac(n),d.jc(2).scan()})),d.Sb(1,"ion-icon",12),d.Sb(2,"span",13),d.Wb()}}function T(e,t){if(1&e){var n=d.Yb();d.Xb(0,"ion-button",22),d.fc("click",(function(){d.Ac(n);var e=d.jc(2);return e.decrypt(e.password,e.seed)})),d.Sb(1,"ion-icon",12),d.Sb(2,"span",18),d.Wb()}if(2&e){var r=d.jc(2);d.pc("disabled",!r.passwordValid(r.password))}}function _(e,t){if(1&e&&(d.Xb(0,"ion-footer"),d.Gc(1,M,3,0,"ion-button",19),d.Gc(2,T,3,1,"ion-button",20),d.Wb()),2&e){var n=d.jc();d.Fb(1),d.pc("ngIf",!n.qrCodeLoaded),d.Fb(1),d.pc("ngIf",n.qrCodeLoaded)}}var I,x,X,E=[{path:"",component:(I=function(){function n(t,r,i,o,a,c){e(this,n),this.modalCtrl=t,this.alertService=r,this.appService=i,this.walletService=o,this.metaverseService=a,this.router=c,this.passwordValid=function(e){return!!e&&e.length>0}}var r,i,o;return r=n,(i=[{key:"ngOnInit",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isMobile=this.walletService.isMobile();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"scan",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalCtrl.create({component:b.a,showBackdrop:!1,backdropDismiss:!1});case 2:return(t=e.sent).onWillDismiss().then((function(e){e.data&&e.data.text&&n.alertService.showLoading().then((function(){var t=e.data.text.toString().split("&");n.seed=t[0];var r=t[1];n.index=Math.max(5,Math.min(parseInt(t[2],10),50));var i=t[3];t.length<3||t.length>4?(n.alertService.stopLoading(),n.alertService.showError("IMPORT_QR.MESSAGE.ERROR_QRCODE","")):n.appService.getNetwork().then((function(e){r!==e.charAt(0)?(n.alertService.stopLoading(),n.alertService.showError("IMPORT_QR.MESSAGE.ERROR_NETWORK_MISMATCH","")):n.seed?(n.qrCodeLoaded=!0,n.alertService.stopLoading()):i?n.walletService.getWalletFromMasterPublicKey(i).then((function(e){return n.walletService.generateAddresses(e,0,n.index)})).then((function(e){return n.metaverseService.addAddresses(e)})).then((function(){return n.walletService.setXpub(i)})).then((function(){return n.router.navigate(["/loading"],{state:{data:{reset:!0}}})})).then((function(){return n.alertService.stopLoading()})):(n.alertService.stopLoading(),n.alertService.showError("IMPORT_QR.MESSAGE.ERROR_QRCODE",""))}))})),t.remove()})),e.next=6,t.present();case 6:case"end":return e.stop()}}),e,this)})))}},{key:"decrypt",value:function(e,t){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.alertService.showLoading();case 3:return n.next=5,this.walletService.setMobileWallet(t);case 5:return n.next=7,this.walletService.getMasterPublicKey(e);case 7:return r=n.sent,n.next=10,this.walletService.setXpub(r);case 10:return n.next=12,this.walletService.getWallet(e);case 12:return i=n.sent,n.next=15,this.walletService.generateAddresses(i,0,this.index);case 15:return o=n.sent,n.next=18,this.metaverseService.setAddresses(o);case 18:return n.next=20,this.walletService.saveSessionAccount(e);case 20:this.alertService.stopLoading(),this.router.navigate(["/loading"],{state:{data:{reset:!0}}}),n.next=27;break;case 24:n.prev=24,n.t0=n.catch(0),console.error(n.t0),this.alertService.showError("IMPORT_QR.MESSAGE.PASSWORD_WRONG",""),this.alertService.stopLoading();case 27:case"end":return n.stop()}}),n,this,[[0,24]])})))}}])&&t(r.prototype,i),o&&t(r,o),n}(),I.\u0275fac=function(e){return new(e||I)(d.Rb(c.bb),d.Rb(u.a),d.Rb(f.a),d.Rb(p.a),d.Rb(v.a),d.Rb(s.h))},I.\u0275cmp=d.Lb({type:I,selectors:[["app-open-qr"]],decls:10,vars:4,consts:[["slot","start"],["defaultHref","/login/open"],["translate","IMPORT_QR.TITLE"],[4,"ngIf"],["translate","IMPORT_QR.HOW_IT_WORKS",1,"ion-text-center"],["size","12","size-md","4",4,"ngFor","ngForOf"],["size","12","size-md","4"],[3,"translate"],["alt","",3,"src"],["size","12","size-sm","6","offset-sm","3"],["expand","full","fill","outline","shape","round",3,"click",4,"ngIf"],["expand","full","fill","outline","shape","round",3,"click"],["slot","start","name","qr-code"],["translate","IMPORT_QR.BUTTON.SCAN"],["name","checkmark-circle",1,"verifiedQRCode"],["color","primary","position","floating","translate","GLOBAL.PASSWORD"],["name","password","type","password","required","",3,"ngModel","ngModelChange"],["type","submit","expand","full","fill","outline","shape","round","color","primary",3,"disabled","click"],["translate","IMPORT_QR.BUTTON.IMPORT_WALLET"],["expand","full",3,"click",4,"ngIf"],["expand","full",3,"disabled","click",4,"ngIf"],["expand","full",3,"click"],["expand","full",3,"disabled","click"]],template:function(e,t){1&e&&(d.Xb(0,"ion-header"),d.Xb(1,"ion-toolbar"),d.Xb(2,"ion-buttons",0),d.Sb(3,"ion-back-button",1),d.Wb(),d.Sb(4,"ion-title",2),d.Wb(),d.Wb(),d.Xb(5,"ion-content"),d.Gc(6,w,5,2,"div",3),d.Gc(7,m,3,1,"ion-row",3),d.Gc(8,W,7,2,"div",3),d.Wb(),d.Gc(9,_,3,2,"ion-footer",3)),2&e&&(d.Fb(6),d.pc("ngIf",t.qrCodeLoaded),d.Fb(1),d.pc("ngIf",!t.isMobile),d.Fb(1),d.pc("ngIf",t.qrCodeLoaded),d.Fb(1),d.pc("ngIf",t.isMobile))},directives:[c.u,c.X,c.j,c.f,c.g,c.V,h.a,c.r,o.m,c.t,c.K,o.l,c.q,c.k,c.m,c.o,c.l,c.i,c.v,c.x,c.z,c.w,c.hb,a.n,a.i,a.l,c.s],styles:[".verifiedQRCode[_ngcontent-%COMP%]{color:var(--ion-color-secondary);font-size:50px;margin-left:calc(50% - 25px)}ion-card[_ngcontent-%COMP%]{height:100%}"]}),I)}],L=((X=function t(){e(this,t)}).\u0275mod=d.Pb({type:X}),X.\u0275inj=d.Ob({factory:function(e){return new(e||X)},imports:[[s.j.forChild(E)],s.j]}),X),k=((x=function t(){e(this,t)}).\u0275mod=d.Pb({type:x}),x.\u0275inj=d.Ob({factory:function(e){return new(e||x)},imports:[[o.c,a.e,c.Y,h.c.forChild(),L]]}),x)}}])}();