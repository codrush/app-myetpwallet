!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{iVTo:function(n,r,a){"use strict";a.r(r),a.d(r,"GenerateAddressPageModule",(function(){return _}));var i=a("ofXK"),s=a("3Pt+"),o=a("TEn/"),c=a("tyNb"),l=a("mrSG"),u=a("fXoL"),b=a("BZA/"),d=a("Fvwb"),p=a("OaWH"),v=a("3LUQ"),f=a("sYmb"),S=function(e){return{max_addresses:e}};function h(e,t){if(1&e&&u.Sb(0,"ion-item",21),2&e){var n=u.jc(2);u.pc("translateParams",u.tc(1,S,n.appService.max_addresses))}}var E=function(e){return{"error-border":e}};function g(e,t){if(1&e){var n=u.Yb();u.Xb(0,"ion-item",8),u.Sb(1,"ion-label",22),u.Xb(2,"ion-input",23),u.fc("ngModelChange",(function(e){return u.Ac(n),u.jc(2).passphrase=e})),u.Wb(),u.Wb()}if(2&e){var r=u.jc(2);u.pc("ngClass",u.tc(2,E,!r.validPassword(r.passphrase))),u.Fb(2),u.pc("ngModel",r.passphrase)}}var m=function(e,t){return{"error-border":e,"valid-border":t}};function R(e,t){if(1&e){var n=u.Yb();u.Xb(0,"form",6,7),u.fc("ngSubmit",(function(){return u.Ac(n),u.jc().setIndex()})),u.Xb(2,"ion-list"),u.Xb(3,"ion-item",8),u.Sb(4,"ion-label",9),u.Xb(5,"ion-input",10),u.fc("ngModelChange",(function(e){return u.Ac(n),u.jc().index=e})),u.Wb(),u.Wb(),u.Sb(6,"div",11),u.Gc(7,h,1,3,"ion-item",12),u.Gc(8,g,3,4,"ion-item",13),u.Sb(9,"br"),u.Wb(),u.Xb(10,"ion-row"),u.Xb(11,"ion-col",14),u.Xb(12,"ion-button",15),u.fc("click",(function(){return u.Ac(n),u.jc().cancel()})),u.Sb(13,"ion-icon",16),u.Sb(14,"span",17),u.Wb(),u.Wb(),u.Xb(15,"ion-col",14),u.Xb(16,"ion-button",18),u.Sb(17,"ion-icon",19),u.Sb(18,"span",20),u.Wb(),u.Wb(),u.Wb(),u.Wb()}if(2&e){var r=u.yc(1),a=u.jc();u.Fb(3),u.pc("ngClass",u.uc(6,m,!a.validIndex(a.index),a.validIndex(a.index))),u.Fb(2),u.pc("ngModel",a.index),u.Fb(1),u.pc("translateParams",u.tc(9,S,a.appService.max_addresses)),u.Fb(1),u.pc("ngIf",a.index>a.appService.max_addresses),u.Fb(1),u.pc("ngIf",!a.walletFromXpub),u.Fb(8),u.pc("disabled",!r.form.valid||!a.validIndex(a.index)||!a.walletFromXpub&&!a.validPassword(a.passphrase))}}function w(e,t){1&e&&u.Sb(0,"ion-spinner")}var A,x,D,O=[{path:"",component:(A=function(){function n(t,r,a,i,s){var o=this;e(this,n),this.metaverseService=t,this.walletService=r,this.appService=a,this.alertService=i,this.navCtrl=s,this.loading=!0,this.validIndex=function(e){return e>=2&&e<=o.appService.max_addresses},this.validPassword=function(e){return!!e&&e.length>3}}var r,a,i;return r=n,(a=[{key:"ngOnInit",value:function(){}},{key:"ionViewDidEnter",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.walletService.getAddressIndex();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=10;case 5:return this.index=e.t0,e.next=8,this.walletService.getXpub();case 8:if(t=e.sent,e.t1=t,!e.t1){e.next=14;break}return e.next=13,this.walletService.getWalletFromMasterPublicKey(t);case 13:this.walletFromXpub=e.sent;case 14:this.loading=!1;case 15:case"end":return e.stop()}}),e,this)})))}},{key:"cancel",value:function(){this.navCtrl.navigateBack("/account/identities")}},{key:"setIndex",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.walletFromXpub?this.setIndexFromXpub():this.setIndexFromWallet();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"setIndexFromWallet",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.alertService.showLoading();case 3:return e.next=5,this.walletService.getWallet(this.passphrase);case 5:return t=e.sent,e.next=8,this.walletService.generateAddresses(t,0,this.index);case 8:return n=e.sent,e.next=11,this.metaverseService.setAddresses(n);case 11:return e.next=13,this.walletService.getMasterPublicKey(this.passphrase);case 13:return r=e.sent,e.next=16,this.walletService.setXpub(r);case 16:this.alertService.stopLoading(),this.navCtrl.navigateRoot("/loading",{state:{data:{reset:!0}}}),e.next=28;break;case 20:e.prev=20,e.t0=e.catch(0),e.t1=(console.error(e.t0),this.alertService.stopLoading(),e.t0.message),e.next="ERR_DECRYPT_WALLET"===e.t1?25:27;break;case 25:return this.alertService.showError("MESSAGE.PASSWORD_WRONG",""),e.abrupt("break",28);case 27:this.alertService.showError("GENERATE_ADDRESSES.ERROR.UNKOWN_ERROR",e.t0.message);case 28:case"end":return e.stop()}}),e,this,[[0,20]])})))}},{key:"setIndexFromXpub",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.alertService.showLoading();case 3:return e.next=5,this.walletService.generateAddresses(this.walletFromXpub,0,this.index);case 5:return t=e.sent,e.next=8,this.metaverseService.setAddresses(t);case 8:this.alertService.stopLoading(),this.navCtrl.navigateRoot("/loading",{state:{data:{reset:!0}}}),e.next=20;break;case 12:e.prev=12,e.t0=e.catch(0),e.t1=(console.error(e.t0),this.alertService.stopLoading(),e.t0.message),e.next="ERR_DECRYPT_WALLET"===e.t1?17:19;break;case 17:return this.alertService.showError("MESSAGE.PASSWORD_WRONG",""),e.abrupt("break",20);case 19:this.alertService.showError("GENERATE_ADDRESSES.ERROR.UNKOWN_ERROR",e.t0.message);case 20:case"end":return e.stop()}}),e,this,[[0,12]])})))}}])&&t(r.prototype,a),i&&t(r,i),n}(),A.\u0275fac=function(e){return new(e||A)(u.Rb(b.a),u.Rb(d.a),u.Rb(p.a),u.Rb(v.a),u.Rb(o.cb))},A.\u0275cmp=u.Lb({type:A,selectors:[["app-generate-address"]],decls:13,vars:2,consts:[["slot","start"],["defaultHref","/account/identities"],["translate","GENERATE_ADDRESS.TITLE"],["align","center","translate","GENERATE_ADDRESS.EXPLANATION"],[3,"ngSubmit",4,"ngIf","ngIfElse"],["loadingSpinner",""],[3,"ngSubmit"],["sendForm","ngForm"],[3,"ngClass"],["color","primary","position","floating","translate","GENERATE_ADDRESS.TOTAL_NUMBER_OF_ADDRESSES"],["name","symbol","type","number","required","",3,"ngModel","ngModelChange"],["lines","none","translate","GENERATE_ADDRESS.HELP.NUMBER",1,"advice",3,"translateParams"],["lines","none","class","wrong-input","translate","GENERATE_ADDRESS.ERROR.TOO_MANY_ADDRESSES",3,"translateParams",4,"ngIf"],[3,"ngClass",4,"ngIf"],["size","12","size-sm","6"],["color","danger","fill","outline","shape","round","expand","full",3,"click"],["slot","start","name","close"],["translate","GENERATE_ADDRESS.BUTTON.CANCEL"],["expand","full","fill","outline","shape","round","type","submit","color","primary",3,"disabled"],["slot","start","name","send"],["translate","GENERATE_ADDRESS.BUTTON.CHANGE_ADDRESS_NUMBER"],["lines","none","translate","GENERATE_ADDRESS.ERROR.TOO_MANY_ADDRESSES",1,"wrong-input",3,"translateParams"],["color","primary","position","floating","translate","GLOBAL.PASSWORD"],["name","passphrase","type","password","required","",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(u.Xb(0,"ion-header"),u.Xb(1,"ion-toolbar"),u.Xb(2,"ion-buttons",0),u.Sb(3,"ion-back-button",1),u.Wb(),u.Sb(4,"ion-title",2),u.Wb(),u.Wb(),u.Xb(5,"ion-content"),u.Xb(6,"ion-grid"),u.Xb(7,"ion-row"),u.Xb(8,"ion-col"),u.Sb(9,"p",3),u.Wb(),u.Wb(),u.Gc(10,R,19,11,"form",4),u.Gc(11,w,1,0,"ng-template",null,5,u.Hc),u.Wb(),u.Wb()),2&e){var n=u.yc(12);u.Fb(10),u.pc("ngIf",!t.loading)("ngIfElse",n)}},directives:[o.u,o.X,o.j,o.f,o.g,o.V,f.a,o.r,o.t,o.K,o.q,i.m,s.p,s.j,s.k,o.A,o.x,i.k,o.z,o.w,o.db,s.n,s.i,s.l,o.i,o.v,o.hb,o.R],styles:[""]}),A)}],W=((D=function t(){e(this,t)}).\u0275mod=u.Pb({type:D}),D.\u0275inj=u.Ob({factory:function(e){return new(e||D)},imports:[[c.j.forChild(O)],c.j]}),D),_=((x=function t(){e(this,t)}).\u0275mod=u.Pb({type:x}),x.\u0275inj=u.Ob({factory:function(e){return new(e||x)},imports:[[i.c,s.e,o.Y,f.c.forChild(),W]]}),x)}}])}();