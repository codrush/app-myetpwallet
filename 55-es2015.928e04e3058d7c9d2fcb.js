(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{"vj+n":function(e,t,n){"use strict";n.r(t),n.d(t,"OpenFilePageModule",(function(){return O}));var i=n("ofXK"),o=n("3Pt+"),r=n("TEn/"),c=n("tyNb"),l=n("mrSG"),a=n("fXoL"),s=n("BZA/"),b=n("Fvwb"),d=n("sYmb"),f=n("3LUQ");function p(e,t){if(1&e){const e=a.Yb();a.Xb(0,"ion-row"),a.Xb(1,"ion-button",20),a.fc("click",(function(){return a.Ac(e),a.yc(5).click()})),a.Sb(2,"ion-icon",21),a.Sb(3,"span",22),a.Wb(),a.Xb(4,"input",23,24),a.fc("change",(function(t){return a.Ac(e),a.jc(2).open(t)})),a.Wb(),a.Wb()}}function u(e,t){if(1&e&&(a.Xb(0,"ion-row"),a.Xb(1,"ion-col",28),a.Xb(2,"ion-button",29),a.Sb(3,"ion-icon",30),a.Sb(4,"span",31),a.Wb(),a.Wb(),a.Wb()),2&e){a.jc(2);const e=a.yc(1);a.Fb(2),a.pc("disabled",!e.form.valid)}}function g(e,t){if(1&e){const e=a.Yb();a.Xb(0,"div"),a.Xb(1,"ion-row"),a.Sb(2,"ion-icon",25),a.Wb(),a.Xb(3,"ion-item"),a.Sb(4,"ion-label",26),a.Xb(5,"ion-input",27),a.fc("ngModelChange",(function(t){return a.Ac(e),a.jc(2).password=t})),a.Wb(),a.Wb(),a.Sb(6,"br"),a.Gc(7,u,5,1,"ion-row",15),a.Wb()}if(2&e){const e=a.jc(2);a.Fb(5),a.pc("ngModel",e.password),a.Fb(2),a.pc("ngIf",!e.isMobile)}}function h(e,t){if(1&e){const e=a.Yb();a.Xb(0,"form",16,17),a.fc("ngSubmit",(function(){a.Ac(e);const t=a.jc();return t.decrypt(t.password)})),a.Xb(2,"ion-item",18),a.Sb(3,"h1",19),a.Wb(),a.Gc(4,p,6,0,"ion-row",15),a.Gc(5,g,8,2,"div",15),a.Wb()}if(2&e){const e=a.jc();a.Fb(4),a.pc("ngIf",!e.fileLoaded&&!e.isMobile),a.Fb(1),a.pc("ngIf",e.fileLoaded)}}function S(e,t){1&e&&a.Sb(0,"ion-row",32)}function m(e,t){if(1&e){const e=a.Yb();a.Xb(0,"div",35),a.Xb(1,"input",36),a.fc("change",(function(t){return a.Ac(e),a.jc(2).open(t)})),a.Wb(),a.Xb(2,"label",37),a.Sb(3,"ion-icon",21),a.Sb(4,"span",22),a.Wb(),a.Wb()}}function I(e,t){if(1&e){const e=a.Yb();a.Xb(0,"ion-button",38),a.fc("click",(function(){a.Ac(e);const t=a.jc(2);return t.decrypt(t.password)})),a.Sb(1,"ion-icon",30),a.Sb(2,"span",31),a.Wb()}if(2&e){const e=a.jc(2);a.pc("disabled",!e.password)}}function _(e,t){if(1&e&&(a.Xb(0,"ion-footer"),a.Gc(1,m,5,0,"div",33),a.Gc(2,I,3,1,"ion-button",34),a.Wb()),2&e){const e=a.jc();a.Fb(1),a.pc("ngIf",!e.fileLoaded),a.Fb(1),a.pc("ngIf",e.fileLoaded)}}const w=[{path:"",component:(()=>{class e{constructor(e,t,n,i,o){this.metaverseService=e,this.walletService=t,this.translate=n,this.router=i,this.alertService=o,this.disclaimer_agreed=!1,this.password="",this.fileLoaded=!1}ngOnInit(){this.isMobile=this.walletService.isMobile()}ionViewWillEnter(){this.data=void 0,this.fileLoaded=!1,this.disclaimer_agreed=!1,this.password=""}open(e){let t=e.target.files,n=new FileReader;n.onload=e=>{let t=e.target.result;try{this.data=JSON.parse(t),this.walletService.setWallet(this.data).then(()=>this.fileLoaded=!0)}catch(e){console.error(e),this.alertService.showMessage("OPEN_FILE.WRONG_FILE.TITLE","OPEN_FILE.WRONG_FILE.SUBTITLE","")}},t[0]&&n.readAsText(t[0])}decrypt(e){return Object(l.a)(this,void 0,void 0,(function*(){try{yield this.alertService.showLoading(),yield this.metaverseService.dataReset(),yield this.walletService.setSeed(e);const t=yield this.walletService.getMasterPublicKey(e);yield this.walletService.setXpub(t);const n=yield this.walletService.getWallet(e),i=yield this.walletService.getAddressIndexFromWallet(),o=yield this.walletService.generateAddresses(n,0,i);yield this.metaverseService.setAddresses(o),yield this.walletService.setVmAddressFromPassphrase(e),yield this.walletService.saveSessionAccount(e),yield this.router.navigate(["/loading"],{state:{data:{reset:!0}}}),yield this.alertService.stopLoading()}catch(t){console.error(t),yield this.alertService.stopLoading(),this.alertService.showError("OPEN_FILE.WRONG_PASSWORD","")}}))}}return e.\u0275fac=function(t){return new(t||e)(a.Rb(s.a),a.Rb(b.a),a.Rb(d.e),a.Rb(c.h),a.Rb(f.a))},e.\u0275cmp=a.Lb({type:e,selectors:[["app-open-file"]],decls:25,vars:4,consts:[["slot","start"],["defaultHref","/login/open"],["translate","OPEN_FILE.TITLE"],["size-md","12","size-lg","6","offset-lg","3"],["translate","DISCLAIMER.HEADLINE",1,"pageHeadline"],["translate","DISCLAIMER.INTRODUCTION"],["translate","DISCLAIMER.LIST_INTRODUCTION"],["translate","DISCLAIMER.LIST_ITEM_1"],["translate","DISCLAIMER.LIST_ITEM_2"],["translate","DISCLAIMER.LIST_ITEM_3"],["translate","DISCLAIMER.LIST_ITEM_4"],["id","disclaimer-agree-label","text-wrap","","translate","DISCLAIMER.READ_AND_AGREE"],["id","disclaimer-agree",3,"ngModel","ngModelChange"],["lines","none","class","buttons-container",3,"ngSubmit",4,"ngIf"],["class","buttons-container",4,"ngIf"],[4,"ngIf"],["lines","none",1,"buttons-container",3,"ngSubmit"],["importForm","ngForm"],["lines","none",1,"center-text"],["translate","OPEN_FILE.IMPORT_FILE"],["fill","outline","shape","round",3,"click"],["slot","start","name","download"],["translate","OPEN_FILE.CHOOSE_A_FILE"],["name","file","type","file","id","file","accept",".json",1,"ion-hide",3,"change"],["f",""],["name","md-checkmark-circle",1,"verifiedFile"],["color","primary","position","floating","translate","OPEN_FILE.PASSWORD"],["name","password","id","password-input","type","password","required","",3,"ngModel","ngModelChange"],["size","12","size-sm","6","offset-sm","3"],["type","submit","expand","full","fill","outline","shape","round","id","submit-button","color","primary",3,"disabled"],["slot","start","name","arrow-forward"],["translate","OPEN_FILE.IMPORT_BUTTON"],[1,"buttons-container"],["class","footer-inputfile",4,"ngIf"],["color","primary","type","submit","expand","full",3,"disabled","click",4,"ngIf"],[1,"footer-inputfile"],["type","file","name","file","id","file","accept",".json",1,"inputfile",3,"change"],["for","file"],["color","primary","type","submit","expand","full",3,"disabled","click"]],template:function(e,t){1&e&&(a.Xb(0,"ion-header"),a.Xb(1,"ion-toolbar"),a.Xb(2,"ion-buttons",0),a.Sb(3,"ion-back-button",1),a.Wb(),a.Sb(4,"ion-title",2),a.Wb(),a.Wb(),a.Xb(5,"ion-content"),a.Xb(6,"ion-grid"),a.Xb(7,"ion-row"),a.Xb(8,"ion-col",3),a.Sb(9,"h2",4),a.Sb(10,"p",5),a.Sb(11,"p",6),a.Xb(12,"ol"),a.Sb(13,"li",7),a.Sb(14,"li",8),a.Sb(15,"li",9),a.Sb(16,"li",10),a.Wb(),a.Xb(17,"ion-item"),a.Sb(18,"ion-label",11),a.Xb(19,"ion-checkbox",12),a.fc("ngModelChange",(function(e){return t.disclaimer_agreed=e})),a.Wb(),a.Wb(),a.Gc(20,h,6,2,"form",13),a.Gc(21,S,1,0,"ion-row",14),a.Sb(22,"br"),a.Sb(23,"br"),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Gc(24,_,3,2,"ion-footer",15)),2&e&&(a.Fb(19),a.pc("ngModel",t.disclaimer_agreed),a.Fb(1),a.pc("ngIf",t.disclaimer_agreed),a.Fb(1),a.pc("ngIf",!t.disclaimer_agreed),a.Fb(3),a.pc("ngIf",t.isMobile&&t.disclaimer_agreed))},directives:[r.u,r.X,r.j,r.f,r.g,r.V,d.a,r.r,r.t,r.K,r.q,r.x,r.z,r.p,r.c,o.i,o.l,i.m,o.p,o.j,o.k,r.i,r.v,r.w,r.hb,o.n,r.s],styles:[".button[_ngcontent-%COMP%]{margin:auto}.center-text[_ngcontent-%COMP%]{text-align:center}.my-button-class[_ngcontent-%COMP%]{font-size:1.25em;font-weight:700;color:#fff;background-color:#000;display:inline-block}.inputfile[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.scroll-content[_ngcontent-%COMP%]{padding-bottom:200px!important}.inputfile[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{font-size:1.25em!important;font-weight:700;background-color:var(--ion-color-secondary);margin:50px auto auto;padding:5px 15px;border-radius:2.5px;display:block;color:#fff;font-size:1em;transition:all .4s;cursor:pointer}ion-footer[_ngcontent-%COMP%]   .inputfile[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{margin-top:0;height:100%;padding-top:12px}.footer-inputfile[_ngcontent-%COMP%]{text-align:center;height:100%}.inputfile[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:hover, .inputfile[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%]{opacity:.9}.inputfile[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:8px}.inputfile[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%]{outline:1px dotted #000;outline:5px auto -webkit-focus-ring-color}.buttons-container[_ngcontent-%COMP%]{height:220px}.verifiedFile[_ngcontent-%COMP%]{color:var(--ion-color-secondary);font-size:50px;margin-left:calc(50% - 25px)}"]}),e})()}];let M=(()=>{class e{}return e.\u0275mod=a.Pb({type:e}),e.\u0275inj=a.Ob({factory:function(t){return new(t||e)},imports:[[c.j.forChild(w)],c.j]}),e})(),O=(()=>{class e{}return e.\u0275mod=a.Pb({type:e}),e.\u0275inj=a.Ob({factory:function(t){return new(t||e)},imports:[[i.c,o.e,r.Y,d.c.forChild(),M]]}),e})()}}]);