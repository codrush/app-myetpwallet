(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{jcJX:function(e,t,n){"use strict";n.r(t),n.d(t,"AccountPageModule",(function(){return W}));var i=n("ofXK"),o=n("3Pt+"),s=n("TEn/"),l=n("tyNb"),r=n("mrSG"),c=n("pLZG"),a=n("fXoL"),h=n("BZA/"),d=n("Fvwb"),u=n("B180"),b=n("OaWH"),p=n("sYmb");function m(e,t){1&e&&a.Sb(0,"ion-icon",15)}function g(e,t){1&e&&(a.Xb(0,"div",4),a.Sb(1,"ion-icon",16),a.Wb())}const f=function(e){return{height:e}};function v(e,t){if(1&e&&a.Sb(0,"span",17),2&e){const e=a.jc();a.pc("translateParams",a.tc(1,f,e.height))}}function S(e,t){1&e&&a.Sb(0,"ion-progress-bar",18)}const y=function(e){return[e]};function I(e,t){if(1&e&&(a.Xb(0,"ion-menu-toggle",19),a.Xb(1,"ion-item",20),a.Sb(2,"ion-icon",21),a.Xb(3,"ion-label"),a.Ic(4),a.kc(5,"translate"),a.Wb(),a.Wb(),a.Wb()),2&e){const e=t.$implicit;a.Fb(1),a.pc("routerLink",a.tc(7,y,e.url)),a.Fb(1),a.pc("color",e.selected?"primary":"none")("ios",e.icon+"-outline")("md",e.icon+"-sharp"),a.Fb(2),a.Jc(a.lc(5,5,e.title))}}function M(e,t){if(1&e&&(a.Xb(0,"ion-menu-toggle",19),a.Xb(1,"ion-item",20),a.Sb(2,"ion-icon",21),a.Xb(3,"ion-label"),a.Ic(4),a.kc(5,"translate"),a.Wb(),a.Wb(),a.Wb()),2&e){const e=t.$implicit;a.Fb(1),a.pc("routerLink",a.tc(7,y,e.url)),a.Fb(1),a.pc("color",e.selected?"primary":"none")("ios",e.icon+"-outline")("md",e.icon+"-sharp"),a.Fb(2),a.Jc(a.lc(5,5,e.title))}}function P(e,t){if(1&e&&(a.Xb(0,"ion-menu-toggle",19),a.Xb(1,"ion-item",20),a.Sb(2,"ion-icon",21),a.Xb(3,"ion-label"),a.Ic(4),a.kc(5,"translate"),a.Wb(),a.Wb(),a.Wb()),2&e){const e=t.$implicit;a.Fb(1),a.pc("routerLink",a.tc(7,y,e.url)),a.Fb(1),a.pc("color",e.selected?"primary":"none")("ios",e.icon+"-outline")("md",e.icon+"-sharp"),a.Fb(2),a.Jc(a.lc(5,5,e.title))}}const E=[{path:"",component:(()=>{class e{constructor(e,t,n,i,o,s){this.metaverseService=e,this.platform=t,this.walletService=n,this.router=i,this.logoutService=o,this.globals=s,this.syncing=!1,this.syncingSmall=!1,this.offline=!1,this.selectedIndex=0,this.appItems=[{title:"BITIDENT.MENU_ENTRY",url:"/account/bitident",icon:"finger-print"},{title:"SWFT.MENU_ENTRY",url:"/account/swft",icon:"swap-horizontal"}],this.footerItems=[{title:"SETTINGS.MENU_ENTRY",url:"/account/settings",icon:"options"}],this.mainItems=[{title:"ACCOUNT.MENU_ENTRY",url:"/account/portfolio",icon:"home",selected:!1},{title:"IDENTITIES.MENU_ENTRY",url:"/account/identities",icon:"person"},{title:"SWAP.MENU_ENTRY",url:"/account/swap",icon:"arrow-back"},{title:"MST.MENU_ENTRY",url:"/account/mst",icon:"globe"},{title:"MIT.MENU_ENTRY",url:"/account/mit",icon:"create"},{title:"HISTORY.MENU_ENTRY",url:"/account/history",icon:"time"},{title:"ADVANCED.MENU_ENTRY",url:"/account/advanced",icon:"cog"}],this.update=()=>Object(r.a)(this,void 0,void 0,(function*(){return(yield this.metaverseService.getUpdateNeeded())?this.sync().then(()=>this.metaverseService.setUpdateTime()).catch(()=>console.log("Can't update")):null})),this.isOffline=()=>!this.syncingSmall&&this.offline,this.isSyncing=()=>this.syncingSmall,this.routerSubscription$=this.router.events.pipe(Object(c.a)(e=>e instanceof l.c)).subscribe(e=>{this.appItems.forEach(t=>{t.selected=!!e.url.startsWith(t.url)}),this.mainItems.forEach(t=>{t.selected=!!e.url.startsWith(t.url)}),this.footerItems.forEach(t=>{t.selected=!!e.url.startsWith(t.url)})}),this.readySubscription$=this.metaverseService.ready$.pipe(Object(c.a)(e=>e)).subscribe(()=>{const e=new Date;this.metaverseService.setUpdateTime(e),this.sync(),this.metaverseService.updateFees(),this.syncinterval=setInterval(()=>this.update(),5e3)})}ngOnInit(){this.walletService.hasSeed().then(e=>this.hasSeed=e),this.metaverseService.getDbUpdateNeeded().then(e=>{e&&this.router.navigate(["/loading"],{state:{data:{reset:!1}}})}).then(()=>this.update())}ionViewWillLeave(){this.readySubscription$&&this.readySubscription$.unsubscribe(),clearInterval(this.syncinterval)}ionViewWillEnter(){return Object(r.a)(this,void 0,void 0,(function*(){this.sync()}))}ngOnDestroy(){this.routerSubscription$&&this.routerSubscription$.unsubscribe()}sync(){return this.syncing?(this.syncingSmall=!1,Promise.resolve()):(this.syncing=!0,this.syncingSmall=!0,Promise.all([this.metaverseService.getData(),this.metaverseService.updateHeight()]).then(([e,t])=>{this.height=t,this.syncing=!1,this.syncingSmall=!1,this.offline=!1}).catch(e=>{console.error(e),this.syncing=!1,this.syncingSmall=!1,this.offline=!0}))}logout(){this.logoutService.logout()}}return e.\u0275fac=function(t){return new(t||e)(a.Rb(h.a),a.Rb(s.eb),a.Rb(d.a),a.Rb(l.h),a.Rb(u.a),a.Rb(b.a))},e.\u0275cmp=a.Lb({type:e,selectors:[["app-account"]],decls:25,vars:11,consts:[["contentId","main-content"],["contentId","main-content","type","overlay"],[1,"main-menu"],["src","/assets/logo.png","alt","Metaverse",1,"logo"],[1,"center"],["slot","start","name","eye",4,"ngIf"],["id","inbox-list"],["class","center",4,"ngIf"],[1,"center",3,"click"],["translate","MAIN_MENU.HEIGHT",3,"translateParams",4,"ngIf"],[1,"sync-divider","noPadding"],["class","sync-bar","type","indeterminate",4,"ngIf"],["auto-hide","false",4,"ngFor","ngForOf"],["translate","MAIN_MENU.APPS"],["id","main-content"],["slot","start","name","eye"],["color","danger","name","flash","size","large"],["translate","MAIN_MENU.HEIGHT",3,"translateParams"],["type","indeterminate",1,"sync-bar"],["auto-hide","false"],["lines","none","detail","false","routerDirection","root",3,"routerLink"],["slot","start",3,"color","ios","md"]],template:function(e,t){1&e&&(a.Xb(0,"ion-split-pane",0),a.Xb(1,"ion-menu",1),a.Xb(2,"ion-content",2),a.Sb(3,"img",3),a.Xb(4,"div",4),a.Ic(5),a.Gc(6,m,1,0,"ion-icon",5),a.Xb(7,"div"),a.Ic(8),a.kc(9,"async"),a.Wb(),a.Wb(),a.Xb(10,"ion-list",6),a.Gc(11,g,2,0,"div",7),a.Xb(12,"ion-buttons"),a.Xb(13,"ion-button",8),a.fc("click",(function(){return t.sync()})),a.Gc(14,v,1,3,"span",9),a.Wb(),a.Wb(),a.Xb(15,"ion-item-divider",10),a.Gc(16,S,1,0,"ion-progress-bar",11),a.Wb(),a.Gc(17,I,6,9,"ion-menu-toggle",12),a.Xb(18,"ion-item-divider"),a.Xb(19,"ion-label"),a.Sb(20,"ion-note",13),a.Wb(),a.Wb(),a.Gc(21,M,6,9,"ion-menu-toggle",12),a.Wb(),a.Wb(),a.Xb(22,"ion-footer"),a.Gc(23,P,6,9,"ion-menu-toggle",12),a.Wb(),a.Wb(),a.Sb(24,"ion-router-outlet",14),a.Wb()),2&e&&(a.Fb(5),a.Kc(" v",t.globals.version," "),a.Fb(1),a.pc("ngIf",!t.hasSeed),a.Fb(2),a.Jc("testnet"===a.lc(9,9,t.globals.network$)?"testnet":""),a.Fb(3),a.pc("ngIf",t.isOffline()),a.Fb(3),a.pc("ngIf",t.height),a.Fb(2),a.pc("ngIf",t.isSyncing()||!t.height),a.Fb(1),a.pc("ngForOf",t.mainItems),a.Fb(4),a.pc("ngForOf",t.appItems),a.Fb(2),a.pc("ngForOf",t.footerItems))},directives:[s.S,s.B,s.r,i.m,s.A,s.j,s.i,s.y,i.l,s.z,s.E,p.a,s.s,s.J,s.v,s.F,s.D,s.x,s.fb,l.i],pipes:[i.b,p.d],styles:[".logo[_ngcontent-%COMP%]{max-width:256px;margin:14px;pointer-events:none}ion-split-pane[_ngcontent-%COMP%]{--side-max-width:320px;-webkit-user-select:none;-moz-user-select:none;user-select:none}.sync-divider[_ngcontent-%COMP%]{background-color:transparent}"]}),e})(),children:[{path:"history",loadChildren:()=>Promise.all([n.e(4),n.e(0),n.e(38)]).then(n.bind(null,"CN/o")).then(e=>e.HistoryPageModule)},{path:"identities",loadChildren:()=>Promise.all([n.e(3),n.e(0),n.e(20)]).then(n.bind(null,"wEKJ")).then(e=>e.IdentitiesPageModule)},{path:"send",loadChildren:()=>Promise.all([n.e(1),n.e(0),n.e(24)]).then(n.bind(null,"VNuW")).then(e=>e.SendPageModule)},{path:"mst",loadChildren:()=>Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"JLTk")).then(e=>e.MstPageModule)},{path:"mit",loadChildren:()=>n.e(27).then(n.bind(null,"Cyv5")).then(e=>e.MitPageModule)},{path:"portfolio",loadChildren:()=>Promise.all([n.e(0),n.e(22)]).then(n.bind(null,"f4Sq")).then(e=>e.PortfolioPageModule)},{path:"confirm",loadChildren:()=>Promise.all([n.e(4),n.e(37)]).then(n.bind(null,"ktNH")).then(e=>e.ConfirmPageModule)},{path:"settings",loadChildren:()=>n.e(0).then(n.bind(null,"7wo0")).then(e=>e.SettingsPageModule)},{path:"bitident",loadChildren:()=>Promise.all([n.e(1),n.e(35)]).then(n.bind(null,"CvKF")).then(e=>e.BitidentPageModule)},{path:"swft",loadChildren:()=>Promise.all([n.e(1),n.e(3),n.e(0),n.e(16)]).then(n.bind(null,"VMct")).then(e=>e.SwftPageModule)},{path:"advanced",loadChildren:()=>n.e(29).then(n.bind(null,"u/Fq")).then(e=>e.AdvancedPageModule)},{path:"vote",loadChildren:()=>n.e(25).then(n.bind(null,"jUXg")).then(e=>e.VotePageModule)},{path:"swap",loadChildren:()=>n.e(15).then(n.bind(null,"MUVa")).then(e=>e.SwapPageModule)},{path:"send-vm",loadChildren:()=>Promise.all([n.e(1),n.e(0),n.e(23)]).then(n.bind(null,"/wb0")).then(e=>e.SendVmPageModule)},{path:"confirm-vm",loadChildren:()=>Promise.all([n.e(0),n.e(19)]).then(n.bind(null,"grBA")).then(e=>e.ConfirmVmPageModule)}]}];let N=(()=>{class e{}return e.\u0275mod=a.Pb({type:e}),e.\u0275inj=a.Ob({factory:function(t){return new(t||e)},imports:[[l.j.forChild(E)],l.j]}),e})(),W=(()=>{class e{}return e.\u0275mod=a.Pb({type:e}),e.\u0275inj=a.Ob({factory:function(t){return new(t||e)},imports:[[i.c,o.e,s.Y,p.c.forChild(),N]]}),e})()}}]);