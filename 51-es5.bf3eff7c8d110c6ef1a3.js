!function(){function t(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(c){o=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{rJJX:function(e,o,a){"use strict";a.r(o),a.d(o,"LoginAccountPageModule",(function(){return S}));var i,s,c,u=a("ofXK"),l=a("3Pt+"),b=a("TEn/"),d=a("tyNb"),p=a("mrSG"),f=a("fXoL"),h=a("BZA/"),m=a("Fvwb"),g=a("3LUQ"),v=a("sYmb"),w=[{path:"",component:(i=function(){function e(t,r,o,a){var i=this;n(this,e),this.mvs=t,this.router=r,this.walletService=o,this.alertService=a,this.account=history.state.data&&history.state.data.account?history.state.data.account:"",this.password="",this.passwordValid=function(t){return!!t&&t.length>3},this.complete=function(t){return!!t&&i.passwordValid(t)}}var o,a,i;return o=e,(a=[{key:"ngOnInit",value:function(){}},{key:"cancel",value:function(){this.router.navigate(["login"])}},{key:"importAccount",value:function(e,n){return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var o,a,i,s,c,u,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertService.showLoading();case 2:return r.prev=2,r.next=5,this.walletService.decryptAccount(e.content,n);case 5:return o=r.sent,r.next=8,Promise.all([this.walletService.setupAccount(e.name,o),this.walletService.setAccountParams(e.params)]);case 8:return r.next=10,Promise.all([this.walletService.getWallet(n),this.walletService.getAddressIndexFromWallet()]);case 10:return a=r.sent,i=t(a,2),s=i[0],c=i[1],r.next=16,this.walletService.generateAddresses(s,0,e.params.index||c);case 16:return u=r.sent,r.next=19,this.mvs.addAddresses(u);case 19:return r.next=21,this.walletService.getMasterPublicKey(n);case 21:return l=r.sent,r.next=24,this.walletService.setXpub(l);case 24:return r.next=26,this.walletService.saveSessionAccount(n);case 26:return r.next=28,this.walletService.setVmAddressFromPassphrase(n);case 28:this.alertService.stopLoading(),this.router.navigate(["/loading"],{state:{data:{reset:!0}}}),r.next=42;break;case 32:r.prev=32,r.t0=r.catch(2),r.t1=(console.error(r.t0.message),this.alertService.stopLoading(),r.t0.message),r.next="ERR_DECRYPT_WALLET"===r.t1?37:"ERR_ACCOUNT_NAME_UNKNOWN"===r.t1?39:41;break;case 37:return this.alertService.showError("MESSAGE.PASSWORD_WRONG",""),r.abrupt("break",42);case 39:return this.alertService.showError("LOGIN_ACCOUNT.MESSAGE.ERR_ACCOUNT_NAME_UNKNOWN",""),r.abrupt("break",42);case 41:this.alertService.showError("LOGIN_ACCOUNT.MESSAGE.ERR_IMPORT_ACCOUNT",r.t0.message);case 42:case"end":return r.stop()}}),r,this,[[2,32]])})))}},{key:"deleteAccount",value:function(t){return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertService.alertConfirm("LOGIN_ACCOUNT.FORGET.TITLE","LOGIN_ACCOUNT.FORGET.SUBTITLE","LOGIN_ACCOUNT.FORGET.BUTTON.BACK","LOGIN_ACCOUNT.FORGET.BUTTON.FORGET");case 2:if(e.t0=e.sent,!e.t0){e.next=7;break}return e.next=6,this.walletService.deleteAccount(t);case 6:this.router.navigate(["login"]);case 7:case"end":return e.stop()}}),e,this)})))}}])&&r(o.prototype,a),i&&r(o,i),e}(),i.\u0275fac=function(t){return new(t||i)(f.Rb(h.a),f.Rb(d.h),f.Rb(m.a),f.Rb(g.a))},i.\u0275cmp=f.Lb({type:i,selectors:[["app-login-account"]],decls:24,vars:3,consts:[["slot","start"],["defaultHref","/login"],["translate","LOGIN_ACCOUNT.TITLE"],[3,"ngSubmit"],["loginAccountForm","ngForm"],["size-md","12","size-lg","6","offset-lg","3"],[1,"center","top-padding"],["color","primary","position","floating","translate","LOGIN_ACCOUNT.PASSWORD"],["name","password","id","password-input","type","password","required","",3,"ngModel","ngModelChange"],["size","12","size-sm","6"],["expand","full","color","danger","fill","outline","shape","round",3,"click"],["slot","start","name","trash"],["translate","LOGIN_ACCOUNT.FORGET_BUTTON"],["type","submit","expand","full","fill","outline","shape","round",3,"disabled"],["slot","start","name","arrow-forward"],["translate","LOGIN_ACCOUNT.LOGIN_BUTTON"]],template:function(t,e){1&t&&(f.Xb(0,"ion-header"),f.Xb(1,"ion-toolbar"),f.Xb(2,"ion-buttons",0),f.Sb(3,"ion-back-button",1),f.Wb(),f.Sb(4,"ion-title",2),f.Wb(),f.Wb(),f.Xb(5,"ion-content"),f.Xb(6,"form",3,4),f.fc("ngSubmit",(function(){return e.importAccount(e.account,e.password)})),f.Xb(8,"ion-row"),f.Xb(9,"ion-col",5),f.Xb(10,"h2",6),f.Ic(11),f.Wb(),f.Xb(12,"ion-item"),f.Sb(13,"ion-label",7),f.Xb(14,"ion-input",8),f.fc("ngModelChange",(function(t){return e.password=t})),f.Wb(),f.Wb(),f.Xb(15,"ion-row"),f.Xb(16,"ion-col",9),f.Xb(17,"ion-button",10),f.fc("click",(function(){return e.deleteAccount(e.account.name)})),f.Sb(18,"ion-icon",11),f.Sb(19,"span",12),f.Wb(),f.Wb(),f.Xb(20,"ion-col",9),f.Xb(21,"ion-button",13),f.Sb(22,"ion-icon",14),f.Sb(23,"span",15),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&t&&(f.Fb(11),f.Jc(e.account.name),f.Fb(3),f.pc("ngModel",e.password),f.Fb(7),f.pc("disabled",!e.complete(e.password)))},directives:[b.u,b.X,b.j,b.f,b.g,b.V,v.a,b.r,l.p,l.j,l.k,b.K,b.q,b.x,b.z,b.w,b.hb,l.n,l.i,l.l,b.i,b.v],styles:[".top-padding[_ngcontent-%COMP%]{padding-top:10%}.more-bottom-padding[_ngcontent-%COMP%]{padding-bottom:80px}.center-psw[_ngcontent-%COMP%]{margin:auto}.center-info[_ngcontent-%COMP%]{margin:auto;text-align:center}"]}),i)}],O=((c=function t(){n(this,t)}).\u0275mod=f.Pb({type:c}),c.\u0275inj=f.Ob({factory:function(t){return new(t||c)},imports:[[d.j.forChild(w)],d.j]}),c),S=((s=function t(){n(this,t)}).\u0275mod=f.Pb({type:s}),s.\u0275inj=f.Ob({factory:function(t){return new(t||s)},imports:[[u.c,l.e,v.c.forChild(),b.Y,O]]}),s)}}])}();