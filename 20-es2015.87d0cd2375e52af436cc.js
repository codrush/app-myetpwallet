(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{iTUp:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("ofXK"),s=n("fXoL");let c=(()=>{class t{}return t.\u0275mod=s.Pb({type:t}),t.\u0275inj=s.Ob({factory:function(e){return new(e||t)},imports:[[i.c]]}),t})()},q5gJ:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("fXoL");let s=(()=>{class t{transform(t,e){return(t/Math.pow(10,e)).toLocaleString(void 0,{maximumFractionDigits:e})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.Qb({name:"format",type:t,pure:!0}),t})()},wEKJ:function(t,e,n){"use strict";n.r(e),n.d(e,"IdentitiesPageModule",(function(){return x}));var i=n("ofXK"),s=n("3Pt+"),c=n("TEn/"),o=n("tyNb"),r=n("mrSG"),a=n("UwpU"),b=n("fXoL"),d=n("BZA/"),l=n("Fvwb"),u=n("m5Kd"),m=n("sYmb");let p=(()=>{class t{constructor(t,e){this.actionSheetController=t,this.translate=e}default(t,e,n){return Object(r.a)(this,void 0,void 0,(function*(){let i;const s=[];n.forEach(t=>Object(r.a)(this,void 0,void 0,(function*(){s.push({text:yield this.translate.get(t.text).toPromise(),icon:t.icon,cssClass:"secondary",handler:()=>(o.dismiss(t.action),!1)})}))),s.push({text:yield this.translate.get(e||"GLOBAL.CANCEL").toPromise(),icon:"close",role:"cancel",cssClass:"danger",handler:()=>(o.dismiss("cancel"),!1)});const c={cssClass:"my-custom-class",header:void 0,buttons:s};t&&(c.header=yield this.translate.get(t).toPromise());const o=yield this.actionSheetController.create(c);return yield o.present(),yield o.onDidDismiss().then(t=>{i=t.data}),i}))}}return t.\u0275fac=function(e){return new(e||t)(b.bc(c.a),b.bc(m.e))},t.\u0275prov=b.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=n("q5gJ"),h=n("JvOL");function g(t,e){1&t&&b.Sb(0,"ion-spinner",7)}function v(t,e){if(1&t&&(b.Xb(0,"span"),b.Ic(1),b.kc(2,"format"),b.Wb()),2&t){const t=b.jc(3);b.Fb(1),b.Jc(b.mc(2,1,t.vmAddress.balance,18))}}function T(t,e){1&t&&b.Sb(0,"ion-spinner",35)}function S(t,e){if(1&t){const t=b.Yb();b.Xb(0,"ion-card"),b.Xb(1,"ion-card-header"),b.Xb(2,"ion-toolbar",9),b.Xb(3,"div",10),b.fc("click",(function(){b.Ac(t);const e=b.jc(2);return e.walletService.copy(e.vmAddress.address,"address")})),b.Xb(4,"ion-card-title"),b.Sb(5,"img",11),b.Sb(6,"span",12),b.Wb(),b.Xb(7,"ion-card-subtitle"),b.Ic(8),b.Wb(),b.Wb(),b.Xb(9,"ion-buttons",13),b.Xb(10,"ion-button",14),b.fc("click",(function(){return b.Ac(t),b.jc(2).exportPrivateKey()})),b.Sb(11,"ion-icon",15),b.Wb(),b.Xb(12,"ion-button",16),b.fc("click",(function(){b.Ac(t);const e=b.jc(2);return e.show(e.vmAddress.address)})),b.Sb(13,"ion-icon",17),b.Wb(),b.Xb(14,"ion-button",18),b.fc("click",(function(){return b.Ac(t),b.jc(2).swap()})),b.Sb(15,"ion-icon",19),b.Wb(),b.Wb(),b.Xb(16,"ion-buttons",20),b.Xb(17,"ion-button",21),b.fc("click",(function(){b.Ac(t);const e=b.jc(2);return e.mobileMenu(e.vmAddress.address,"hex")})),b.Sb(18,"ion-icon",22),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(19,"ion-card-content"),b.Xb(20,"ion-item",23),b.Xb(21,"ion-item",24),b.Xb(22,"img",25),b.fc("error",(function(e){return b.Ac(t),b.jc(2).errorImg(e)})),b.Wb(),b.Sb(23,"ion-label",26),b.Sb(24,"ion-col",27),b.Wb(),b.Xb(25,"ion-buttons",28),b.Xb(26,"ion-button",29),b.fc("click",(function(){b.Ac(t);const e=b.jc(2);return e.sendVm("ETP",e.vmAddress.address)})),b.Wb(),b.Wb(),b.Wb(),b.Xb(27,"ion-item",23),b.Xb(28,"ion-item",24),b.Xb(29,"img",25),b.fc("error",(function(e){return b.Ac(t),b.jc(2).errorImg(e)})),b.Wb(),b.Xb(30,"ion-label",30),b.Ic(31,"ETP"),b.Wb(),b.Xb(32,"ion-col",31),b.Gc(33,v,3,4,"span",6),b.Gc(34,T,1,0,"ion-spinner",32),b.Wb(),b.Wb(),b.Xb(35,"ion-buttons",28),b.Xb(36,"ion-button",33),b.fc("click",(function(){b.Ac(t);const e=b.jc(2);return e.sendVm("ETP",e.vmAddress.address)})),b.Sb(37,"span",34),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()}if(2&t){const t=b.jc(2);b.Fb(5),b.pc("src","assets/icon/default.png",b.Cc),b.Fb(3),b.Kc(" ",t.vmAddress.address," "),b.Fb(14),b.pc("src","assets/icon/default_mst.png",b.Cc),b.Fb(7),b.pc("src","assets/icon/ETP.png",b.Cc),b.Fb(4),b.pc("ngIf",t.vmAddress&&void 0!==t.vmAddress.balance),b.Fb(1),b.pc("ngIf",!t.vmAddress||null==t.vmAddress.balance)}}function X(t,e){1&t&&(b.Xb(0,"ion-card"),b.Xb(1,"ion-card-content"),b.Xb(2,"ion-toolbar",9),b.Xb(3,"ion-card-title"),b.Sb(4,"span",36),b.Wb(),b.Xb(5,"ion-buttons",2),b.Xb(6,"ion-button",37),b.Sb(7,"span",38),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb())}function y(t,e){if(1&t){const t=b.Yb();b.Xb(0,"div"),b.Xb(1,"ion-card-title",10),b.fc("click",(function(){b.Ac(t);const e=b.jc().$implicit,n=b.jc(2);return n.walletService.copy(n.addressBalancesObject[e].AVATAR,"avatar")})),b.Sb(2,"img",11),b.Ic(3),b.Wb(),b.Xb(4,"ion-card-subtitle",10),b.fc("click",(function(){b.Ac(t);const e=b.jc().$implicit;return b.jc(2).walletService.copy(e,"address")})),b.Ic(5),b.Wb(),b.Wb()}if(2&t){const t=b.jc().$implicit,e=b.jc(2);b.Fb(2),b.pc("src","assets/icon/default_avatar.png",b.Cc),b.Fb(1),b.Kc(" ",e.addressBalancesObject[t].AVATAR," "),b.Fb(2),b.Kc(" ",t," ")}}function j(t,e){if(1&t){const t=b.Yb();b.Xb(0,"div"),b.Xb(1,"ion-card-title"),b.Xb(2,"ion-button",42),b.Sb(3,"ion-icon",43),b.Sb(4,"span",44),b.Wb(),b.Wb(),b.Xb(5,"ion-card-subtitle",10),b.fc("click",(function(){b.Ac(t);const e=b.jc().$implicit;return b.jc(2).walletService.copy(e,"address")})),b.Ic(6),b.Wb(),b.Wb()}if(2&t){const t=b.jc().$implicit;b.Fb(2),b.rc("routerLink","./create/",t,""),b.Fb(4),b.Kc(" ",t," ")}}const W=function(t){return{"default-logo":t}};function A(t,e){if(1&t){const t=b.Yb();b.Xb(0,"ion-item",23),b.Xb(1,"ion-item",24),b.Xb(2,"img",46),b.fc("error",(function(e){return b.Ac(t),b.jc(4).errorImg(e)})),b.Wb(),b.Xb(3,"ion-label",30),b.Ic(4),b.Wb(),b.Xb(5,"ion-col",31),b.Ic(6),b.Wb(),b.Xb(7,"ion-col",41),b.Ic(8),b.Wb(),b.Wb(),b.Xb(9,"ion-buttons",28),b.Xb(10,"ion-button",33),b.fc("click",(function(){b.Ac(t);const e=b.jc().$implicit,n=b.jc().$implicit;return b.jc(2).send(e.symbol,n)})),b.Sb(11,"span",34),b.Wb(),b.Wb(),b.Wb()}if(2&t){const t=b.jc().$implicit,e=b.jc().$implicit,n=b.jc(2);b.Fb(2),b.pc("src",t.icon,b.Cc)("ngClass",b.tc(5,W,"default_mst"==t.icon)),b.Fb(2),b.Jc(t.symbol),b.Fb(2),b.Jc(n.format(n.addressBalancesObject[e].MST[t.symbol].available+n.addressBalancesObject[e].MST[t.symbol].unconfirmed+n.addressBalancesObject[e].MST[t.symbol].frozen,n.addressBalancesObject[e].MST[t.symbol].decimals)||0),b.Fb(2),b.Kc(" ",n.format(n.addressBalancesObject[e].MST[t.symbol].frozen,n.addressBalancesObject[e].MST[t.symbol].decimals)||0," ")}}function I(t,e){if(1&t&&(b.Xb(0,"div"),b.Gc(1,A,12,7,"ion-item",45),b.Wb()),2&t){const t=e.$implicit,n=b.jc().$implicit,i=b.jc(2);b.Fb(1),b.pc("ngIf",!t.hidden&&i.addressBalancesObject[n]&&i.addressBalancesObject[n].MST&&i.addressBalancesObject[n].MST[t.symbol])}}const O=function(){return["order","-1"]};function E(t,e){if(1&t){const t=b.Yb();b.Xb(0,"ion-card"),b.Xb(1,"ion-card-header"),b.Xb(2,"ion-toolbar",9),b.Gc(3,y,6,3,"div",6),b.Gc(4,j,7,2,"div",6),b.Xb(5,"ion-buttons",13),b.Xb(6,"ion-button",16),b.fc("click",(function(){b.Ac(t);const n=e.$implicit;return b.jc(2).show(n)})),b.Sb(7,"ion-icon",17),b.Wb(),b.Xb(8,"ion-button",18),b.fc("click",(function(){b.Ac(t);const n=e.$implicit;return b.jc(2).history(n)})),b.Sb(9,"ion-icon",39),b.Wb(),b.Wb(),b.Xb(10,"ion-buttons",20),b.Xb(11,"ion-button",21),b.fc("click",(function(){b.Ac(t);const n=e.$implicit;return b.jc(2).mobileMenu(n)})),b.Sb(12,"ion-icon",22),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(13,"ion-card-content"),b.Xb(14,"ion-item",23),b.Xb(15,"ion-item",24),b.Xb(16,"img",25),b.fc("error",(function(e){return b.Ac(t),b.jc(2).errorImg(e)})),b.Wb(),b.Sb(17,"ion-label",26),b.Sb(18,"ion-col",27),b.Sb(19,"ion-col",40),b.Wb(),b.Xb(20,"ion-buttons",28),b.Xb(21,"ion-button",29),b.fc("click",(function(){b.Ac(t);const n=e.$implicit;return b.jc(2).send("ETP",n)})),b.Wb(),b.Wb(),b.Wb(),b.Xb(22,"ion-item",23),b.Xb(23,"ion-item",24),b.Xb(24,"img",25),b.fc("error",(function(e){return b.Ac(t),b.jc(2).errorImg(e)})),b.Wb(),b.Xb(25,"ion-label",30),b.Ic(26,"ETP"),b.Wb(),b.Xb(27,"ion-col",31),b.Ic(28),b.Wb(),b.Xb(29,"ion-col",41),b.Ic(30),b.Wb(),b.Wb(),b.Xb(31,"ion-buttons",28),b.Xb(32,"ion-button",33),b.fc("click",(function(){b.Ac(t);const n=e.$implicit;return b.jc(2).send("ETP",n)})),b.Sb(33,"span",34),b.Wb(),b.Wb(),b.Wb(),b.Gc(34,I,2,1,"div",8),b.kc(35,"orderBy"),b.Wb(),b.Wb()}if(2&t){const t=e.$implicit,n=b.jc(2);b.Fb(3),b.pc("ngIf",n.addressBalancesObject[t]&&n.addressBalancesObject[t].AVATAR),b.Fb(1),b.pc("ngIf",!n.addressBalancesObject[t]||!n.addressBalancesObject[t].AVATAR),b.Fb(12),b.pc("src","assets/icon/default_mst.png",b.Cc),b.Fb(8),b.pc("src","assets/icon/ETP.png",b.Cc),b.Fb(4),b.Kc(" ",n.addressBalancesObject[t]&&n.addressBalancesObject[t].ETP?n.format(n.addressBalancesObject[t].ETP.available+n.addressBalancesObject[t].ETP.unconfirmed+n.addressBalancesObject[t].ETP.frozen||0,n.addressBalancesObject[t].ETP.decimals):0," "),b.Fb(2),b.Kc(" ",n.addressBalancesObject[t]&&n.addressBalancesObject[t].ETP?n.format(n.addressBalancesObject[t].ETP.frozen,n.addressBalancesObject[t].ETP.decimals):0," "),b.Fb(4),b.pc("ngForOf",b.mc(35,7,n.msts,b.sc(10,O)))}}function k(t,e){if(1&t&&(b.Xb(0,"div"),b.Gc(1,S,38,6,"ion-card",6),b.Gc(2,X,8,0,"ion-card",6),b.Gc(3,E,36,11,"ion-card",8),b.Wb()),2&t){const t=b.jc();b.Fb(1),b.pc("ngIf",t.vmAddress&&t.vmAddress.address),b.Fb(1),b.pc("ngIf",!t.vmAddress||!t.vmAddress.address),b.Fb(1),b.pc("ngForOf",t.addresses)}}const P=[{path:"",component:(()=>{class t{constructor(t,e,n,i,s,c){this.metaverseService=t,this.modalCtrl=e,this.walletService=n,this.vmService=i,this.router=s,this.actionSheetService=c,this.addressBalancesObject={},this.tickers={},this.loading=!0,this.msts=[],this.vmAddress={},this.history=t=>this.router.navigate(["account","history","ETP"],{state:{data:{addresses:[t]}}}),this.format=(t,e)=>t/Math.pow(10,e),this.send=(t,e)=>this.router.navigate(["account","send",t],{state:{data:{sender:e}}}),this.sendVm=(t,e)=>this.router.navigate(["account","send-vm",t],{state:{data:{sender:e}}}),this.swap=()=>this.router.navigate(["account","swap"]),this.exportPrivateKey=()=>this.router.navigate(["account","identities","export-private-key-vm"]),this.errorImg=t=>t.target.remove(),this.isMobile=this.walletService.isMobile(),this.metaverseService.getAddresses().then(t=>{Array.isArray(t)&&t.length||this.router.navigate(["/"])})}ngOnInit(){}ionViewDidEnter(){return Object(r.a)(this,void 0,void 0,(function*(){this.loadTickers(),this.showBalances();const t=yield this.walletService.getVmAddresses();this.vmAddress=t[0]||{},this.vmAddress.address&&(this.vmAddress.balance=yield this.vmService.balanceOf(this.vmAddress.address))}))}showBalances(){return Object(r.a)(this,void 0,void 0,(function*(){const t=yield this.metaverseService.getAddresses();this.addresses=t,this.addressBalancesObject=yield this.metaverseService.getAddressBalances();const e=yield this.metaverseService.assetOrder(),n=yield this.metaverseService.getHiddenMst(),i=yield this.metaverseService.getDefaultIcon();this.msts=[],e.forEach(t=>{this.msts.push({symbol:t,icon:i.MST[t]||"assets/icon/default_mst.png",hidden:-1!==n.indexOf(t),order:e.indexOf(t)})}),this.loading=!1}))}loadTickers(){return Object(r.a)(this,void 0,void 0,(function*(){[this.base,this.tickers]=yield this.metaverseService.getBaseAndTickers()}))}show(t){return Object(r.a)(this,void 0,void 0,(function*(){const e=t,n=t,i=yield this.modalCtrl.create({component:a.a,componentProps:{title:n,content:e}});yield i.present()}))}createAsset(t,e){this.router.navigate(["account","mst","create"])}registerMIT(t,e){this.router.navigate(["account","mit","create"])}mobileMenu(t,e="metaverse"){return Object(r.a)(this,void 0,void 0,(function*(){const n=[{icon:"qr-code",text:"IDENTITIES.BUTTON.QRCODE",action:"qrcode"}];switch("metaverse"===e?n.push({icon:"time",text:"IDENTITIES.BUTTON.HISTORY",action:"history"}):"hex"===e&&n.push({icon:"swap-horizontal",text:"IDENTITIES.BUTTON.SWAP",action:"swap"},{icon:"key",text:"IDENTITIES.BUTTON.EXPORT_PRIVATE_KEY",action:"key"}),yield this.actionSheetService.default("","",n)){case"qrcode":this.show(t);break;case"history":this.history(t);break;case"swap":this.swap();break;case"key":this.exportPrivateKey()}}))}}return t.\u0275fac=function(e){return new(e||t)(b.Rb(d.a),b.Rb(c.bb),b.Rb(l.a),b.Rb(u.a),b.Rb(o.h),b.Rb(p))},t.\u0275cmp=b.Lb({type:t,selectors:[["app-identities"]],decls:11,vars:2,consts:[["slot","start"],["translate","IDENTITIES.TITLE"],["slot","end"],["routerLink","./generate-address"],["slot","icon-only","name","add"],["class","general-spinner","name","dots",4,"ngIf"],[4,"ngIf"],["name","dots",1,"general-spinner"],[4,"ngFor","ngForOf"],[2,"background-color","transparent"],[1,"pointer",3,"click"],[1,"avatar-logo",3,"src"],["translate","IDENTITIES.VM_ADDRESS"],["slot","end",1,"ion-hide-sm-down"],["color","primary","id","key",1,"key-btn",3,"click"],["slot","icon-only","name","key","size","small"],["color","primary","id","qrcode",1,"qrcode-btn",3,"click"],["slot","icon-only","name","qr-code","size","small"],["color","primary","id","time",1,"time-btn",3,"click"],["slot","icon-only","name","swap-horizontal","size","small"],["slot","end",1,"ion-hide-sm-up"],["color","primary","id","morebtn",3,"click"],["slot","icon-only","name","ellipsis-horizontal","size","small"],[1,"ion-no-padding"],["lines","none",1,"inside-line"],[1,"coinlogo",3,"src","error"],["translate","MST.GRID.SYMBOL",1,"symbol"],["translate","IDENTITIES.TOTAL",1,"right"],["slot","end",1,"right-buttons"],["color","danger","fill","outline","shape","round","translate","MST.GRID.BUTTON.SEND",1,"invisible",3,"click"],[1,"symbol"],[1,"overflow","right"],["name","dots",4,"ngIf"],["color","danger","fill","outline","shape","round",3,"click"],["translate","MST.GRID.BUTTON.SEND"],["name","dots"],["translate","IDENTITIES.NO_VM_ADDRESS"],["color","primary","routerLink","./generate-vm-address"],["translate","IDENTITIES.BUTTON.CREATE_VM_ADDRESS"],["slot","icon-only","name","time","size","small"],["translate","IDENTITIES.FROZEN",1,"ion-hide-sm-down","right"],[1,"ion-hide-sm-down","overflow","right"],["color","primary","fill","clear",1,"create-avatar-btn",3,"routerLink"],["slot","start","name","person-add","size","small"],["translate","IDENTITIES.BUTTON.CREATE_AVATAR"],["class","ion-no-padding",4,"ngIf"],[1,"coinlogo",3,"src","ngClass","error"]],template:function(t,e){1&t&&(b.Xb(0,"ion-header"),b.Xb(1,"ion-toolbar"),b.Xb(2,"ion-buttons",0),b.Sb(3,"ion-menu-button"),b.Wb(),b.Sb(4,"ion-title",1),b.Xb(5,"ion-buttons",2),b.Xb(6,"ion-button",3),b.Sb(7,"ion-icon",4),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(8,"ion-content"),b.Gc(9,g,1,0,"ion-spinner",5),b.Gc(10,k,4,3,"div",6),b.Wb()),2&t&&(b.Fb(9),b.pc("ngIf",e.loading),b.Fb(1),b.pc("ngIf",!e.loading))},directives:[c.u,c.X,c.j,c.C,c.V,m.a,c.i,c.fb,o.i,c.v,c.r,i.m,c.R,i.l,c.k,c.m,c.o,c.n,c.l,c.x,c.z,c.q,i.k],pipes:[f.a,h.a],styles:[".coinlogo[_ngcontent-%COMP%]{width:28px;margin-right:20px;margin-top:4px}ion-card-content[_ngcontent-%COMP%]{text-align:left}.avatar-logo[_ngcontent-%COMP%]{width:18px;display:inline-block}.address-text[_ngcontent-%COMP%]{border:0!important;resize:none;padding-top:10px;margin-right:10px}.copy-btn[_ngcontent-%COMP%]{top:-12px;position:absolute}.qrcode-btn[_ngcontent-%COMP%]{height:30px}.address[_ngcontent-%COMP%]{margin:0}.symbol[_ngcontent-%COMP%]{display:inline-block}.create-avatar-btn[_ngcontent-%COMP%]{left:-12px;position:relative;height:24px}.inside-line[_ngcontent-%COMP%]{width:100%}.right-buttons[_ngcontent-%COMP%]{margin-right:10px;margin-left:20px}@media screen and (max-width:630px){.right-buttons[_ngcontent-%COMP%]{margin-right:0;margin-left:0}}.general-spinner[_ngcontent-%COMP%]{margin-top:40px}"]}),t})()},{path:"create/:address",loadChildren:()=>n.e(39).then(n.bind(null,"5El1")).then(t=>t.CreatePageModule)},{path:"generate-address",loadChildren:()=>n.e(41).then(n.bind(null,"iVTo")).then(t=>t.GenerateAddressPageModule)},{path:"generate-vm-address",loadChildren:()=>n.e(42).then(n.bind(null,"6abZ")).then(t=>t.GenerateVmAddressPageModule)},{path:"export-private-key-vm",loadChildren:()=>n.e(40).then(n.bind(null,"eQM5")).then(t=>t.ExportPrivateKeyVmPageModule)}];let w=(()=>{class t{}return t.\u0275mod=b.Pb({type:t}),t.\u0275inj=b.Ob({factory:function(e){return new(e||t)},imports:[[o.j.forChild(P)],o.j]}),t})();var M=n("Dvla"),B=n("pCZr"),C=n("iTUp");let x=(()=>{class t{}return t.\u0275mod=b.Pb({type:t}),t.\u0275inj=b.Ob({factory:function(e){return new(e||t)},imports:[[i.c,s.e,m.c.forChild(),c.Y,M.a,B.a,C.a,w]]}),t})()}}]);